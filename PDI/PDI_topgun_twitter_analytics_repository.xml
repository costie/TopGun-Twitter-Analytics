<?xml version="1.0" encoding="UTF-8"?>
<repository>

<transformations>
<transformation>
  <info>
    <name>Check Rate Limit</name>
    <description/>
    <extended_description/>
    <trans_version/>
    <trans_type>Normal</trans_type>
    <trans_status>0</trans_status>
    <directory>&#47;twitter_analytics</directory>
    <parameters>
    </parameters>
    <log>
<trans-log-table><connection/>
<schema/>
<table/>
<size_limit_lines/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STATUS</id><enabled>Y</enabled><name>STATUS</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name><subject/></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name><subject/></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name><subject/></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name><subject/></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name><subject/></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name><subject/></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>STARTDATE</id><enabled>Y</enabled><name>STARTDATE</name></field><field><id>ENDDATE</id><enabled>Y</enabled><name>ENDDATE</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>DEPDATE</id><enabled>Y</enabled><name>DEPDATE</name></field><field><id>REPLAYDATE</id><enabled>Y</enabled><name>REPLAYDATE</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></trans-log-table>
<perf-log-table><connection/>
<schema/>
<table/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>SEQ_NR</id><enabled>Y</enabled><name>SEQ_NR</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>INPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>INPUT_BUFFER_ROWS</name></field><field><id>OUTPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>OUTPUT_BUFFER_ROWS</name></field></perf-log-table>
<channel-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>LOGGING_OBJECT_TYPE</id><enabled>Y</enabled><name>LOGGING_OBJECT_TYPE</name></field><field><id>OBJECT_NAME</id><enabled>Y</enabled><name>OBJECT_NAME</name></field><field><id>OBJECT_COPY</id><enabled>Y</enabled><name>OBJECT_COPY</name></field><field><id>REPOSITORY_DIRECTORY</id><enabled>Y</enabled><name>REPOSITORY_DIRECTORY</name></field><field><id>FILENAME</id><enabled>Y</enabled><name>FILENAME</name></field><field><id>OBJECT_ID</id><enabled>Y</enabled><name>OBJECT_ID</name></field><field><id>OBJECT_REVISION</id><enabled>Y</enabled><name>OBJECT_REVISION</name></field><field><id>PARENT_CHANNEL_ID</id><enabled>Y</enabled><name>PARENT_CHANNEL_ID</name></field><field><id>ROOT_CHANNEL_ID</id><enabled>Y</enabled><name>ROOT_CHANNEL_ID</name></field></channel-log-table>
<step-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></step-log-table>
    </log>
    <maxdate>
      <connection/>
      <table/>
      <field/>
      <offset>0.0</offset>
      <maxdiff>0.0</maxdiff>
    </maxdate>
    <size_rowset>10000</size_rowset>
    <sleep_time_empty>50</sleep_time_empty>
    <sleep_time_full>50</sleep_time_full>
    <unique_connections>N</unique_connections>
    <feedback_shown>Y</feedback_shown>
    <feedback_size>50000</feedback_size>
    <using_thread_priorities>Y</using_thread_priorities>
    <shared_objects_file/>
    <capture_step_performance>N</capture_step_performance>
    <step_performance_capturing_delay>1000</step_performance_capturing_delay>
    <step_performance_capturing_size_limit/>
    <dependencies>
    </dependencies>
    <partitionschemas>
    </partitionschemas>
    <slaveservers>
    </slaveservers>
    <clusterschemas>
    </clusterschemas>
  <modified_user>admin</modified_user>
  <modified_date>2011&#47;09&#47;03 11:20:32.000</modified_date>
  </info>
  <notepads>
  </notepads>
  <connection>
    <name>twitter_analytics</name>
    <server>localhost</server>
    <type>MYSQL</type>
    <access>Native</access>
    <database>topgun_twitter_analytics</database>
    <port>3306</port>
    <username>topgun</username>
    <password>Encrypted 2be98afc86aa7f2e4cb1ba265db95bac3</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>EXTRA_OPTION_MYSQL.defaultFetchSize</code><attribute>500</attribute></attribute>
      <attribute><code>EXTRA_OPTION_MYSQL.useCursorFetch</code><attribute>true</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>3306</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>STREAM_RESULTS</code><attribute>Y</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>N</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>N</attribute></attribute>
    </attributes>
  </connection>
  <order>
  <hop> <from>Get data from XML</from><to>calculate time_to_wait</to><enabled>Y</enabled> </hop>  <hop> <from>Fetch UNIX_TIMESTAMP (since epoch)</from><to>Twitter Rate Limit</to><enabled>Y</enabled> </hop>  <hop> <from>Twitter Rate Limit</from><to>Get data from XML</to><enabled>Y</enabled> </hop>  <hop> <from>calculate time_to_wait</from><to>Set TIME_TO_WAIT and REMAINING_HITS</to><enabled>Y</enabled> </hop>  </order>
  <step>
    <name>Fetch UNIX_TIMESTAMP (since epoch)</name>
    <type>TableInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <sql>SELECT
UNIX_TIMESTAMP() AS seconds_since_epoch</sql>
    <limit>0</limit>
    <lookup/>
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>171</xloc>
      <yloc>36</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Get data from XML</name>
    <type>getXMLData</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <include>N</include>
    <include_field/>
    <rownum>N</rownum>
    <addresultfile>N</addresultfile>
    <namespaceaware>N</namespaceaware>
    <ignorecomments>N</ignorecomments>
    <readurl>N</readurl>
    <validating>N</validating>
    <usetoken>N</usetoken>
    <IsIgnoreEmptyFile>N</IsIgnoreEmptyFile>
    <doNotFailIfNoFile>Y</doNotFailIfNoFile>
    <rownum_field/>
    <encoding>UTF-8</encoding>
    <file>
      <name>C:\Users\neil\AppData\Local\Microsoft\Windows\Temporary Internet Files\Content.IE5\VVI2UN2R\rate_limit_status[1].xml</name>
      <filemask/>
      <file_required>N</file_required>
      <include_subfolders/>
    </file>
    <fields>
      <field>
        <name>type</name>
        <xpath>reset-time-in-seconds&#47;@type</xpath>
        <element_type>node</element_type>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>reset_time_in_seconds</name>
        <xpath>reset-time-in-seconds</xpath>
        <element_type>node</element_type>
        <type>Integer</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>rest_time_type</name>
        <xpath>reset-time&#47;@type</xpath>
        <element_type>node</element_type>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>reset_time</name>
        <xpath>reset-time</xpath>
        <element_type>node</element_type>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>remaining_hits_type</name>
        <xpath>remaining-hits&#47;@type</xpath>
        <element_type>node</element_type>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>remaining_hits</name>
        <xpath>remaining-hits</xpath>
        <element_type>node</element_type>
        <type>Integer</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>hourly_limit_type</name>
        <xpath>hourly-limit&#47;@type</xpath>
        <element_type>node</element_type>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>hourly_limit</name>
        <xpath>hourly-limit</xpath>
        <element_type>node</element_type>
        <type>Integer</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
    </fields>
    <limit>0</limit>
    <loopxpath>&#47;hash</loopxpath>
    <IsInFields>Y</IsInFields>
    <IsAFile>N</IsAFile>
    <XmlField>rate_info</XmlField>
    <prunePath/>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>643</xloc>
      <yloc>36</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Set TIME_TO_WAIT and REMAINING_HITS</name>
    <type>SetVariable</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <field_name>time_to_wait</field_name>
        <variable_name>TIME_TO_WAIT</variable_name>
        <variable_type>ROOT_JOB</variable_type>
        <default_value/>
        </field>
      <field>
        <field_name>remaining_hits</field_name>
        <variable_name>REMAINING_HITS</variable_name>
        <variable_type>ROOT_JOB</variable_type>
        <default_value/>
        </field>
      </fields>
    <use_formatting>N</use_formatting>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1115</xloc>
      <yloc>36</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Twitter Rate Limit</name>
    <type>HTTP</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <url>http:&#47;&#47;twitter.com&#47;account&#47;rate_limit_status.xml</url>
    <urlInField>N</urlInField>
    <urlField/>
    <encoding/>
    <httpLogin/>
    <httpPassword/>
    <proxyHost/>
    <proxyPort/>
    <lookup>
    </lookup>
    <result>
      <name>rate_info</name>
      <code/>
    </result>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>407</xloc>
      <yloc>36</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>calculate time_to_wait</name>
    <type>Calculator</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <calculation><field_name>time_to_wait</field_name>
<calc_type>SUBTRACT</calc_type>
<field_a>reset_time_in_seconds</field_a>
<field_b>seconds_since_epoch</field_b>
<field_c/>
<value_type>Integer</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<remove>N</remove>
<conversion_mask>0</conversion_mask>
<decimal_symbol>.</decimal_symbol>
<grouping_symbol>,</grouping_symbol>
<currency_symbol/>
</calculation>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>879</xloc>
      <yloc>36</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step_error_handling>
  </step_error_handling>
   <slave-step-copy-partition-distribution>
</slave-step-copy-partition-distribution>
   <slave_transformation>N</slave_transformation>
</transformation>

<transformation>
  <info>
    <name>Extract Twitter Keywords</name>
    <description/>
    <extended_description/>
    <trans_version/>
    <trans_type>Normal</trans_type>
    <trans_status>0</trans_status>
    <directory>&#47;twitter_analytics</directory>
    <parameters>
    </parameters>
    <log>
<trans-log-table><connection/>
<schema/>
<table/>
<size_limit_lines/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>N</enabled><name>CHANNEL_ID</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STATUS</id><enabled>Y</enabled><name>STATUS</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name><subject/></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name><subject/></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name><subject/></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name><subject/></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name><subject/></field><field><id>LINES_REJECTED</id><enabled>N</enabled><name>LINES_REJECTED</name><subject/></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>STARTDATE</id><enabled>Y</enabled><name>STARTDATE</name></field><field><id>ENDDATE</id><enabled>Y</enabled><name>ENDDATE</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>DEPDATE</id><enabled>Y</enabled><name>DEPDATE</name></field><field><id>REPLAYDATE</id><enabled>Y</enabled><name>REPLAYDATE</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></trans-log-table>
<perf-log-table><connection/>
<schema/>
<table/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>SEQ_NR</id><enabled>Y</enabled><name>SEQ_NR</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>INPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>INPUT_BUFFER_ROWS</name></field><field><id>OUTPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>OUTPUT_BUFFER_ROWS</name></field></perf-log-table>
<channel-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>LOGGING_OBJECT_TYPE</id><enabled>Y</enabled><name>LOGGING_OBJECT_TYPE</name></field><field><id>OBJECT_NAME</id><enabled>Y</enabled><name>OBJECT_NAME</name></field><field><id>OBJECT_COPY</id><enabled>Y</enabled><name>OBJECT_COPY</name></field><field><id>REPOSITORY_DIRECTORY</id><enabled>Y</enabled><name>REPOSITORY_DIRECTORY</name></field><field><id>FILENAME</id><enabled>Y</enabled><name>FILENAME</name></field><field><id>OBJECT_ID</id><enabled>Y</enabled><name>OBJECT_ID</name></field><field><id>OBJECT_REVISION</id><enabled>Y</enabled><name>OBJECT_REVISION</name></field><field><id>PARENT_CHANNEL_ID</id><enabled>Y</enabled><name>PARENT_CHANNEL_ID</name></field><field><id>ROOT_CHANNEL_ID</id><enabled>Y</enabled><name>ROOT_CHANNEL_ID</name></field></channel-log-table>
<step-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></step-log-table>
    </log>
    <maxdate>
      <connection/>
      <table/>
      <field/>
      <offset>0.0</offset>
      <maxdiff>0.0</maxdiff>
    </maxdate>
    <size_rowset>10000</size_rowset>
    <sleep_time_empty>50</sleep_time_empty>
    <sleep_time_full>50</sleep_time_full>
    <unique_connections>N</unique_connections>
    <feedback_shown>Y</feedback_shown>
    <feedback_size>50000</feedback_size>
    <using_thread_priorities>Y</using_thread_priorities>
    <shared_objects_file/>
    <capture_step_performance>N</capture_step_performance>
    <step_performance_capturing_delay>1000</step_performance_capturing_delay>
    <step_performance_capturing_size_limit/>
    <dependencies>
    </dependencies>
    <partitionschemas>
    </partitionschemas>
    <slaveservers>
    </slaveservers>
    <clusterschemas>
    </clusterschemas>
  <modified_user>admin</modified_user>
  <modified_date>2011&#47;09&#47;03 11:20:32.000</modified_date>
  </info>
  <notepads>
  </notepads>
  <connection>
    <name>twitter_analytics</name>
    <server>localhost</server>
    <type>MYSQL</type>
    <access>Native</access>
    <database>topgun_twitter_analytics</database>
    <port>3306</port>
    <username>topgun</username>
    <password>Encrypted 2be98afc86aa7f2e4cb1ba265db95bac3</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>EXTRA_OPTION_MYSQL.defaultFetchSize</code><attribute>500</attribute></attribute>
      <attribute><code>EXTRA_OPTION_MYSQL.useCursorFetch</code><attribute>true</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>3306</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>STREAM_RESULTS</code><attribute>Y</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>N</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>N</attribute></attribute>
    </attributes>
  </connection>
  <order>
  <hop> <from>Derive prev_rownum for double</from><to>Join first and second</to><enabled>Y</enabled> </hop>  <hop> <from>Derive prev_rownum for triple</from><to>Join first, second, and third</to><enabled>Y</enabled> </hop>  <hop> <from>Join first and second</from><to>Join first, second, and third</to><enabled>Y</enabled> </hop>  <hop> <from>Derive prev_rownum for quadruple</from><to>Join first, second, third, and fourth</to><enabled>Y</enabled> </hop>  <hop> <from>Join first, second, and third</from><to>Join first, second, third, and fourth</to><enabled>Y</enabled> </hop>  <hop> <from>Join first, second, third, and fourth</from><to>Concatenate quadruple keyword</to><enabled>Y</enabled> </hop>  <hop> <from>Join first, second, and third</from><to>Concatenate triple keyword</to><enabled>Y</enabled> </hop>  <hop> <from>Join first and second</from><to>Concatenate double keyword</to><enabled>Y</enabled> </hop>  <hop> <from>staging_fact_tweets, dim_tweets</from><to>Join Rows (cartesian product)</to><enabled>Y</enabled> </hop>  <hop> <from>bridge_group_single_keywords</from><to>Join Rows (cartesian product)</to><enabled>Y</enabled> </hop>  <hop> <from>bridge_group_double_keywords</from><to>Join Rows (cartesian product)</to><enabled>Y</enabled> </hop>  <hop> <from>bridge_group_triple_keywords</from><to>Join Rows (cartesian product)</to><enabled>Y</enabled> </hop>  <hop> <from>bridge_group_quadruple_keywords</from><to>Join Rows (cartesian product)</to><enabled>Y</enabled> </hop>  <hop> <from>bridge_group_user_mentions</from><to>Join Rows (cartesian product)</to><enabled>Y</enabled> </hop>  <hop> <from>bridge_group_hashtags</from><to>Join Rows (cartesian product)</to><enabled>Y</enabled> </hop>  <hop> <from>Join Rows (cartesian product)</from><to>Relative Group ID</to><enabled>Y</enabled> </hop>  <hop> <from>Relative Group ID</from><to>Calculate new absolute Group IDs</to><enabled>Y</enabled> </hop>  <hop> <from>Calculate new absolute Group IDs</from><to>Split field to rows</to><enabled>Y</enabled> </hop>  <hop> <from>derive num_single_keywords</from><to>derive single_kw_weighting_factor</to><enabled>Y</enabled> </hop>  <hop> <from>derive single_kw_weighting_factor</from><to>Merge Join</to><enabled>Y</enabled> </hop>  <hop> <from>dim_single_keywords</from><to>Merge Join</to><enabled>Y</enabled> </hop>  <hop> <from>Merge Join</from><to>bridge_group_single_keywords 2</to><enabled>Y</enabled> </hop>  <hop> <from>Concatenate double keyword</from><to>derive num_double_keywords</to><enabled>Y</enabled> </hop>  <hop> <from>Concatenate double keyword</from><to>dim_double_keywords</to><enabled>Y</enabled> </hop>  <hop> <from>derive num_double_keywords</from><to>derive double_kw_weighting_factor</to><enabled>Y</enabled> </hop>  <hop> <from>dim_double_keywords</from><to>Merge Join 2</to><enabled>Y</enabled> </hop>  <hop> <from>derive double_kw_weighting_factor</from><to>Merge Join 2</to><enabled>Y</enabled> </hop>  <hop> <from>Merge Join 2</from><to>bridge_group_double_keywords 2</to><enabled>Y</enabled> </hop>  <hop> <from>Concatenate triple keyword</from><to>derive num_triple_keywords</to><enabled>Y</enabled> </hop>  <hop> <from>Concatenate triple keyword</from><to>dim_triple_keywords</to><enabled>Y</enabled> </hop>  <hop> <from>derive num_triple_keywords</from><to>derive triple_kw_weighting_factor</to><enabled>Y</enabled> </hop>  <hop> <from>derive triple_kw_weighting_factor</from><to>Merge Join 3</to><enabled>Y</enabled> </hop>  <hop> <from>dim_triple_keywords</from><to>Merge Join 3</to><enabled>Y</enabled> </hop>  <hop> <from>Merge Join 3</from><to>bridge_group_triple_keywords 2</to><enabled>Y</enabled> </hop>  <hop> <from>Concatenate quadruple keyword</from><to>derive num_quadruple_keywords</to><enabled>Y</enabled> </hop>  <hop> <from>derive num_quadruple_keywords</from><to>derive quadruple_kw_weighting_factor</to><enabled>Y</enabled> </hop>  <hop> <from>Concatenate quadruple keyword</from><to>dim_quadruple_keywords</to><enabled>Y</enabled> </hop>  <hop> <from>derive quadruple_kw_weighting_factor</from><to>Merge Join 4</to><enabled>Y</enabled> </hop>  <hop> <from>dim_quadruple_keywords</from><to>Merge Join 4</to><enabled>Y</enabled> </hop>  <hop> <from>user_mentions hashtags single double</from><to>user_mentions hashtags single double triple</to><enabled>Y</enabled> </hop>  <hop> <from>user_mentions hashtags single double triple</from><to>user_mentions hashtags single double triple quadruple</to><enabled>Y</enabled> </hop>  <hop> <from>Merge Join 4</from><to>bridge_group_triple_keywords 2 2</to><enabled>Y</enabled> </hop>  <hop> <from>Derive string type</from><to>Switch &#47; Case</to><enabled>Y</enabled> </hop>  <hop> <from>Match users</from><to>match hashtags</to><enabled>Y</enabled> </hop>  <hop> <from>Match words</from><to>Match users</to><enabled>Y</enabled> </hop>  <hop> <from>match hashtags</from><to>Derive string type</to><enabled>Y</enabled> </hop>  <hop> <from>Split field to rows</from><to>Match words</to><enabled>Y</enabled> </hop>  <hop> <from>Switch &#47; Case</from><to>Select keywords</to><enabled>Y</enabled> </hop>  <hop> <from>Select keywords</from><to>derive num_single_keywords</to><enabled>Y</enabled> </hop>  <hop> <from>Select keywords</from><to>dim_single_keywords</to><enabled>Y</enabled> </hop>  <hop> <from>Select keywords</from><to>Join first and second</to><enabled>Y</enabled> </hop>  <hop> <from>Select keywords</from><to>Derive prev_rownum for double</to><enabled>Y</enabled> </hop>  <hop> <from>Select keywords</from><to>Derive prev_rownum for triple</to><enabled>Y</enabled> </hop>  <hop> <from>Select keywords</from><to>Derive prev_rownum for quadruple</to><enabled>Y</enabled> </hop>  <hop> <from>Switch &#47; Case</from><to>discarded tokens</to><enabled>Y</enabled> </hop>  <hop> <from>derive num_hashtags</from><to>derive hashtag_weighting_factor</to><enabled>Y</enabled> </hop>  <hop> <from>Switch &#47; Case</from><to>Select hashtags</to><enabled>Y</enabled> </hop>  <hop> <from>Select hashtags</from><to>derive num_hashtags</to><enabled>Y</enabled> </hop>  <hop> <from>Select hashtags</from><to>dim_hashtags</to><enabled>Y</enabled> </hop>  <hop> <from>dim_hashtags</from><to>Merge Join 5</to><enabled>Y</enabled> </hop>  <hop> <from>derive hashtag_weighting_factor</from><to>Merge Join 5</to><enabled>Y</enabled> </hop>  <hop> <from>Merge Join 5</from><to>bridge_group_hashtags 2</to><enabled>Y</enabled> </hop>  <hop> <from>Select User mentions</from><to>derive num_user_mentions</to><enabled>Y</enabled> </hop>  <hop> <from>Switch &#47; Case</from><to>Select User mentions</to><enabled>Y</enabled> </hop>  <hop> <from>Select User mentions</from><to>dim_user_mentions</to><enabled>Y</enabled> </hop>  <hop> <from>derive num_user_mentions</from><to>derive user_mention_weighting_factor</to><enabled>Y</enabled> </hop>  <hop> <from>derive user_mention_weighting_factor</from><to>Merge Join 6</to><enabled>Y</enabled> </hop>  <hop> <from>dim_user_mentions</from><to>Merge Join 6</to><enabled>Y</enabled> </hop>  <hop> <from>Merge Join 6</from><to>bridge_group_user_mentions 2</to><enabled>Y</enabled> </hop>  <hop> <from>user_mentions hashtags</from><to>user_mentions hashtags single</to><enabled>Y</enabled> </hop>  <hop> <from>user_mentions hashtags single</from><to>user_mentions hashtags single double</to><enabled>Y</enabled> </hop>  <hop> <from>user_mentions hashtags single double triple quadruple</from><to>Formula</to><enabled>Y</enabled> </hop>  <hop> <from>consolidated_fact_tweet_id</from><to>Consolidate IDs across rows</to><enabled>Y</enabled> </hop>  <hop> <from>derive num_user_mentions</from><to>user_mentions hashtags</to><enabled>Y</enabled> </hop>  <hop> <from>derive num_hashtags</from><to>user_mentions hashtags</to><enabled>Y</enabled> </hop>  <hop> <from>derive num_single_keywords</from><to>user_mentions hashtags single</to><enabled>Y</enabled> </hop>  <hop> <from>derive num_double_keywords</from><to>user_mentions hashtags single double</to><enabled>Y</enabled> </hop>  <hop> <from>derive num_triple_keywords</from><to>user_mentions hashtags single double triple</to><enabled>Y</enabled> </hop>  <hop> <from>derive num_quadruple_keywords</from><to>user_mentions hashtags single double triple quadruple</to><enabled>Y</enabled> </hop>  <hop> <from>Formula</from><to>Discard unused columns</to><enabled>Y</enabled> </hop>  <hop> <from>Discard unused columns</from><to>consolidated_fact_tweet_id</to><enabled>Y</enabled> </hop>  <hop> <from>Consolidate IDs across rows</from><to>staging_fact_tweets</to><enabled>Y</enabled> </hop>  </order>
  <step>
    <name>Calculate new absolute Group IDs</name>
    <type>Formula</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>absolute_single_kw_group_id</field_name>
<formula_string>([base_group_single_kw_id]+[relative_group_id])</formula_string>
<value_type>Number</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
       <formula><field_name>absolute_double_kw_group_id</field_name>
<formula_string>([base_group_double_kw_id]+[relative_group_id])</formula_string>
<value_type>Number</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
       <formula><field_name>absolute_triple_kw_group_id</field_name>
<formula_string>([base_group_triple_kw_id]+[relative_group_id])</formula_string>
<value_type>Number</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
       <formula><field_name>absolute_quadruple_group_id</field_name>
<formula_string>([base_group_quadruple_kw_id]+[relative_group_id])</formula_string>
<value_type>Number</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
       <formula><field_name>absolute_user_mention_group_id</field_name>
<formula_string>([base_group_user_mention_id] + [relative_group_id])</formula_string>
<value_type>Number</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
       <formula><field_name>absolute_hashtag_group_id</field_name>
<formula_string>([base_group_hashtag_id] + [relative_group_id])</formula_string>
<value_type>Number</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>357</xloc>
      <yloc>582</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Concatenate double keyword</name>
    <type>Formula</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>double_keyword</field_name>
<formula_string>([output_split] &amp; &quot; &quot; &amp; [output_split_1])</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1118</xloc>
      <yloc>714</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Concatenate quadruple keyword</name>
    <type>Formula</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>quadruple_keyword</field_name>
<formula_string>([output_split] &amp; &quot; &quot; &amp; [output_split_1] &amp; &quot; &quot; &amp; [output_split_2] &amp; &quot; &quot; &amp; [output_split_3])</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1118</xloc>
      <yloc>1055</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Concatenate triple keyword</name>
    <type>Formula</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>triple_keyword</field_name>
<formula_string>([output_split] &amp; &quot; &quot; &amp; [output_split_1] &amp; &quot; &quot; &amp; [output_split_2])</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1118</xloc>
      <yloc>861</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Consolidate IDs across rows</name>
    <type>GroupBy</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <all_rows>N</all_rows>
      <ignore_aggregate>N</ignore_aggregate>
      <field_ignore/>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>grp</prefix>
      <add_linenr>N</add_linenr>
      <linenr_fieldname/>
      <give_back_row>N</give_back_row>
      <group>
        <field>
          <name>consolidated_fact_tweet_id</name>
        </field>
      </group>
      <fields>
        <field>
          <aggregate>c_single_kw_group_id</aggregate>
          <subject>single_kw_group_id</subject>
          <type>MAX</type>
          <valuefield/>
        </field>
        <field>
          <aggregate>c_double_kw_group_id</aggregate>
          <subject>double_kw_group_id</subject>
          <type>MAX</type>
          <valuefield/>
        </field>
        <field>
          <aggregate>c_triple_kw_group_id</aggregate>
          <subject>triple_kw_group_id</subject>
          <type>MAX</type>
          <valuefield/>
        </field>
        <field>
          <aggregate>c_quadruple_kw_group_id</aggregate>
          <subject>quadruple_kw_group_id</subject>
          <type>MAX</type>
          <valuefield/>
        </field>
        <field>
          <aggregate>c_user_mention_group_id</aggregate>
          <subject>user_mention_group_id</subject>
          <type>MAX</type>
          <valuefield/>
        </field>
        <field>
          <aggregate>c_hashtag_group_id</aggregate>
          <subject>hashtag_group_id</subject>
          <type>MAX</type>
          <valuefield/>
        </field>
        <field>
          <aggregate>c_num_user_mentions</aggregate>
          <subject>num_user_mentions</subject>
          <type>MAX</type>
          <valuefield/>
        </field>
        <field>
          <aggregate>c_num_hashtags</aggregate>
          <subject>num_hashtags</subject>
          <type>MAX</type>
          <valuefield/>
        </field>
        <field>
          <aggregate>c_num_single_keywords</aggregate>
          <subject>num_single_keywords</subject>
          <type>MAX</type>
          <valuefield/>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1829</xloc>
      <yloc>962</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Derive prev_rownum for double</name>
    <type>Formula</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>double_prev_rownum</field_name>
<formula_string>([cur_rownum]-1)</formula_string>
<value_type>Number</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>738</xloc>
      <yloc>713</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Derive prev_rownum for quadruple</name>
    <type>Formula</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>quadruple_prev_rownum</field_name>
<formula_string>([cur_rownum]-3)</formula_string>
<value_type>Number</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>738</xloc>
      <yloc>1055</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Derive prev_rownum for triple</name>
    <type>Formula</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>triple_prev_rownum</field_name>
<formula_string>([cur_rownum]-2)</formula_string>
<value_type>Number</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>738</xloc>
      <yloc>862</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Derive string type</name>
    <type>Formula</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>string_type</field_name>
<formula_string>if([is_word]; &quot;W&quot;; if([is_user]; &quot;U&quot;; if([is_hashtag]; &quot;H&quot;; &quot;O&quot;)))</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>357</xloc>
      <yloc>102</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Discard unused columns</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>num_user_mentions</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>user_mention_group_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>num_hashtags</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>hashtag_group_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>num_single_keywords</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>single_kw_group_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>double_kw_group_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>triple_kw_group_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>quadruple_kw_group_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>consolidated_fact_tweet_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1829</xloc>
      <yloc>786</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Formula</name>
    <type>Formula</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>consolidated_fact_tweet_id</field_name>
<formula_string>IF(NOT(ISBLANK([fact_tweet_id]));[fact_tweet_id]; IF(NOT(ISBLANK([fact_tweet_id_1]));[fact_tweet_id_1]; IF(NOT(ISBLANK([fact_tweet_id_2]));[fact_tweet_id_2]; IF(NOT(ISBLANK([fact_tweet_id_3]));[fact_tweet_id_3]; IF(NOT(ISBLANK([fact_tweet_id_4]));[fact_tweet_id_4];[fact_tweet_id_5])))))</formula_string>
<value_type>Number</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1829</xloc>
      <yloc>698</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Join Rows (cartesian product)</name>
    <type>JoinRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <cache_size>500</cache_size>
      <main/>
    <compare>
<condition>
 <negated>N</negated>
 <leftvalue/>
 <function>=</function>
 <rightvalue/>
 </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>357</xloc>
      <yloc>774</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Join first and second</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>INNER</join_type>
<step1>Select keywords</step1>
<step2>Derive prev_rownum for double</step2>
    <keys_1>
      <key>fact_tweet_id</key>
      <key>cur_rownum</key>
    </keys_1>
    <keys_2>
      <key>fact_tweet_id</key>
      <key>double_prev_rownum</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>738</xloc>
      <yloc>567</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Join first, second, and third</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>INNER</join_type>
<step1>Join first and second</step1>
<step2>Derive prev_rownum for triple</step2>
    <keys_1>
      <key>fact_tweet_id</key>
      <key>cur_rownum</key>
    </keys_1>
    <keys_2>
      <key>fact_tweet_id</key>
      <key>triple_prev_rownum</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>903</xloc>
      <yloc>861</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Join first, second, third, and fourth</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>INNER</join_type>
<step1>Join first, second, and third</step1>
<step2>Derive prev_rownum for quadruple</step2>
    <keys_1>
      <key>fact_tweet_id</key>
      <key>cur_rownum</key>
    </keys_1>
    <keys_2>
      <key>fact_tweet_id</key>
      <key>quadruple_prev_rownum</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>904</xloc>
      <yloc>1055</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Match users</name>
    <type>RegexEval</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <script><![CDATA[\@.+]]></script>    <matcher>output_split</matcher>
    <resultfieldname>is_user</resultfieldname>
    <usevar>N</usevar>
    <allowcapturegroups>N</allowcapturegroups>
    <canoneq>N</canoneq>
    <caseinsensitive>N</caseinsensitive>
    <comment>N</comment>
    <dotall>N</dotall>
    <multiline>N</multiline>
    <unicode>N</unicode>
    <unix>N</unix>
    <fields>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>357</xloc>
      <yloc>294</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Match words</name>
    <type>RegexEval</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <script><![CDATA[['"\(`]?\w+['"\)`\.,]?[\.,]?]]></script>    <matcher>output_split</matcher>
    <resultfieldname>is_word</resultfieldname>
    <usevar>N</usevar>
    <allowcapturegroups>N</allowcapturegroups>
    <canoneq>N</canoneq>
    <caseinsensitive>N</caseinsensitive>
    <comment>N</comment>
    <dotall>N</dotall>
    <multiline>N</multiline>
    <unicode>N</unicode>
    <unix>N</unix>
    <fields>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>357</xloc>
      <yloc>390</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Merge Join</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>INNER</join_type>
<step1>derive single_kw_weighting_factor</step1>
<step2>dim_single_keywords</step2>
    <keys_1>
      <key>fact_tweet_id</key>
    </keys_1>
    <keys_2>
      <key>fact_tweet_id</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1330</xloc>
      <yloc>315</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Merge Join 2</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>INNER</join_type>
<step1>derive double_kw_weighting_factor</step1>
<step2>dim_double_keywords</step2>
    <keys_1>
      <key>fact_tweet_id</key>
    </keys_1>
    <keys_2>
      <key>fact_tweet_id</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1627</xloc>
      <yloc>557</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Merge Join 3</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>INNER</join_type>
<step1>derive triple_kw_weighting_factor</step1>
<step2>dim_triple_keywords</step2>
    <keys_1>
      <key>fact_tweet_id</key>
    </keys_1>
    <keys_2>
      <key>fact_tweet_id</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1461</xloc>
      <yloc>782</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Merge Join 4</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>INNER</join_type>
<step1>derive quadruple_kw_weighting_factor</step1>
<step2>dim_quadruple_keywords</step2>
    <keys_1>
      <key>fact_tweet_id</key>
    </keys_1>
    <keys_2>
      <key>fact_tweet_id</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1461</xloc>
      <yloc>1055</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Merge Join 5</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>INNER</join_type>
<step1>derive hashtag_weighting_factor</step1>
<step2>dim_hashtags</step2>
    <keys_1>
      <key>fact_tweet_id</key>
    </keys_1>
    <keys_2>
      <key>fact_tweet_id</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1118</xloc>
      <yloc>225</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Merge Join 6</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>INNER</join_type>
<step1>dim_user_mentions</step1>
<step2>derive user_mention_weighting_factor</step2>
    <keys_1>
      <key>fact_tweet_id</key>
    </keys_1>
    <keys_2>
      <key>fact_tweet_id</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1125</xloc>
      <yloc>3</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Relative Group ID</name>
    <type>Sequence</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <valuename>relative_group_id</valuename>
      <use_database>N</use_database>
      <connection/>
      <schema/>
      <seqname>SEQ_</seqname>
      <use_counter>Y</use_counter>
      <counter_name/>
      <start_at>1</start_at>
      <increment_by>1</increment_by>
      <max_value>999999999</max_value>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>357</xloc>
      <yloc>678</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Select User mentions</name>
    <type>SelectValues</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>fact_tweet_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>tweet_status</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>base_group_user_mention_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>relative_group_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>absolute_user_mention_group_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>output_split</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>cur_rownum</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>is_word</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>is_user</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>is_hashtag</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>string_type</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>549</xloc>
      <yloc>3</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Select hashtags</name>
    <type>SelectValues</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>fact_tweet_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>tweet_status</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>base_group_hashtag_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>relative_group_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>absolute_hashtag_group_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>output_split</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>cur_rownum</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>is_word</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>is_user</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>is_hashtag</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>string_type</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>738</xloc>
      <yloc>124</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Select keywords</name>
    <type>SelectValues</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>fact_tweet_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>tweet_status</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>base_group_single_kw_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>base_group_double_kw_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>base_group_triple_kw_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>base_group_quadruple_kw_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>base_group_user_mention_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>base_group_hashtag_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>relative_group_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>absolute_single_kw_group_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>absolute_double_kw_group_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>absolute_triple_kw_group_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>absolute_quadruple_group_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>absolute_user_mention_group_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>absolute_hashtag_group_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>output_split</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>cur_rownum</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>490</xloc>
      <yloc>200</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Split field to rows</name>
    <type>SplitFieldToRows3</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
   <splitfield>tweet_status</splitfield>
   <delimiter> </delimiter>
   <newfield>output_split</newfield>
   <rownum>Y</rownum>
   <rownum_field>cur_rownum</rownum_field>
   <resetrownumber>Y</resetrownumber>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>357</xloc>
      <yloc>486</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Switch &#47; Case</name>
    <type>SwitchCase</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<fieldname>string_type</fieldname>
<use_contains>N</use_contains>
<case_value_type>String</case_value_type>
<case_value_format/>
<case_value_decimal/>
<case_value_group/>
<default_target_step>discarded tokens</default_target_step>
<cases><case><value>U</value>
<target_step>Select User mentions</target_step>
</case><case><value>H</value>
<target_step>Select hashtags</target_step>
</case><case><value>W</value>
<target_step>Select keywords</target_step>
</case></cases>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>357</xloc>
      <yloc>3</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>bridge_group_double_keywords</name>
    <type>TableInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <sql>SELECT
	IFNULL(MAX(group_id),0) AS base_group_double_kw_id
FROM
	bridge_group_double_keywords</sql>
    <limit>0</limit>
    <lookup/>
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>90</xloc>
      <yloc>538</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>bridge_group_double_keywords 2</name>
    <type>TableOutput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <schema/>
    <table>bridge_group_double_keywords</table>
    <commit>1000</commit>
    <truncate>N</truncate>
    <ignore_errors>N</ignore_errors>
    <use_batch>Y</use_batch>
    <specify_fields>Y</specify_fields>
    <partitioning_enabled>N</partitioning_enabled>
    <partitioning_field/>
    <partitioning_daily>N</partitioning_daily>
    <partitioning_monthly>Y</partitioning_monthly>
    <tablename_in_field>N</tablename_in_field>
    <tablename_field/>
    <tablename_in_table>Y</tablename_in_table>
    <return_keys>N</return_keys>
    <return_field/>
    <fields>
        <field>
          <column_name>dim_double_keyword_id</column_name>
          <stream_name>dim_double_keyword_id</stream_name>
        </field>
        <field>
          <column_name>group_id</column_name>
          <stream_name>absolute_single_kw_group_id</stream_name>
        </field>
        <field>
          <column_name>weighting_factor</column_name>
          <stream_name>double_kw_weighting_factor</stream_name>
        </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1627</xloc>
      <yloc>714</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>bridge_group_hashtags</name>
    <type>TableInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <sql>SELECT
	IFNULL(MAX(group_id),0) AS base_group_hashtag_id
FROM
	bridge_group_hashtags</sql>
    <limit>0</limit>
    <lookup/>
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>90</xloc>
      <yloc>866</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>bridge_group_hashtags 2</name>
    <type>TableOutput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <schema/>
    <table>bridge_group_hashtags</table>
    <commit>1000</commit>
    <truncate>N</truncate>
    <ignore_errors>N</ignore_errors>
    <use_batch>Y</use_batch>
    <specify_fields>Y</specify_fields>
    <partitioning_enabled>N</partitioning_enabled>
    <partitioning_field/>
    <partitioning_daily>N</partitioning_daily>
    <partitioning_monthly>Y</partitioning_monthly>
    <tablename_in_field>N</tablename_in_field>
    <tablename_field/>
    <tablename_in_table>Y</tablename_in_table>
    <return_keys>N</return_keys>
    <return_field/>
    <fields>
        <field>
          <column_name>dim_hashtag_id</column_name>
          <stream_name>dim_hashtag_id</stream_name>
        </field>
        <field>
          <column_name>group_id</column_name>
          <stream_name>absolute_hashtag_group_id</stream_name>
        </field>
        <field>
          <column_name>weighting_factor</column_name>
          <stream_name>hashtag_weighting_factor</stream_name>
        </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1627</xloc>
      <yloc>247</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>bridge_group_quadruple_keywords</name>
    <type>TableInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <sql>SELECT
	IFNULL(MAX(group_id),0) AS base_group_quadruple_kw_id
FROM
	bridge_group_quadruple_keywords</sql>
    <limit>0</limit>
    <lookup/>
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>90</xloc>
      <yloc>702</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>bridge_group_single_keywords</name>
    <type>TableInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <sql>SELECT
	IFNULL(MAX(group_id),0) AS base_group_single_kw_id
FROM
	bridge_group_single_keywords</sql>
    <limit>0</limit>
    <lookup/>
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>90</xloc>
      <yloc>456</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>bridge_group_single_keywords 2</name>
    <type>TableOutput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <schema/>
    <table>bridge_group_single_keywords</table>
    <commit>1000</commit>
    <truncate>N</truncate>
    <ignore_errors>N</ignore_errors>
    <use_batch>Y</use_batch>
    <specify_fields>Y</specify_fields>
    <partitioning_enabled>N</partitioning_enabled>
    <partitioning_field/>
    <partitioning_daily>N</partitioning_daily>
    <partitioning_monthly>Y</partitioning_monthly>
    <tablename_in_field>N</tablename_in_field>
    <tablename_field/>
    <tablename_in_table>Y</tablename_in_table>
    <return_keys>N</return_keys>
    <return_field/>
    <fields>
        <field>
          <column_name>dim_single_keyword_id</column_name>
          <stream_name>dim_single_keyword_id</stream_name>
        </field>
        <field>
          <column_name>group_id</column_name>
          <stream_name>absolute_single_kw_group_id</stream_name>
        </field>
        <field>
          <column_name>weighting_factor</column_name>
          <stream_name>single_kw_weighting_factor</stream_name>
        </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1626</xloc>
      <yloc>315</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>bridge_group_triple_keywords</name>
    <type>TableInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <sql>SELECT
	IFNULL(MAX(group_id),0) AS base_group_triple_kw_id
FROM
	bridge_group_triple_keywords</sql>
    <limit>0</limit>
    <lookup/>
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>90</xloc>
      <yloc>620</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>bridge_group_triple_keywords 2</name>
    <type>TableOutput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <schema/>
    <table>bridge_group_triple_keywords</table>
    <commit>1000</commit>
    <truncate>N</truncate>
    <ignore_errors>N</ignore_errors>
    <use_batch>Y</use_batch>
    <specify_fields>Y</specify_fields>
    <partitioning_enabled>N</partitioning_enabled>
    <partitioning_field/>
    <partitioning_daily>N</partitioning_daily>
    <partitioning_monthly>Y</partitioning_monthly>
    <tablename_in_field>N</tablename_in_field>
    <tablename_field/>
    <tablename_in_table>Y</tablename_in_table>
    <return_keys>N</return_keys>
    <return_field/>
    <fields>
        <field>
          <column_name>dim_triple_keyword_id</column_name>
          <stream_name>dim_triple_keyword_id</stream_name>
        </field>
        <field>
          <column_name>group_id</column_name>
          <stream_name>absolute_single_kw_group_id</stream_name>
        </field>
        <field>
          <column_name>weighting_factor</column_name>
          <stream_name>triple_kw_weighting_factor</stream_name>
        </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1627</xloc>
      <yloc>782</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>bridge_group_triple_keywords 2 2</name>
    <type>TableOutput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <schema/>
    <table>bridge_group_quadruple_keywords</table>
    <commit>1000</commit>
    <truncate>N</truncate>
    <ignore_errors>N</ignore_errors>
    <use_batch>Y</use_batch>
    <specify_fields>Y</specify_fields>
    <partitioning_enabled>N</partitioning_enabled>
    <partitioning_field/>
    <partitioning_daily>N</partitioning_daily>
    <partitioning_monthly>Y</partitioning_monthly>
    <tablename_in_field>N</tablename_in_field>
    <tablename_field/>
    <tablename_in_table>Y</tablename_in_table>
    <return_keys>N</return_keys>
    <return_field/>
    <fields>
        <field>
          <column_name>dim_quadruple_keyword_id</column_name>
          <stream_name>dim_quadruple_keyword_id</stream_name>
        </field>
        <field>
          <column_name>group_id</column_name>
          <stream_name>absolute_quadruple_group_id</stream_name>
        </field>
        <field>
          <column_name>weighting_factor</column_name>
          <stream_name>quadruple_kw_weighting_factor</stream_name>
        </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1627</xloc>
      <yloc>1055</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>bridge_group_user_mentions</name>
    <type>TableInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <sql>SELECT
	IFNULL(MAX(group_id),0) AS base_group_user_mention_id
FROM
	bridge_group_user_mentions</sql>
    <limit>0</limit>
    <lookup/>
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>90</xloc>
      <yloc>784</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>bridge_group_user_mentions 2</name>
    <type>TableOutput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <schema/>
    <table>bridge_group_user_mentions</table>
    <commit>1000</commit>
    <truncate>N</truncate>
    <ignore_errors>N</ignore_errors>
    <use_batch>Y</use_batch>
    <specify_fields>Y</specify_fields>
    <partitioning_enabled>N</partitioning_enabled>
    <partitioning_field/>
    <partitioning_daily>N</partitioning_daily>
    <partitioning_monthly>Y</partitioning_monthly>
    <tablename_in_field>N</tablename_in_field>
    <tablename_field/>
    <tablename_in_table>Y</tablename_in_table>
    <return_keys>N</return_keys>
    <return_field/>
    <fields>
        <field>
          <column_name>dim_user_mention_id</column_name>
          <stream_name>dim_user_mention_id</stream_name>
        </field>
        <field>
          <column_name>group_id</column_name>
          <stream_name>absolute_user_mention_group_id</stream_name>
        </field>
        <field>
          <column_name>weighting_factor</column_name>
          <stream_name>user_mention_weighting_factor</stream_name>
        </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1627</xloc>
      <yloc>62</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>consolidated_fact_tweet_id</name>
    <type>SortRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>consolidated_fact_tweet_id</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1829</xloc>
      <yloc>874</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>derive double_kw_weighting_factor</name>
    <type>Formula</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>double_kw_weighting_factor</field_name>
<formula_string>(1&#47;[num_double_keywords])</formula_string>
<value_type>Number</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1313</xloc>
      <yloc>557</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>derive hashtag_weighting_factor</name>
    <type>Formula</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>hashtag_weighting_factor</field_name>
<formula_string>(1&#47;[num_hashtags])</formula_string>
<value_type>Number</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>980</xloc>
      <yloc>124</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>derive num_double_keywords</name>
    <type>GroupBy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <all_rows>N</all_rows>
      <ignore_aggregate>N</ignore_aggregate>
      <field_ignore/>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>grp</prefix>
      <add_linenr>N</add_linenr>
      <linenr_fieldname/>
      <give_back_row>N</give_back_row>
      <group>
        <field>
          <name>fact_tweet_id</name>
        </field>
      </group>
      <fields>
        <field>
          <aggregate>num_double_keywords</aggregate>
          <subject>output_split_1</subject>
          <type>COUNT_ALL</type>
          <valuefield/>
        </field>
        <field>
          <aggregate>double_kw_group_id</aggregate>
          <subject>absolute_double_kw_group_id</subject>
          <type>FIRST_INCL_NULL</type>
          <valuefield/>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1118</xloc>
      <yloc>557</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>derive num_hashtags</name>
    <type>GroupBy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <all_rows>N</all_rows>
      <ignore_aggregate>N</ignore_aggregate>
      <field_ignore/>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>grp</prefix>
      <add_linenr>N</add_linenr>
      <linenr_fieldname/>
      <give_back_row>N</give_back_row>
      <group>
        <field>
          <name>fact_tweet_id</name>
        </field>
      </group>
      <fields>
        <field>
          <aggregate>num_hashtags</aggregate>
          <subject>cur_rownum</subject>
          <type>COUNT_ALL</type>
          <valuefield/>
        </field>
        <field>
          <aggregate>hashtag_group_id</aggregate>
          <subject>absolute_hashtag_group_id</subject>
          <type>FIRST_INCL_NULL</type>
          <valuefield/>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>831</xloc>
      <yloc>124</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>derive num_quadruple_keywords</name>
    <type>GroupBy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <all_rows>N</all_rows>
      <ignore_aggregate>N</ignore_aggregate>
      <field_ignore/>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>grp</prefix>
      <add_linenr>N</add_linenr>
      <linenr_fieldname/>
      <give_back_row>N</give_back_row>
      <group>
        <field>
          <name>fact_tweet_id</name>
        </field>
      </group>
      <fields>
        <field>
          <aggregate>num_quadruple_keywords</aggregate>
          <subject>output_split_3</subject>
          <type>COUNT_ALL</type>
          <valuefield/>
        </field>
        <field>
          <aggregate>quadruple_kw_group_id</aggregate>
          <subject>absolute_quadruple_group_id</subject>
          <type>FIRST_INCL_NULL</type>
          <valuefield/>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1118</xloc>
      <yloc>956</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>derive num_single_keywords</name>
    <type>GroupBy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <all_rows>N</all_rows>
      <ignore_aggregate>N</ignore_aggregate>
      <field_ignore/>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>grp</prefix>
      <add_linenr>N</add_linenr>
      <linenr_fieldname/>
      <give_back_row>N</give_back_row>
      <group>
        <field>
          <name>fact_tweet_id</name>
        </field>
      </group>
      <fields>
        <field>
          <aggregate>num_single_keywords</aggregate>
          <subject>cur_rownum</subject>
          <type>COUNT_ALL</type>
          <valuefield/>
        </field>
        <field>
          <aggregate>single_kw_group_id</aggregate>
          <subject>absolute_single_kw_group_id</subject>
          <type>FIRST_INCL_NULL</type>
          <valuefield/>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>738</xloc>
      <yloc>315</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>derive num_triple_keywords</name>
    <type>GroupBy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <all_rows>N</all_rows>
      <ignore_aggregate>N</ignore_aggregate>
      <field_ignore/>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>grp</prefix>
      <add_linenr>N</add_linenr>
      <linenr_fieldname/>
      <give_back_row>N</give_back_row>
      <group>
        <field>
          <name>fact_tweet_id</name>
        </field>
      </group>
      <fields>
        <field>
          <aggregate>num_triple_keywords</aggregate>
          <subject>output_split_2</subject>
          <type>COUNT_ALL</type>
          <valuefield/>
        </field>
        <field>
          <aggregate>triple_kw_group_id</aggregate>
          <subject>absolute_triple_kw_group_id</subject>
          <type>FIRST_INCL_NULL</type>
          <valuefield/>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1118</xloc>
      <yloc>782</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>derive num_user_mentions</name>
    <type>GroupBy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <all_rows>N</all_rows>
      <ignore_aggregate>N</ignore_aggregate>
      <field_ignore/>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>grp</prefix>
      <add_linenr>N</add_linenr>
      <linenr_fieldname/>
      <give_back_row>N</give_back_row>
      <group>
        <field>
          <name>fact_tweet_id</name>
        </field>
      </group>
      <fields>
        <field>
          <aggregate>num_user_mentions</aggregate>
          <subject>cur_rownum</subject>
          <type>COUNT_ALL</type>
          <valuefield/>
        </field>
        <field>
          <aggregate>user_mention_group_id</aggregate>
          <subject>absolute_user_mention_group_id</subject>
          <type>FIRST_INCL_NULL</type>
          <valuefield/>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>741</xloc>
      <yloc>3</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>derive quadruple_kw_weighting_factor</name>
    <type>Formula</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>quadruple_kw_weighting_factor</field_name>
<formula_string>(1&#47;[num_quadruple_keywords])</formula_string>
<value_type>Number</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1313</xloc>
      <yloc>956</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>derive single_kw_weighting_factor</name>
    <type>Formula</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>single_kw_weighting_factor</field_name>
<formula_string>(1&#47;[num_single_keywords])</formula_string>
<value_type>Number</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1034</xloc>
      <yloc>315</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>derive triple_kw_weighting_factor</name>
    <type>Formula</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>triple_kw_weighting_factor</field_name>
<formula_string>(1&#47;[num_triple_keywords])</formula_string>
<value_type>Number</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1313</xloc>
      <yloc>782</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>derive user_mention_weighting_factor</name>
    <type>Formula</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>user_mention_weighting_factor</field_name>
<formula_string>(1&#47;[num_user_mentions])</formula_string>
<value_type>Number</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>933</xloc>
      <yloc>3</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>dim_double_keywords</name>
    <type>DimensionLookup</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <schema/>
      <table>dim_double_keywords</table>
      <connection>twitter_analytics</connection>
      <commit>100</commit>
      <update>Y</update>
      <fields>
        <key>
          <name>double_keyword</name>
          <lookup>double_keywords</lookup>
        </key>
        <date>
          <name/>
          <from>eff_begin_dt</from>
          <to>eff_end_dt</to>
        </date>
        <return>
          <name>ID</name>
          <rename>dim_double_keyword_id</rename>
          <creation_method>tablemax</creation_method>
          <use_autoinc>N</use_autoinc>
          <version>dim_version</version>
        </return>
      </fields>
      <sequence/>
      <min_year>1900</min_year>
      <max_year>2199</max_year>
      <cache_size>5000</cache_size>
      <preload_cache>N</preload_cache>
      <use_start_date_alternative>N</use_start_date_alternative>
      <start_date_alternative>none</start_date_alternative>
      <start_date_field_name/>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1313</xloc>
      <yloc>714</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>dim_hashtags</name>
    <type>DimensionLookup</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <schema/>
      <table>dim_hashtags</table>
      <connection>twitter_analytics</connection>
      <commit>100</commit>
      <update>Y</update>
      <fields>
        <key>
          <name>output_split</name>
          <lookup>hashtag</lookup>
        </key>
        <date>
          <name/>
          <from>eff_begin_dt</from>
          <to>eff_end_dt</to>
        </date>
        <return>
          <name>ID</name>
          <rename>dim_hashtag_id</rename>
          <creation_method>tablemax</creation_method>
          <use_autoinc>N</use_autoinc>
          <version>dim_version</version>
        </return>
      </fields>
      <sequence/>
      <min_year>1900</min_year>
      <max_year>2199</max_year>
      <cache_size>5000</cache_size>
      <preload_cache>N</preload_cache>
      <use_start_date_alternative>N</use_start_date_alternative>
      <start_date_alternative>none</start_date_alternative>
      <start_date_field_name/>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>831</xloc>
      <yloc>255</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>dim_quadruple_keywords</name>
    <type>DimensionLookup</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <schema/>
      <table>dim_quadruple_keywords</table>
      <connection>twitter_analytics</connection>
      <commit>100</commit>
      <update>Y</update>
      <fields>
        <key>
          <name>quadruple_keyword</name>
          <lookup>quadruple_keywords</lookup>
        </key>
        <date>
          <name/>
          <from>eff_begin_dt</from>
          <to>eff_end_dt</to>
        </date>
        <return>
          <name>ID</name>
          <rename>dim_quadruple_keyword_id</rename>
          <creation_method>tablemax</creation_method>
          <use_autoinc>N</use_autoinc>
          <version>dim_version</version>
        </return>
      </fields>
      <sequence/>
      <min_year>1900</min_year>
      <max_year>2199</max_year>
      <cache_size>5000</cache_size>
      <preload_cache>N</preload_cache>
      <use_start_date_alternative>N</use_start_date_alternative>
      <start_date_alternative>none</start_date_alternative>
      <start_date_field_name/>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1313</xloc>
      <yloc>1055</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>dim_single_keywords</name>
    <type>DimensionLookup</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <schema/>
      <table>dim_single_keywords</table>
      <connection>twitter_analytics</connection>
      <commit>100</commit>
      <update>Y</update>
      <fields>
        <key>
          <name>output_split</name>
          <lookup>single_keywords</lookup>
        </key>
        <date>
          <name/>
          <from>eff_begin_dt</from>
          <to>eff_end_dt</to>
        </date>
        <return>
          <name>ID</name>
          <rename>dim_single_keyword_id</rename>
          <creation_method>tablemax</creation_method>
          <use_autoinc>N</use_autoinc>
          <version>dim_version</version>
        </return>
      </fields>
      <sequence/>
      <min_year>1900</min_year>
      <max_year>2199</max_year>
      <cache_size>5000</cache_size>
      <preload_cache>N</preload_cache>
      <use_start_date_alternative>N</use_start_date_alternative>
      <start_date_alternative>none</start_date_alternative>
      <start_date_field_name/>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>831</xloc>
      <yloc>447</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>dim_triple_keywords</name>
    <type>DimensionLookup</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <schema/>
      <table>dim_triple_keywords</table>
      <connection>twitter_analytics</connection>
      <commit>100</commit>
      <update>Y</update>
      <fields>
        <key>
          <name>triple_keyword</name>
          <lookup>triple_keywords</lookup>
        </key>
        <date>
          <name/>
          <from>eff_begin_dt</from>
          <to>eff_end_dt</to>
        </date>
        <return>
          <name>ID</name>
          <rename>dim_triple_keyword_id</rename>
          <creation_method>tablemax</creation_method>
          <use_autoinc>N</use_autoinc>
          <version>dim_version</version>
        </return>
      </fields>
      <sequence/>
      <min_year>1900</min_year>
      <max_year>2199</max_year>
      <cache_size>5000</cache_size>
      <preload_cache>N</preload_cache>
      <use_start_date_alternative>N</use_start_date_alternative>
      <start_date_alternative>none</start_date_alternative>
      <start_date_field_name/>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1313</xloc>
      <yloc>861</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>dim_user_mentions</name>
    <type>DimensionLookup</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <schema/>
      <table>dim_user_mentions</table>
      <connection>twitter_analytics</connection>
      <commit>100</commit>
      <update>Y</update>
      <fields>
        <key>
          <name>output_split</name>
          <lookup>user_mention</lookup>
        </key>
        <date>
          <name/>
          <from>eff_begin_dt</from>
          <to>eff_end_dt</to>
        </date>
        <return>
          <name>ID</name>
          <rename>dim_user_mention_id</rename>
          <creation_method>tablemax</creation_method>
          <use_autoinc>N</use_autoinc>
          <version>dim_version</version>
        </return>
      </fields>
      <sequence/>
      <min_year>1900</min_year>
      <max_year>2199</max_year>
      <cache_size>5000</cache_size>
      <preload_cache>N</preload_cache>
      <use_start_date_alternative>N</use_start_date_alternative>
      <start_date_alternative>none</start_date_alternative>
      <start_date_field_name/>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>831</xloc>
      <yloc>63</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>discarded tokens</name>
    <type>Dummy</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>608</xloc>
      <yloc>188</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>match hashtags</name>
    <type>RegexEval</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <script><![CDATA[#.+]]></script>    <matcher>output_split</matcher>
    <resultfieldname>is_hashtag</resultfieldname>
    <usevar>N</usevar>
    <allowcapturegroups>N</allowcapturegroups>
    <canoneq>N</canoneq>
    <caseinsensitive>N</caseinsensitive>
    <comment>N</comment>
    <dotall>N</dotall>
    <multiline>N</multiline>
    <unicode>N</unicode>
    <unix>N</unix>
    <fields>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>357</xloc>
      <yloc>198</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>staging_fact_tweets</name>
    <type>Update</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <skip_lookup>N</skip_lookup>
    <commit>100</commit>
    <error_ignored>N</error_ignored>
    <ignore_flag_field/>
    <lookup>
      <schema/>
      <table>staging_fact_tweets</table>
      <key>
        <name>consolidated_fact_tweet_id</name>
        <field>ID</field>
        <condition>=</condition>
        <name2/>
        </key>
      <value>
        <name>num_keywords</name>
        <rename>c_num_single_keywords</rename>
        </value>
      <value>
        <name>num_user_mentions</name>
        <rename>c_num_user_mentions</rename>
        </value>
      <value>
        <name>num_hashtags</name>
        <rename>c_num_hashtags</rename>
        </value>
      <value>
        <name>bridge_group_single_keyword_id</name>
        <rename>c_double_kw_group_id</rename>
        </value>
      <value>
        <name>bridge_group_double_keyword_id</name>
        <rename>c_double_kw_group_id</rename>
        </value>
      <value>
        <name>bridge_group_triple_keyword_id</name>
        <rename>c_triple_kw_group_id</rename>
        </value>
      <value>
        <name>bridge_group_quadruple_keyword_id</name>
        <rename>c_quadruple_kw_group_id</rename>
        </value>
      <value>
        <name>bridge_group_user_mention_id</name>
        <rename>c_user_mention_group_id</rename>
        </value>
      <value>
        <name>bridge_group_hashtag_id</name>
        <rename>c_hashtag_group_id</rename>
        </value>
      </lookup>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1829</xloc>
      <yloc>1050</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>staging_fact_tweets, dim_tweets</name>
    <type>TableInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <sql>SELECT
	sft.ID AS fact_tweet_id,
	dt.tweet_status
FROM
	staging_fact_tweets AS sft INNER JOIN
	dim_tweets AS dt ON sft.dim_tweet_id = dt.ID
WHERE
	sft.num_keywords IS NULL</sql>
    <limit>0</limit>
    <lookup/>
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>90</xloc>
      <yloc>374</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>user_mentions hashtags</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>FULL OUTER</join_type>
<step1>derive num_user_mentions</step1>
<step2>derive num_hashtags</step2>
    <keys_1>
      <key>fact_tweet_id</key>
    </keys_1>
    <keys_2>
      <key>fact_tweet_id</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1829</xloc>
      <yloc>258</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>user_mentions hashtags single</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>FULL OUTER</join_type>
<step1>user_mentions hashtags</step1>
<step2>derive num_single_keywords</step2>
    <keys_1>
      <key>fact_tweet_id</key>
    </keys_1>
    <keys_2>
      <key>fact_tweet_id</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1829</xloc>
      <yloc>346</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>user_mentions hashtags single double</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>FULL OUTER</join_type>
<step1>user_mentions hashtags single</step1>
<step2>derive num_double_keywords</step2>
    <keys_1>
      <key>fact_tweet_id</key>
    </keys_1>
    <keys_2>
      <key>fact_tweet_id</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1829</xloc>
      <yloc>434</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>user_mentions hashtags single double triple</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>FULL OUTER</join_type>
<step1>user_mentions hashtags single double</step1>
<step2>derive num_triple_keywords</step2>
    <keys_1>
      <key>fact_tweet_id</key>
    </keys_1>
    <keys_2>
      <key>fact_tweet_id</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1829</xloc>
      <yloc>522</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>user_mentions hashtags single double triple quadruple</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>FULL OUTER</join_type>
<step1>user_mentions hashtags single double triple</step1>
<step2>derive num_quadruple_keywords</step2>
    <keys_1>
      <key>fact_tweet_id</key>
    </keys_1>
    <keys_2>
      <key>fact_tweet_id</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1829</xloc>
      <yloc>610</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step_error_handling>
  </step_error_handling>
   <slave-step-copy-partition-distribution>
</slave-step-copy-partition-distribution>
   <slave_transformation>N</slave_transformation>
</transformation>

<transformation>
  <info>
    <name>Extract URLs from Tweets</name>
    <description/>
    <extended_description/>
    <trans_version/>
    <trans_type>Normal</trans_type>
    <trans_status>0</trans_status>
    <directory>&#47;twitter_analytics</directory>
    <parameters>
    </parameters>
    <log>
<trans-log-table><connection/>
<schema/>
<table/>
<size_limit_lines/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STATUS</id><enabled>Y</enabled><name>STATUS</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name><subject/></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name><subject/></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name><subject/></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name><subject/></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name><subject/></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name><subject/></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>STARTDATE</id><enabled>Y</enabled><name>STARTDATE</name></field><field><id>ENDDATE</id><enabled>Y</enabled><name>ENDDATE</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>DEPDATE</id><enabled>Y</enabled><name>DEPDATE</name></field><field><id>REPLAYDATE</id><enabled>Y</enabled><name>REPLAYDATE</name></field><field><id>LOG_FIELD</id><enabled>Y</enabled><name>LOG_FIELD</name></field></trans-log-table>
<perf-log-table><connection/>
<schema/>
<table/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>SEQ_NR</id><enabled>Y</enabled><name>SEQ_NR</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>INPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>INPUT_BUFFER_ROWS</name></field><field><id>OUTPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>OUTPUT_BUFFER_ROWS</name></field></perf-log-table>
<channel-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>LOGGING_OBJECT_TYPE</id><enabled>Y</enabled><name>LOGGING_OBJECT_TYPE</name></field><field><id>OBJECT_NAME</id><enabled>Y</enabled><name>OBJECT_NAME</name></field><field><id>OBJECT_COPY</id><enabled>Y</enabled><name>OBJECT_COPY</name></field><field><id>REPOSITORY_DIRECTORY</id><enabled>Y</enabled><name>REPOSITORY_DIRECTORY</name></field><field><id>FILENAME</id><enabled>Y</enabled><name>FILENAME</name></field><field><id>OBJECT_ID</id><enabled>Y</enabled><name>OBJECT_ID</name></field><field><id>OBJECT_REVISION</id><enabled>Y</enabled><name>OBJECT_REVISION</name></field><field><id>PARENT_CHANNEL_ID</id><enabled>Y</enabled><name>PARENT_CHANNEL_ID</name></field><field><id>ROOT_CHANNEL_ID</id><enabled>Y</enabled><name>ROOT_CHANNEL_ID</name></field></channel-log-table>
<step-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></step-log-table>
    </log>
    <maxdate>
      <connection/>
      <table/>
      <field/>
      <offset>0.0</offset>
      <maxdiff>0.0</maxdiff>
    </maxdate>
    <size_rowset>10000</size_rowset>
    <sleep_time_empty>50</sleep_time_empty>
    <sleep_time_full>50</sleep_time_full>
    <unique_connections>N</unique_connections>
    <feedback_shown>Y</feedback_shown>
    <feedback_size>50000</feedback_size>
    <using_thread_priorities>Y</using_thread_priorities>
    <shared_objects_file/>
    <capture_step_performance>N</capture_step_performance>
    <step_performance_capturing_delay>1000</step_performance_capturing_delay>
    <step_performance_capturing_size_limit>100</step_performance_capturing_size_limit>
    <dependencies>
    </dependencies>
    <partitionschemas>
    </partitionschemas>
    <slaveservers>
    </slaveservers>
    <clusterschemas>
    </clusterschemas>
  <modified_user>admin</modified_user>
  <modified_date>2011&#47;09&#47;03 11:20:33.000</modified_date>
  </info>
  <notepads>
  </notepads>
  <connection>
    <name>twitter_analytics</name>
    <server>localhost</server>
    <type>MYSQL</type>
    <access>Native</access>
    <database>topgun_twitter_analytics</database>
    <port>3306</port>
    <username>topgun</username>
    <password>Encrypted 2be98afc86aa7f2e4cb1ba265db95bac3</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>EXTRA_OPTION_MYSQL.defaultFetchSize</code><attribute>500</attribute></attribute>
      <attribute><code>EXTRA_OPTION_MYSQL.useCursorFetch</code><attribute>true</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>3306</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>STREAM_RESULTS</code><attribute>Y</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>N</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>N</attribute></attribute>
    </attributes>
  </connection>
  <order>
  <hop> <from>bitly_dev_key</from><to>Merge columns</to><enabled>Y</enabled> </hop>  <hop> <from>bitly_login</from><to>Merge columns</to><enabled>Y</enabled> </hop>  <hop> <from>bridge_group_referred_urls</from><to>Merge columns</to><enabled>Y</enabled> </hop>  <hop> <from>staging_fact_tweets, dim_tweets</from><to>Merge columns</to><enabled>Y</enabled> </hop>  <hop> <from>Merge columns</from><to>Add relative group_id</to><enabled>Y</enabled> </hop>  <hop> <from>Add relative group_id</from><to>Calculate absolute_group_id</to><enabled>Y</enabled> </hop>  <hop> <from>Calculate absolute_group_id</from><to>Extract URLs</to><enabled>Y</enabled> </hop>  <hop> <from>Bit.ly URL found?</from><to>bit.ly</to><enabled>Y</enabled> </hop>  <hop> <from>bit.ly</from><to>Extract output from XML</to><enabled>Y</enabled> </hop>  <hop> <from>Bit.ly URL found?</from><to>add bit.ly placeholder fields</to><enabled>Y</enabled> </hop>  <hop> <from>Extract output from XML</from><to>Drop extraneous bit.ly fields</to><enabled>Y</enabled> </hop>  <hop> <from>Drop extraneous bit.ly fields</from><to>sort absolute_group_id</to><enabled>Y</enabled> </hop>  <hop> <from>sort absolute_group_id</from><to>absolute_group_id</to><enabled>Y</enabled> </hop>  <hop> <from>longurl.org</from><to>Extract long URL data</to><enabled>Y</enabled> </hop>  <hop> <from>Extract long URL data</from><to>Extract domain name</to><enabled>Y</enabled> </hop>  <hop> <from>Extract domain name</from><to>Strings cut</to><enabled>Y</enabled> </hop>  <hop> <from>dim_referred_urls</from><to>bridge_group_referred_urls 2</to><enabled>Y</enabled> </hop>  <hop> <from>absolute_group_id</from><to>one</to><enabled>Y</enabled> </hop>  <hop> <from>one</from><to>Determine weighting factor</to><enabled>Y</enabled> </hop>  <hop> <from>Determine weighting factor</from><to>Merge Join</to><enabled>Y</enabled> </hop>  <hop> <from>Strings cut</from><to>Merge Join</to><enabled>Y</enabled> </hop>  <hop> <from>Merge Join</from><to>Drop extraneous URL fields</to><enabled>Y</enabled> </hop>  <hop> <from>Drop extraneous URL fields</from><to>dim_referred_urls</to><enabled>Y</enabled> </hop>  <hop> <from>add bit.ly placeholder fields</from><to>sort absolute_group_id</to><enabled>Y</enabled> </hop>  <hop> <from>absolute_group_id</from><to>Set counts to zero when NULL</to><enabled>Y</enabled> </hop>  <hop> <from>Extract URLs</from><to>Bit.ly URL found?</to><enabled>Y</enabled> </hop>  <hop> <from>sort absolute_group_id</from><to>URL found?</to><enabled>Y</enabled> </hop>  <hop> <from>URL found?</from><to>longurl.org</to><enabled>Y</enabled> </hop>  <hop> <from>URL found?</from><to>NO URL</to><enabled>Y</enabled> </hop>  <hop> <from>Set counts to zero when NULL</from><to>Replace bridge_id when no URL</to><enabled>Y</enabled> </hop>  <hop> <from>Replace bridge_id when no URL</from><to>Null if...</to><enabled>Y</enabled> </hop>  <hop> <from>Null if...</from><to>staging_fact_tweets</to><enabled>Y</enabled> </hop>  </order>
  <step>
    <name>Add relative group_id</name>
    <type>Sequence</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <valuename>relative_group_id</valuename>
      <use_database>N</use_database>
      <connection/>
      <schema/>
      <seqname>SEQ_</seqname>
      <use_counter>Y</use_counter>
      <counter_name>group_seq</counter_name>
      <start_at>1</start_at>
      <increment_by>1</increment_by>
      <max_value>999999999</max_value>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>310</xloc>
      <yloc>647</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Bit.ly URL found?</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to>bit.ly</send_true_to>
<send_false_to>add bit.ly placeholder fields</send_false_to>
    <compare>
<condition>
 <negated>N</negated>
 <leftvalue>is_bitly_url</leftvalue>
 <function>=</function>
 <rightvalue/>
 <value><name>constant</name><type>Number</type><text>1.0</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask>#.#</mask></value> </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>304</xloc>
      <yloc>367</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Calculate absolute_group_id</name>
    <type>Calculator</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <calculation><field_name>absolute_group_id</field_name>
<calc_type>ADD</calc_type>
<field_a>base_group_id</field_a>
<field_b>relative_group_id</field_b>
<field_c/>
<value_type>Integer</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<remove>N</remove>
<conversion_mask>0</conversion_mask>
<decimal_symbol>.</decimal_symbol>
<grouping_symbol>,</grouping_symbol>
<currency_symbol/>
</calculation>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>310</xloc>
      <yloc>556</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Determine weighting factor</name>
    <type>Calculator</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <calculation><field_name>weighting_factor</field_name>
<calc_type>DIVIDE</calc_type>
<field_a>one</field_a>
<field_b>num_urls_found</field_b>
<field_c/>
<value_type>Number</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<remove>N</remove>
<conversion_mask>0.0</conversion_mask>
<decimal_symbol>.</decimal_symbol>
<grouping_symbol>,</grouping_symbol>
<currency_symbol/>
</calculation>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>694</xloc>
      <yloc>208</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Drop extraneous URL fields</name>
    <type>SelectValues</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>absolute_group_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>domain_URL</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>extracted_URL</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>long_url</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>meta_description</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>title</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>weighting_factor</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1160</xloc>
      <yloc>154</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Drop extraneous bit.ly fields</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>apikey</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>format</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>login</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>base_group_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>fact_tweet_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>tweet_status</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>relative_group_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>absolute_group_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>extracted_URL</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>is_url</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>is_bitly_url</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>hash</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>user_clicks</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>global_clicks</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>304</xloc>
      <yloc>208</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Extract URLs</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <compatible>N</compatible>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>&#47;&#47;Script here
&#47;&#47;NB: This script was originally written with a single bit.ly URL in mind.
&#47;&#47;TODO: Change script to be data driven and handle unlimited shortened bitly URLs

var URL_array;
var i;
var newRow;
var is_first_row=true;
var matches_found=false;


var URL_regExp = &#47;https?:\&#47;\&#47;([-\w\.]+)+(:\d+)?(\&#47;([\w\&#47;_\.]*(\?\S+)?)?)?&#47;g;
var bitly_URL_regExp = &#47;http:\&#47;\&#47;bit\.ly\&#47;[a-zA-Z0-9]+[\&#47;]?&#47;g;
var jmp_URL_regExp = &#47;http:\&#47;\&#47;j\.mp\&#47;[a-zA-Z0-9]+[\&#47;]?&#47;g;
var bitly_hash_regExp = &#47;[a-zA-Z0-9]+&#47;g;




function ExtractBitlyHash(sURL)
{
	var sHashSuffix;
	var sHash;

	sHashSuffix = sURL.substr(14);

	sHash = bitly_hash_regExp.exec(sHashSuffix);

	return sHash;
}

function ExtractJmpHash(sURL)
{
	var sHashSuffix;
	var sHash;

	sHashSuffix = sURL.substr(12);

	sHash = bitly_hash_regExp.exec(sHashSuffix);

	return sHash;
}




matches_found = URL_regExp.test(tweet_status);



URL_array = tweet_status.match(URL_regExp);

	
if (matches_found) {


	for (i=0;i&lt;URL_array.length;i++) {
		is_bitly_url = 0;
		
		if (is_first_row) {
			is_url = 1;

			extracted_URL = URL_array[i];

			if (bitly_URL_regExp.test(URL_array[i])) {
				is_bitly_url = 1;
				hash = ExtractBitlyHash(URL_array[i]);
			} else if (jmp_URL_regExp.test(URL_array[i])) {
			 	is_bitly_url = 1;
				hash = ExtractJmpHash(URL_array[i]);
			} else {
				is_bitly_url = 0;
				hash = &quot;&quot;;
			}

			is_first_row = false;
		} else {
			newRow = createRowCopy(getOutputRowMeta().size());
			
			newRow[8] = URL_array[i];
			newRow[9] = 1;

			if (bitly_URL_regExp.test(URL_array[i])  ) {
				newRow[10] = 1;
				newRow[11] = ExtractBitlyHash(URL_array[i]);
			} else if (jmp_URL_regExp.test(URL_array[i])) {
				newRow[10] = 1;
				newRow[11] = ExtractJmpHash(URL_array[i]);				
			} else {
				newRow[10] = 0;
				newRow[11] = &quot;&quot;;

			}

			putRow(newRow);

		}
	}
} else {
	extracted_URL = &quot;nourl&quot;;
	is_url = 0;
	is_bitly_url = 0;
	hash = &quot;&quot;;
}</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>extracted_URL</name>
        <rename>extracted_URL</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>is_url</name>
        <rename>is_url</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>is_bitly_url</name>
        <rename>is_bitly_url</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>hash</name>
        <rename>hash</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>310</xloc>
      <yloc>462</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Extract domain name</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <compatible>N</compatible>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>&#47;&#47;Script here
var URL_array
var domain_URL_regExp;
var matches_found=false;

var domain_URL_regExp = &#47;([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}&#47;g;

matches_found = domain_URL_regExp.test(long_url);
URL_array = long_url.match(domain_URL_regExp);

if (matches_found) {
	domain_URL = URL_array[0];
}

</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>domain_URL</name>
        <rename>domain_URL</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>824</xloc>
      <yloc>100</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Extract long URL data</name>
    <type>getXMLData</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <include>N</include>
    <include_field/>
    <rownum>N</rownum>
    <addresultfile>N</addresultfile>
    <namespaceaware>N</namespaceaware>
    <ignorecomments>N</ignorecomments>
    <readurl>N</readurl>
    <validating>N</validating>
    <usetoken>N</usetoken>
    <IsIgnoreEmptyFile>N</IsIgnoreEmptyFile>
    <doNotFailIfNoFile>Y</doNotFailIfNoFile>
    <rownum_field/>
    <encoding>UTF-8</encoding>
    <file>
      <name/>
      <filemask/>
      <file_required>N</file_required>
      <include_subfolders>N</include_subfolders>
    </file>
    <fields>
      <field>
        <name>long_url</name>
        <xpath>long-url</xpath>
        <element_type>node</element_type>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>title</name>
        <xpath>title</xpath>
        <element_type>node</element_type>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>meta_description</name>
        <xpath>meta-description</xpath>
        <element_type>node</element_type>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
    </fields>
    <limit>0</limit>
    <loopxpath>&#47;response</loopxpath>
    <IsInFields>Y</IsInFields>
    <IsAFile>N</IsAFile>
    <XmlField>longurl_response</XmlField>
    <prunePath/>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>694</xloc>
      <yloc>100</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Extract output from XML</name>
    <type>getXMLData</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <include>N</include>
    <include_field/>
    <rownum>N</rownum>
    <addresultfile>N</addresultfile>
    <namespaceaware>N</namespaceaware>
    <ignorecomments>N</ignorecomments>
    <readurl>N</readurl>
    <validating>N</validating>
    <usetoken>N</usetoken>
    <IsIgnoreEmptyFile>N</IsIgnoreEmptyFile>
    <doNotFailIfNoFile>Y</doNotFailIfNoFile>
    <rownum_field/>
    <encoding>UTF-8</encoding>
    <file>
      <name/>
      <filemask/>
      <file_required>N</file_required>
      <include_subfolders>N</include_subfolders>
    </file>
    <fields>
      <field>
        <name>user_clicks</name>
        <xpath>clicks&#47;user_clicks</xpath>
        <element_type>node</element_type>
        <type>Integer</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>global_hash</name>
        <xpath>clicks&#47;global_hash</xpath>
        <element_type>node</element_type>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>hash</name>
        <xpath>clicks&#47;hash</xpath>
        <element_type>node</element_type>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>user_hash</name>
        <xpath>clicks&#47;user_hash</xpath>
        <element_type>node</element_type>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>global_clicks</name>
        <xpath>clicks&#47;global_clicks</xpath>
        <element_type>node</element_type>
        <type>Integer</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
    </fields>
    <limit>0</limit>
    <loopxpath>&#47;response&#47;data</loopxpath>
    <IsInFields>Y</IsInFields>
    <IsAFile>N</IsAFile>
    <XmlField>bitly_result</XmlField>
    <prunePath/>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>364</xloc>
      <yloc>260</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Merge Join</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>INNER</join_type>
<step1>Strings cut</step1>
<step2>Determine weighting factor</step2>
    <keys_1>
      <key>absolute_group_id</key>
    </keys_1>
    <keys_2>
      <key>absolute_group_id</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1040</xloc>
      <yloc>154</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Merge columns</name>
    <type>JoinRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <cache_size>500</cache_size>
      <main/>
    <compare>
<condition>
 <negated>N</negated>
 <leftvalue/>
 <function>=</function>
 <rightvalue/>
 </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>310</xloc>
      <yloc>738</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>NO URL</name>
    <type>Dummy</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>448</xloc>
      <yloc>13</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Null if...</name>
    <type>NullIf</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <name>bridge_group_referred_url_id</name>
        <value>0</value>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>988</xloc>
      <yloc>298</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Replace bridge_id when no URL</name>
    <type>Formula</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>bridge_group_referred_url_id</field_name>
<formula_string>if([num_urls_found] = 0;0; [absolute_group_id])</formula_string>
<value_type>Number</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>776</xloc>
      <yloc>298</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Set counts to zero when NULL</name>
    <type>IfNull</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <replaceAllByValue/>
      <replaceAllMask/>
      <selectFields>Y</selectFields>
      <selectValuesType>N</selectValuesType>
    <valuetypes>
      </valuetypes>
    <fields>
      <field>
        <name>num_urls_found</name>
        <value>0</value>
        <mask/>
        </field>
      <field>
        <name>bitly_url_count</name>
        <value>0</value>
        <mask/>
        </field>
      <field>
        <name>user_click_count</name>
        <value>0</value>
        <mask/>
        </field>
      <field>
        <name>global_click_count</name>
        <value>0</value>
        <mask/>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>564</xloc>
      <yloc>298</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Strings cut</name>
    <type>StringCut</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <in_stream_name>extracted_URL</in_stream_name>
        <out_stream_name/>
        <cut_from>0</cut_from>
        <cut_to>254</cut_to>
      </field>
      <field>
        <in_stream_name>long_url</in_stream_name>
        <out_stream_name/>
        <cut_from>0</cut_from>
        <cut_to>1022</cut_to>
      </field>
      <field>
        <in_stream_name>title</in_stream_name>
        <out_stream_name/>
        <cut_from>0</cut_from>
        <cut_to>1022</cut_to>
      </field>
      <field>
        <in_stream_name>meta_description</in_stream_name>
        <out_stream_name/>
        <cut_from>0</cut_from>
        <cut_to>1022</cut_to>
      </field>
      <field>
        <in_stream_name>domain_URL</in_stream_name>
        <out_stream_name/>
        <cut_from>0</cut_from>
        <cut_to>254</cut_to>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>954</xloc>
      <yloc>100</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>URL found?</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to>longurl.org</send_true_to>
<send_false_to>NO URL</send_false_to>
    <compare>
<condition>
 <negated>N</negated>
 <leftvalue>is_url</leftvalue>
 <function>=</function>
 <rightvalue/>
 <value><name>constant</name><type>Number</type><text>1.0</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask>#.#</mask></value> </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>448</xloc>
      <yloc>100</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>absolute_group_id</name>
    <type>GroupBy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <all_rows>N</all_rows>
      <ignore_aggregate>N</ignore_aggregate>
      <field_ignore/>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>grp</prefix>
      <add_linenr>N</add_linenr>
      <linenr_fieldname/>
      <give_back_row>N</give_back_row>
      <group>
        <field>
          <name>absolute_group_id</name>
        </field>
      </group>
      <fields>
        <field>
          <aggregate>fact_tweet_id</aggregate>
          <subject>fact_tweet_id</subject>
          <type>MAX</type>
          <valuefield/>
        </field>
        <field>
          <aggregate>num_urls_found</aggregate>
          <subject>is_url</subject>
          <type>SUM</type>
          <valuefield/>
        </field>
        <field>
          <aggregate>bitly_url_count</aggregate>
          <subject>is_bitly_url</subject>
          <type>SUM</type>
          <valuefield/>
        </field>
        <field>
          <aggregate>user_click_count</aggregate>
          <subject>user_clicks</subject>
          <type>SUM</type>
          <valuefield/>
        </field>
        <field>
          <aggregate>global_click_count</aggregate>
          <subject>global_clicks</subject>
          <type>SUM</type>
          <valuefield/>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>434</xloc>
      <yloc>208</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>add bit.ly placeholder fields</name>
    <type>Constant</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <name>user_clicks</name>
        <type>Integer</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif>0</nullif>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>global_clicks</name>
        <type>Integer</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif>0</nullif>
        <length>-1</length>
        <precision>-1</precision>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>190</xloc>
      <yloc>313</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>bit.ly</name>
    <type>HTTP</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <url>http:&#47;&#47;api.bit.ly&#47;v3&#47;clicks</url>
    <urlInField>N</urlInField>
    <urlField>test_url</urlField>
    <encoding/>
    <httpLogin/>
    <httpPassword/>
    <proxyHost/>
    <proxyPort/>
    <lookup>
      <arg>
        <name>hash</name>
        <parameter>hash</parameter>
      </arg>
      <arg>
        <name>login</name>
        <parameter>login</parameter>
      </arg>
      <arg>
        <name>apikey</name>
        <parameter>apiKey</parameter>
      </arg>
      <arg>
        <name>format</name>
        <parameter>format</parameter>
      </arg>
    </lookup>
    <result>
      <name>bitly_result</name>
      <code/>
    </result>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>418</xloc>
      <yloc>313</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>bitly_dev_key</name>
    <type>TableInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <sql>SELECT
	attribute_value AS apikey,
	&apos;xml&apos; AS format
FROM
	settings
WHERE
	attribute_id = &apos;BITLY_DEVKEY&apos;</sql>
    <limit>0</limit>
    <lookup/>
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>52</xloc>
      <yloc>833</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>bitly_login</name>
    <type>TableInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <sql>SELECT
	attribute_value AS login
FROM
	settings
WHERE
	attribute_id = &apos;BITLY_LOGIN&apos;</sql>
    <limit>0</limit>
    <lookup/>
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>210</xloc>
      <yloc>833</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>bridge_group_referred_urls</name>
    <type>TableInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <sql>SELECT
	IFNULL(MAX(group_id),0) AS base_group_id
FROM
	bridge_group_referred_urls</sql>
    <limit>0</limit>
    <lookup/>
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>368</xloc>
      <yloc>829</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>bridge_group_referred_urls 2</name>
    <type>TableOutput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <schema/>
    <table>bridge_group_referred_urls</table>
    <commit>1</commit>
    <truncate>N</truncate>
    <ignore_errors>N</ignore_errors>
    <use_batch>Y</use_batch>
    <specify_fields>Y</specify_fields>
    <partitioning_enabled>N</partitioning_enabled>
    <partitioning_field/>
    <partitioning_daily>N</partitioning_daily>
    <partitioning_monthly>Y</partitioning_monthly>
    <tablename_in_field>N</tablename_in_field>
    <tablename_field/>
    <tablename_in_table>Y</tablename_in_table>
    <return_keys>N</return_keys>
    <return_field/>
    <fields>
        <field>
          <column_name>weighting_factor</column_name>
          <stream_name>weighting_factor</stream_name>
        </field>
        <field>
          <column_name>group_id</column_name>
          <stream_name>absolute_group_id</stream_name>
        </field>
        <field>
          <column_name>dim_referred_url_id</column_name>
          <stream_name>dim_referred_URL_ID</stream_name>
        </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1409</xloc>
      <yloc>154</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>dim_referred_urls</name>
    <type>DimensionLookup</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <schema/>
      <table>dim_referred_urls</table>
      <connection>twitter_analytics</connection>
      <commit>1</commit>
      <update>Y</update>
      <fields>
        <key>
          <name>extracted_URL</name>
          <lookup>short_URL</lookup>
        </key>
        <date>
          <name/>
          <from>eff_begin_dt</from>
          <to>eff_end_dt</to>
        </date>
        <field>
          <name>long_url</name>
          <lookup>long_url</lookup>
          <update>Insert</update>
        </field>
        <field>
          <name>title</name>
          <lookup>page_title</lookup>
          <update>Insert</update>
        </field>
        <field>
          <name>meta_description</name>
          <lookup>meta_description</lookup>
          <update>Insert</update>
        </field>
        <field>
          <name>domain_URL</name>
          <lookup>domain_URL</lookup>
          <update>Insert</update>
        </field>
        <return>
          <name>ID</name>
          <rename>dim_referred_URL_ID</rename>
          <creation_method>autoinc</creation_method>
          <use_autoinc>Y</use_autoinc>
          <version>dim_version</version>
        </return>
      </fields>
      <sequence/>
      <min_year>1900</min_year>
      <max_year>2199</max_year>
      <cache_size>-1</cache_size>
      <preload_cache>N</preload_cache>
      <use_start_date_alternative>N</use_start_date_alternative>
      <start_date_alternative>none</start_date_alternative>
      <start_date_field_name/>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1286</xloc>
      <yloc>154</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>longurl.org</name>
    <type>HTTP</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <url>http:&#47;&#47;api.longurl.org&#47;v2&#47;expand</url>
    <urlInField>N</urlInField>
    <urlField/>
    <encoding/>
    <httpLogin/>
    <httpPassword/>
    <proxyHost/>
    <proxyPort/>
    <lookup>
      <arg>
        <name>extracted_URL</name>
        <parameter>url</parameter>
      </arg>
    </lookup>
    <result>
      <name>longurl_response</name>
      <code/>
    </result>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>564</xloc>
      <yloc>100</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>one</name>
    <type>Constant</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <name>one</name>
        <type>Number</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif>1</nullif>
        <length>-1</length>
        <precision>-1</precision>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>564</xloc>
      <yloc>208</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>sort absolute_group_id</name>
    <type>SortedMerge</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <name>absolute_group_id</name>
        <ascending>Y</ascending>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>304</xloc>
      <yloc>100</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>staging_fact_tweets</name>
    <type>Update</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <skip_lookup>N</skip_lookup>
    <commit>1</commit>
    <error_ignored>N</error_ignored>
    <ignore_flag_field/>
    <lookup>
      <schema/>
      <table>staging_fact_tweets</table>
      <key>
        <name>fact_tweet_id</name>
        <field>ID</field>
        <condition>=</condition>
        <name2/>
        </key>
      <value>
        <name>bridge_group_referred_url_id</name>
        <rename>bridge_group_referred_url_id</rename>
        </value>
      <value>
        <name>num_embedded_URLs</name>
        <rename>num_urls_found</rename>
        </value>
      <value>
        <name>num_bitly_URLs</name>
        <rename>bitly_url_count</rename>
        </value>
      <value>
        <name>num_bitly_user_clicks</name>
        <rename>user_click_count</rename>
        </value>
      <value>
        <name>num_bitly_global_clicks</name>
        <rename>global_click_count</rename>
        </value>
      </lookup>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1200</xloc>
      <yloc>298</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>staging_fact_tweets, dim_tweets</name>
    <type>TableInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <sql>SELECT
	sft.ID AS fact_tweet_id,
	dt.tweet_status
FROM
	staging_fact_tweets AS sft INNER JOIN
	dim_tweets AS dt ON sft.dim_tweet_id = dt.ID
WHERE
	sft.num_embedded_urls IS NULL
ORDER BY
	sft.ID ASC
</sql>
    <limit>0</limit>
    <lookup/>
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>526</xloc>
      <yloc>833</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step_error_handling>
  </step_error_handling>
   <slave-step-copy-partition-distribution>
</slave-step-copy-partition-distribution>
   <slave_transformation>N</slave_transformation>
</transformation>

<transformation>
  <info>
    <name>Fetch keywords</name>
    <description/>
    <extended_description/>
    <trans_version/>
    <trans_type>Normal</trans_type>
    <trans_status>0</trans_status>
    <directory>&#47;twitter_analytics</directory>
    <parameters>
    </parameters>
    <log>
<trans-log-table><connection/>
<schema/>
<table/>
<size_limit_lines/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STATUS</id><enabled>Y</enabled><name>STATUS</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name><subject/></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name><subject/></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name><subject/></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name><subject/></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name><subject/></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name><subject/></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>STARTDATE</id><enabled>Y</enabled><name>STARTDATE</name></field><field><id>ENDDATE</id><enabled>Y</enabled><name>ENDDATE</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>DEPDATE</id><enabled>Y</enabled><name>DEPDATE</name></field><field><id>REPLAYDATE</id><enabled>Y</enabled><name>REPLAYDATE</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></trans-log-table>
<perf-log-table><connection/>
<schema/>
<table/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>SEQ_NR</id><enabled>Y</enabled><name>SEQ_NR</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>INPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>INPUT_BUFFER_ROWS</name></field><field><id>OUTPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>OUTPUT_BUFFER_ROWS</name></field></perf-log-table>
<channel-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>LOGGING_OBJECT_TYPE</id><enabled>Y</enabled><name>LOGGING_OBJECT_TYPE</name></field><field><id>OBJECT_NAME</id><enabled>Y</enabled><name>OBJECT_NAME</name></field><field><id>OBJECT_COPY</id><enabled>Y</enabled><name>OBJECT_COPY</name></field><field><id>REPOSITORY_DIRECTORY</id><enabled>Y</enabled><name>REPOSITORY_DIRECTORY</name></field><field><id>FILENAME</id><enabled>Y</enabled><name>FILENAME</name></field><field><id>OBJECT_ID</id><enabled>Y</enabled><name>OBJECT_ID</name></field><field><id>OBJECT_REVISION</id><enabled>Y</enabled><name>OBJECT_REVISION</name></field><field><id>PARENT_CHANNEL_ID</id><enabled>Y</enabled><name>PARENT_CHANNEL_ID</name></field><field><id>ROOT_CHANNEL_ID</id><enabled>Y</enabled><name>ROOT_CHANNEL_ID</name></field></channel-log-table>
<step-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></step-log-table>
    </log>
    <maxdate>
      <connection/>
      <table/>
      <field/>
      <offset>0.0</offset>
      <maxdiff>0.0</maxdiff>
    </maxdate>
    <size_rowset>10000</size_rowset>
    <sleep_time_empty>50</sleep_time_empty>
    <sleep_time_full>50</sleep_time_full>
    <unique_connections>N</unique_connections>
    <feedback_shown>Y</feedback_shown>
    <feedback_size>50000</feedback_size>
    <using_thread_priorities>Y</using_thread_priorities>
    <shared_objects_file/>
    <capture_step_performance>N</capture_step_performance>
    <step_performance_capturing_delay>1000</step_performance_capturing_delay>
    <step_performance_capturing_size_limit/>
    <dependencies>
    </dependencies>
    <partitionschemas>
    </partitionschemas>
    <slaveservers>
    </slaveservers>
    <clusterschemas>
    </clusterschemas>
  <modified_user>admin</modified_user>
  <modified_date>2011&#47;09&#47;03 11:20:34.000</modified_date>
  </info>
  <notepads>
  </notepads>
  <connection>
    <name>twitter_analytics</name>
    <server>localhost</server>
    <type>MYSQL</type>
    <access>Native</access>
    <database>topgun_twitter_analytics</database>
    <port>3306</port>
    <username>topgun</username>
    <password>Encrypted 2be98afc86aa7f2e4cb1ba265db95bac3</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>EXTRA_OPTION_MYSQL.defaultFetchSize</code><attribute>500</attribute></attribute>
      <attribute><code>EXTRA_OPTION_MYSQL.useCursorFetch</code><attribute>true</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>3306</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>STREAM_RESULTS</code><attribute>Y</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>N</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>N</attribute></attribute>
    </attributes>
  </connection>
  <order>
  <hop> <from>source_keywords</from><to>job_keyword_searches</to><enabled>Y</enabled> </hop>  </order>
  <step>
    <name>job_keyword_searches</name>
    <type>TableOutput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <schema/>
    <table>job_keyword_searches</table>
    <commit>1000</commit>
    <truncate>Y</truncate>
    <ignore_errors>N</ignore_errors>
    <use_batch>Y</use_batch>
    <specify_fields>Y</specify_fields>
    <partitioning_enabled>N</partitioning_enabled>
    <partitioning_field/>
    <partitioning_daily>N</partitioning_daily>
    <partitioning_monthly>Y</partitioning_monthly>
    <tablename_in_field>N</tablename_in_field>
    <tablename_field/>
    <tablename_in_table>Y</tablename_in_table>
    <return_keys>N</return_keys>
    <return_field/>
    <fields>
        <field>
          <column_name>source_keyword_id</column_name>
          <stream_name>ID</stream_name>
        </field>
        <field>
          <column_name>state_id</column_name>
          <stream_name>state_id</stream_name>
        </field>
        <field>
          <column_name>max_pages_remaining</column_name>
          <stream_name>max_pages_remaining</stream_name>
        </field>
        <field>
          <column_name>current_page</column_name>
          <stream_name>current_page</stream_name>
        </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>464</xloc>
      <yloc>36</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>source_keywords</name>
    <type>TableInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <sql>SELECT
  sk.ID,
  &apos;PENDINGSEARCH&apos; AS state_id,
  max_pages.attribute_value AS max_pages_remaining,
  1 AS current_page
FROM
	settings AS max_pages,
	source_keywords AS sk
WHERE
	max_pages.attribute_id = &apos;MAX_PAGES&apos; AND
	sk.suspended = &apos;N&apos;
</sql>
    <limit>0</limit>
    <lookup/>
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>131</xloc>
      <yloc>36</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step_error_handling>
  </step_error_handling>
   <slave-step-copy-partition-distribution>
</slave-step-copy-partition-distribution>
   <slave_transformation>N</slave_transformation>
</transformation>

<transformation>
  <info>
    <name>Fetch Tweets from Search Terms</name>
    <description/>
    <extended_description/>
    <trans_version/>
    <trans_type>Normal</trans_type>
    <trans_status>0</trans_status>
    <directory>&#47;twitter_analytics</directory>
    <parameters>
    </parameters>
    <log>
<trans-log-table><connection/>
<schema/>
<table/>
<size_limit_lines/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STATUS</id><enabled>Y</enabled><name>STATUS</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name><subject/></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name><subject/></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name><subject/></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name><subject/></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name><subject/></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name><subject/></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>STARTDATE</id><enabled>Y</enabled><name>STARTDATE</name></field><field><id>ENDDATE</id><enabled>Y</enabled><name>ENDDATE</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>DEPDATE</id><enabled>Y</enabled><name>DEPDATE</name></field><field><id>REPLAYDATE</id><enabled>Y</enabled><name>REPLAYDATE</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></trans-log-table>
<perf-log-table><connection/>
<schema/>
<table/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>SEQ_NR</id><enabled>Y</enabled><name>SEQ_NR</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>INPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>INPUT_BUFFER_ROWS</name></field><field><id>OUTPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>OUTPUT_BUFFER_ROWS</name></field></perf-log-table>
<channel-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>LOGGING_OBJECT_TYPE</id><enabled>Y</enabled><name>LOGGING_OBJECT_TYPE</name></field><field><id>OBJECT_NAME</id><enabled>Y</enabled><name>OBJECT_NAME</name></field><field><id>OBJECT_COPY</id><enabled>Y</enabled><name>OBJECT_COPY</name></field><field><id>REPOSITORY_DIRECTORY</id><enabled>Y</enabled><name>REPOSITORY_DIRECTORY</name></field><field><id>FILENAME</id><enabled>Y</enabled><name>FILENAME</name></field><field><id>OBJECT_ID</id><enabled>Y</enabled><name>OBJECT_ID</name></field><field><id>OBJECT_REVISION</id><enabled>Y</enabled><name>OBJECT_REVISION</name></field><field><id>PARENT_CHANNEL_ID</id><enabled>Y</enabled><name>PARENT_CHANNEL_ID</name></field><field><id>ROOT_CHANNEL_ID</id><enabled>Y</enabled><name>ROOT_CHANNEL_ID</name></field></channel-log-table>
<step-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></step-log-table>
    </log>
    <maxdate>
      <connection/>
      <table/>
      <field/>
      <offset>0.0</offset>
      <maxdiff>0.0</maxdiff>
    </maxdate>
    <size_rowset>10000</size_rowset>
    <sleep_time_empty>50</sleep_time_empty>
    <sleep_time_full>50</sleep_time_full>
    <unique_connections>N</unique_connections>
    <feedback_shown>Y</feedback_shown>
    <feedback_size>50000</feedback_size>
    <using_thread_priorities>Y</using_thread_priorities>
    <shared_objects_file/>
    <capture_step_performance>N</capture_step_performance>
    <step_performance_capturing_delay>1000</step_performance_capturing_delay>
    <step_performance_capturing_size_limit/>
    <dependencies>
    </dependencies>
    <partitionschemas>
    </partitionschemas>
    <slaveservers>
    </slaveservers>
    <clusterschemas>
    </clusterschemas>
  <modified_user>admin</modified_user>
  <modified_date>2011&#47;09&#47;03 11:23:42.000</modified_date>
  </info>
  <notepads>
  </notepads>
  <connection>
    <name>twitter_analytics</name>
    <server>localhost</server>
    <type>MYSQL</type>
    <access>Native</access>
    <database>topgun_twitter_analytics</database>
    <port>3306</port>
    <username>topgun</username>
    <password>Encrypted 2be98afc86aa7f2e4cb1ba265db95bac3</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>EXTRA_OPTION_MYSQL.defaultFetchSize</code><attribute>500</attribute></attribute>
      <attribute><code>EXTRA_OPTION_MYSQL.useCursorFetch</code><attribute>true</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>3306</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>STREAM_RESULTS</code><attribute>Y</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>N</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>N</attribute></attribute>
    </attributes>
  </connection>
  <order>
  <hop> <from>Decode HTML encoded chars</from><to>Extract time and date</to><enabled>Y</enabled> </hop>  <hop> <from>Extract time and date</from><to>Select values</to><enabled>Y</enabled> </hop>  <hop> <from>Parse JSON</from><to>Filter undefined tweets</to><enabled>Y</enabled> </hop>  <hop> <from>Filter undefined tweets</from><to>Decode HTML encoded chars</to><enabled>Y</enabled> </hop>  <hop> <from>Filter undefined tweets</from><to>undefined tweets</to><enabled>Y</enabled> </hop>  <hop> <from>Fix Twitter encoding bug</from><to>Parse JSON</to><enabled>Y</enabled> </hop>  <hop> <from>job_keyword_searches</from><to>dim_twitter_keyword_searches</to><enabled>Y</enabled> </hop>  <hop> <from>Determine next page</from><to>job_keyword_searches 2</to><enabled>Y</enabled> </hop>  <hop> <from>dim_twitter_keyword_searches</from><to>Select values 2</to><enabled>Y</enabled> </hop>  <hop> <from>Select values</from><to>Generate sort rank</to><enabled>Y</enabled> </hop>  <hop> <from>Generate sort rank</from><to>staging_candidate_tweets</to><enabled>Y</enabled> </hop>  <hop> <from>job_keyword_searches, source_keywords</from><to>job_keyword_searches</to><enabled>Y</enabled> </hop>  <hop> <from>Twitter Search</from><to>Fix Twitter encoding bug</to><enabled>Y</enabled> </hop>  <hop> <from>Check if API result is valid</from><to>Determine next page</to><enabled>Y</enabled> </hop>  <hop> <from>Check if API result is valid</from><to>Abort</to><enabled>Y</enabled> </hop>  <hop> <from>Select values 2</from><to>Delay row</to><enabled>Y</enabled> </hop>  <hop> <from>Delay row</from><to>Twitter Search</to><enabled>Y</enabled> </hop>  <hop> <from>Parse JSON</from><to>Filter unique job IDs</to><enabled>Y</enabled> </hop>  <hop> <from>Filter unique job IDs</from><to>Check if API result is valid</to><enabled>Y</enabled> </hop>  </order>
  <step>
    <name>Abort</name>
    <type>Abort</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <row_threshold>1</row_threshold>
      <message>Invalid result from twitter search</message>
      <always_log_rows>Y</always_log_rows>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>298</xloc>
      <yloc>295</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Check if API result is valid</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to>Determine next page</send_true_to>
<send_false_to>Abort</send_false_to>
    <compare>
<condition>
 <negated>N</negated>
 <leftvalue>api_response_valid</leftvalue>
 <function>=</function>
 <rightvalue/>
 <value><name>constant</name><type>Boolean</type><text>Y</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask/></value> </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>424</xloc>
      <yloc>295</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Decode HTML encoded chars</name>
    <type>ReplaceString</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <in_stream_name>tweet_status</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&amp;quot;</replace_string>
        <replace_by_string>&quot;</replace_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>tweet_status</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&amp;amp;</replace_string>
        <replace_by_string>&amp;</replace_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>tweet_status</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&amp;lt;</replace_string>
        <replace_by_string>&lt;</replace_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>tweet_status</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&amp;gt;</replace_string>
        <replace_by_string>&gt;</replace_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>tweet_status</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&amp;apos;</replace_string>
        <replace_by_string>&apos;</replace_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>tweet_source</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&amp;quot;</replace_string>
        <replace_by_string>&quot;</replace_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>tweet_source</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&amp;amp;</replace_string>
        <replace_by_string>&amp;</replace_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>tweet_source</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&amp;lt;</replace_string>
        <replace_by_string>&lt;</replace_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>tweet_source</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&amp;gt;</replace_string>
        <replace_by_string>&gt;</replace_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>tweet_source</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&amp;apos;</replace_string>
        <replace_by_string>&apos;</replace_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>753</xloc>
      <yloc>35</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Delay row</name>
    <type>Delay</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <timeout>2</timeout>
    <scaletime>seconds</scaletime>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>93</xloc>
      <yloc>139</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Determine next page</name>
    <type>Formula</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>next_page</field_name>
<formula_string>if([more_pages];([current_page]+1);0)</formula_string>
<value_type>Number</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
       <formula><field_name>current_state</field_name>
<formula_string>if([more_pages];&quot;SEARCHINPROGRESS&quot;;&quot;SEARCHCOMPLETE&quot;)</formula_string>
<value_type>String</value_type>
<value_length>20</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>424</xloc>
      <yloc>425</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Extract time and date</name>
    <type>RegexEval</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <script><![CDATA[^[a-z][a-z][a-z], ([0-9][0-9] [a-z][a-z][a-z] [0-9][0-9][0-9][0-9] [0-9][0-9]:[0-9][0-9]:[0-9][0-9]) \+[0-9][0-9][0-9][0-9]$]]></script>    <matcher>created_at</matcher>
    <resultfieldname>result</resultfieldname>
    <usevar>N</usevar>
    <allowcapturegroups>Y</allowcapturegroups>
    <canoneq>N</canoneq>
    <caseinsensitive>Y</caseinsensitive>
    <comment>N</comment>
    <dotall>N</dotall>
    <multiline>N</multiline>
    <unicode>N</unicode>
    <unix>N</unix>
    <fields>
      <field>
        <name>tweet_dt</name>
        <type>Date</type>
        <format>dd MMM yyyy HH:mm:ss</format>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>918</xloc>
      <yloc>35</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Filter undefined tweets</name>
    <type>FilterRows</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to>Decode HTML encoded chars</send_true_to>
<send_false_to>undefined tweets</send_false_to>
    <compare>
<condition>
 <negated>Y</negated>
 <leftvalue>tweet_status</leftvalue>
 <function>=</function>
 <rightvalue/>
 <value><name>constant</name><type>String</type><text>undefined</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask/></value> </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>588</xloc>
      <yloc>35</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Filter unique job IDs</name>
    <type>Unique</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <count_rows>N</count_rows>
      <count_field/>
      <reject_duplicate_row>N</reject_duplicate_row>
      <error_description/>
    <fields>      <field>        <name>job_keyword_search_id</name>
        <case_insensitive>N</case_insensitive>
        </field>      </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>424</xloc>
      <yloc>165</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Fix Twitter encoding bug</name>
    <type>ReplaceString</type>
    <description>Twitter API mistakenly Percent Encoded the quote [&quot;] character
(which only manisfests itself for phrase searches).
This step converts the Percent encoded quote to be HTML encoded, so 
the JSON parser can properly decode the records.</description>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <in_stream_name>raw_json_result</in_stream_name>
        <out_stream_name>json_result</out_stream_name>
        <use_regex>no</use_regex>
        <replace_string>%22</replace_string>
        <replace_by_string>&amp;quot;</replace_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>315</xloc>
      <yloc>35</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Generate sort rank</name>
    <type>RandomValue</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <name>sort_rank</name>
        <type>random uuid4</type>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1219</xloc>
      <yloc>35</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Parse JSON</name>
    <type>ScriptValueMod</type>
    <description>This step does the following:
1. Checks to see if the result returned from Twitter is valid
2. Transforms JSON document into flat record format.
3. Checks to see if there are any results at all
4. Checks to see if there are subsequent pages, or if this is the last page</description>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <compatible>N</compatible>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>&#47;&#47;Script here
&#47;*
    http:&#47;&#47;www.JSON.org&#47;json2.js
    2008-05-25

    Public Domain.

    NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.

    See http:&#47;&#47;www.JSON.org&#47;js.html

    This file creates a global JSON object containing two methods: stringify
    and parse.

        JSON.stringify(value, replacer, space)
            value       any JavaScript value, usually an object or array.

            replacer    an optional parameter that determines how object
                        values are stringified for objects without a toJSON
                        method. It can be a function or an array.

            space       an optional parameter that specifies the indentation
                        of nested structures. If it is omitted, the text will
                        be packed without extra whitespace. If it is a number,
                        it will specify the number of spaces to indent at each
                        level. If it is a string (such as &apos;\t&apos; or &apos;&amp;nbsp;&apos;),
                        it contains the characters used to indent at each level.

            This method produces a JSON text from a JavaScript value.

            When an object value is found, if the object contains a toJSON
            method, its toJSON method will be called and the result will be
            stringified. A toJSON method does not serialize: it returns the
            value represented by the name&#47;value pair that should be serialized,
            or undefined if nothing should be serialized. The toJSON method
            will be passed the key associated with the value, and this will be
            bound to the object holding the key.

            For example, this would serialize Dates as ISO strings.

                Date.prototype.toJSON = function (key) {
                    function f(n) {
                        &#47;&#47; Format integers to have at least two digits.
                        return n &lt; 10 ? &apos;0&apos; + n : n;
                    }

                    return this.getUTCFullYear()   + &apos;-&apos; +
                         f(this.getUTCMonth() + 1) + &apos;-&apos; +
                         f(this.getUTCDate())      + &apos;T&apos; +
                         f(this.getUTCHours())     + &apos;:&apos; +
                         f(this.getUTCMinutes())   + &apos;:&apos; +
                         f(this.getUTCSeconds())   + &apos;Z&apos;;
                };

            You can provide an optional replacer method. It will be passed the
            key and value of each member, with this bound to the containing
            object. The value that is returned from your method will be
            serialized. If your method returns undefined, then the member will
            be excluded from the serialization.

            If the replacer parameter is an array, then it will be used to
            select the members to be serialized. It filters the results such
            that only members with keys listed in the replacer array are
            stringified.

            Values that do not have JSON representations, such as undefined or
            functions, will not be serialized. Such values in objects will be
            dropped; in arrays they will be replaced with null. You can use
            a replacer function to replace those with JSON values.
            JSON.stringify(undefined) returns undefined.

            The optional space parameter produces a stringification of the
            value that is filled with line breaks and indentation to make it
            easier to read.

            If the space parameter is a non-empty string, then that string will
            be used for indentation. If the space parameter is a number, then
            the indentation will be that many spaces.

            Example:

            text = JSON.stringify([&apos;e&apos;, {pluribus: &apos;unum&apos;}]);
            &#47;&#47; text is &apos;[&quot;e&quot;,{&quot;pluribus&quot;:&quot;unum&quot;}]&apos;


            text = JSON.stringify([&apos;e&apos;, {pluribus: &apos;unum&apos;}], null, &apos;\t&apos;);
            &#47;&#47; text is &apos;[\n\t&quot;e&quot;,\n\t{\n\t\t&quot;pluribus&quot;: &quot;unum&quot;\n\t}\n]&apos;

            text = JSON.stringify([new Date()], function (key, value) {
                return this[key] instanceof Date ?
                    &apos;Date(&apos; + this[key] + &apos;)&apos; : value;
            });
            &#47;&#47; text is &apos;[&quot;Date(---current time---)&quot;]&apos;


        JSON.parse(text, reviver)
            This method parses a JSON text to produce an object or array.
            It can throw a SyntaxError exception.

            The optional reviver parameter is a function that can filter and
            transform the results. It receives each of the keys and values,
            and its return value is used instead of the original value.
            If it returns what it received, then the structure is not modified.
            If it returns undefined then the member is deleted.

            Example:

            &#47;&#47; Parse the text. Values that look like ISO date strings will
            &#47;&#47; be converted to Date objects.

            myData = JSON.parse(text, function (key, value) {
                var a;
                if (typeof value === &apos;string&apos;) {
                    a =
&#47;^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$&#47;.exec(value);
                    if (a) {
                        return new Date(Date.UTC(+a[1], +a[2] - 1, +a[3], +a[4],
                            +a[5], +a[6]));
                    }
                }
                return value;
            });

            myData = JSON.parse(&apos;[&quot;Date(09&#47;09&#47;2001)&quot;]&apos;, function (key, value) {
                var d;
                if (typeof value === &apos;string&apos; &amp;&amp;
                        value.slice(0, 5) === &apos;Date(&apos; &amp;&amp;
                        value.slice(-1) === &apos;)&apos;) {
                    d = new Date(value.slice(5, -1));
                    if (d) {
                        return d;
                    }
                }
                return value;
            });


    This is a reference implementation. You are free to copy, modify, or
    redistribute.

    This code should be minified before deployment.
    See http:&#47;&#47;javascript.crockford.com&#47;jsmin.html

    USE YOUR OWN COPY. IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO
    NOT CONTROL.
*&#47;

&#47;*jslint evil: true *&#47;

&#47;*global JSON *&#47;

&#47;*members &quot;&quot;, &quot;\b&quot;, &quot;\t&quot;, &quot;\n&quot;, &quot;\f&quot;, &quot;\r&quot;, &quot;\&quot;&quot;, JSON, &quot;\\&quot;, call,
    charCodeAt, getUTCDate, getUTCFullYear, getUTCHours, getUTCMinutes,
    getUTCMonth, getUTCSeconds, hasOwnProperty, join, lastIndex, length,
    parse, propertyIsEnumerable, prototype, push, replace, slice, stringify,
    test, toJSON, toString
*&#47;

if (!this.JSON) {

&#47;&#47; Create a JSON object only if one does not already exist. We create the
&#47;&#47; object in a closure to avoid creating global variables.

    JSON = function () {

        function f(n) {
            &#47;&#47; Format integers to have at least two digits.
            return n &lt; 10 ? &apos;0&apos; + n : n;
        }

        Date.prototype.toJSON = function (key) {

            return this.getUTCFullYear()   + &apos;-&apos; +
                 f(this.getUTCMonth() + 1) + &apos;-&apos; +
                 f(this.getUTCDate())      + &apos;T&apos; +
                 f(this.getUTCHours())     + &apos;:&apos; +
                 f(this.getUTCMinutes())   + &apos;:&apos; +
                 f(this.getUTCSeconds())   + &apos;Z&apos;;
        };

        var cx = &#47;[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]&#47;g,
            escapeable = &#47;[\\\&quot;\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]&#47;g,
            gap,
            indent,
            meta = {    &#47;&#47; table of character substitutions
                &apos;\b&apos;: &apos;\\b&apos;,
                &apos;\t&apos;: &apos;\\t&apos;,
                &apos;\n&apos;: &apos;\\n&apos;,
                &apos;\f&apos;: &apos;\\f&apos;,
                &apos;\r&apos;: &apos;\\r&apos;,
                &apos;&quot;&apos; : &apos;\\&quot;&apos;,
                &apos;\\&apos;: &apos;\\\\&apos;
            },
            rep;


        function quote(string) {

&#47;&#47; If the string contains no control characters, no quote characters, and no
&#47;&#47; backslash characters, then we can safely slap some quotes around it.
&#47;&#47; Otherwise we must also replace the offending characters with safe escape
&#47;&#47; sequences.

            escapeable.lastIndex = 0;
            return escapeable.test(string) ?
                &apos;&quot;&apos; + string.replace(escapeable, function (a) {
                    var c = meta[a];
                    if (typeof c === &apos;string&apos;) {
                        return c;
                    }
                    return &apos;\\u&apos; + (&apos;0000&apos; +
                            (+(a.charCodeAt(0))).toString(16)).slice(-4);
                }) + &apos;&quot;&apos; :
                &apos;&quot;&apos; + string + &apos;&quot;&apos;;
        }


        function str(key, holder) {

&#47;&#47; Produce a string from holder[key].

            var i,          &#47;&#47; The loop counter.
                k,          &#47;&#47; The member key.
                v,          &#47;&#47; The member value.
                length,
                mind = gap,
                partial,
                value = holder[key];

&#47;&#47; If the value has a toJSON method, call it to obtain a replacement value.

            if (value &amp;&amp; typeof value === &apos;object&apos; &amp;&amp;
                    typeof value.toJSON === &apos;function&apos;) {
                value = value.toJSON(key);
            }

&#47;&#47; If we were called with a replacer function, then call the replacer to
&#47;&#47; obtain a replacement value.

            if (typeof rep === &apos;function&apos;) {
                value = rep.call(holder, key, value);
            }

&#47;&#47; What happens next depends on the value&apos;s type.

            switch (typeof value) {
            case &apos;string&apos;:
                return quote(value);

            case &apos;number&apos;:

&#47;&#47; JSON numbers must be finite. Encode non-finite numbers as null.

                return isFinite(value) ? String(value) : &apos;null&apos;;

            case &apos;boolean&apos;:
            case &apos;null&apos;:

&#47;&#47; If the value is a boolean or null, convert it to a string. Note:
&#47;&#47; typeof null does not produce &apos;null&apos;. The case is included here in
&#47;&#47; the remote chance that this gets fixed someday.

                return String(value);

&#47;&#47; If the type is &apos;object&apos;, we might be dealing with an object or an array or
&#47;&#47; null.

            case &apos;object&apos;:

&#47;&#47; Due to a specification blunder in ECMAScript, typeof null is &apos;object&apos;,
&#47;&#47; so watch out for that case.

                if (!value) {
                    return &apos;null&apos;;
                }

&#47;&#47; Make an array to hold the partial results of stringifying this object value.

                gap += indent;
                partial = [];

&#47;&#47; If the object has a dontEnum length property, we&apos;ll treat it as an array.

                if (typeof value.length === &apos;number&apos; &amp;&amp;
                        !(value.propertyIsEnumerable(&apos;length&apos;))) {

&#47;&#47; The object is an array. Stringify every element. Use null as a placeholder
&#47;&#47; for non-JSON values.

                    length = value.length;
                    for (i = 0; i &lt; length; i += 1) {
                        partial[i] = str(i, value) || &apos;null&apos;;
                    }

&#47;&#47; Join all of the elements together, separated with commas, and wrap them in
&#47;&#47; brackets.

                    v = partial.length === 0 ? &apos;[]&apos; :
                        gap ? &apos;[\n&apos; + gap +
                                partial.join(&apos;,\n&apos; + gap) + &apos;\n&apos; +
                                    mind + &apos;]&apos; :
                              &apos;[&apos; + partial.join(&apos;,&apos;) + &apos;]&apos;;
                    gap = mind;
                    return v;
                }

&#47;&#47; If the replacer is an array, use it to select the members to be stringified.

                if (rep &amp;&amp; typeof rep === &apos;object&apos;) {
                    length = rep.length;
                    for (i = 0; i &lt; length; i += 1) {
                        k = rep[i];
                        if (typeof k === &apos;string&apos;) {
                            v = str(k, value, rep);
                            if (v) {
                                partial.push(quote(k) + (gap ? &apos;: &apos; : &apos;:&apos;) + v);
                            }
                        }
                    }
                } else {

&#47;&#47; Otherwise, iterate through all of the keys in the object.

                    for (k in value) {
                        if (Object.hasOwnProperty.call(value, k)) {
                            v = str(k, value, rep);
                            if (v) {
                                partial.push(quote(k) + (gap ? &apos;: &apos; : &apos;:&apos;) + v);
                            }
                        }
                    }
                }

&#47;&#47; Join all of the member texts together, separated with commas,
&#47;&#47; and wrap them in braces.

                v = partial.length === 0 ? &apos;{}&apos; :
                    gap ? &apos;{\n&apos; + gap + partial.join(&apos;,\n&apos; + gap) + &apos;\n&apos; +
                            mind + &apos;}&apos; : &apos;{&apos; + partial.join(&apos;,&apos;) + &apos;}&apos;;
                gap = mind;
                return v;
            }
        }

&#47;&#47; Return the JSON object containing the stringify and parse methods.

        return {
            stringify: function (value, replacer, space) {

&#47;&#47; The stringify method takes a value and an optional replacer, and an optional
&#47;&#47; space parameter, and returns a JSON text. The replacer can be a function
&#47;&#47; that can replace values, or an array of strings that will select the keys.
&#47;&#47; A default replacer method can be provided. Use of the space parameter can
&#47;&#47; produce text that is more easily readable.

                var i;
                gap = &apos;&apos;;
                indent = &apos;&apos;;

&#47;&#47; If the space parameter is a number, make an indent string containing that
&#47;&#47; many spaces.

                if (typeof space === &apos;number&apos;) {
                    for (i = 0; i &lt; space; i += 1) {
                        indent += &apos; &apos;;
                    }

&#47;&#47; If the space parameter is a string, it will be used as the indent string.

                } else if (typeof space === &apos;string&apos;) {
                    indent = space;
                }

&#47;&#47; If there is a replacer, it must be a function or an array.
&#47;&#47; Otherwise, throw an error.

                rep = replacer;
                if (replacer &amp;&amp; typeof replacer !== &apos;function&apos; &amp;&amp;
                        (typeof replacer !== &apos;object&apos; ||
                         typeof replacer.length !== &apos;number&apos;)) {
                    throw new Error(&apos;JSON.stringify&apos;);
                }

&#47;&#47; Make a fake root object containing our value under the key of &apos;&apos;.
&#47;&#47; Return the result of stringifying the value.

                return str(&apos;&apos;, {&apos;&apos;: value});
            },


            parse: function (text, reviver) {

&#47;&#47; The parse method takes a text and an optional reviver function, and returns
&#47;&#47; a JavaScript value if the text is a valid JSON text.

                var j;

                function walk(holder, key) {

&#47;&#47; The walk method is used to recursively walk the resulting structure so
&#47;&#47; that modifications can be made.

                    var k, v, value = holder[key];
                    if (value &amp;&amp; typeof value === &apos;object&apos;) {
                        for (k in value) {
                            if (Object.hasOwnProperty.call(value, k)) {
                                v = walk(value, k);
                                if (v !== undefined) {
                                    value[k] = v;
                                } else {
                                    delete value[k];
                                }
                            }
                        }
                    }
                    return reviver.call(holder, key, value);
                }


&#47;&#47; Parsing happens in four stages. In the first stage, we replace certain
&#47;&#47; Unicode characters with escape sequences. JavaScript handles many characters
&#47;&#47; incorrectly, either silently deleting them, or treating them as line endings.

                cx.lastIndex = 0;
                if (cx.test(text)) {
                    text = text.replace(cx, function (a) {
                        return &apos;\\u&apos; + (&apos;0000&apos; +
                                (+(a.charCodeAt(0))).toString(16)).slice(-4);
                    });
                }

&#47;&#47; In the second stage, we run the text against regular expressions that look
&#47;&#47; for non-JSON patterns. We are especially concerned with &apos;()&apos; and &apos;new&apos;
&#47;&#47; because they can cause invocation, and &apos;=&apos; because it can cause mutation.
&#47;&#47; But just to be safe, we want to reject all unexpected forms.

&#47;&#47; We split the second stage into 4 regexp operations in order to work around
&#47;&#47; crippling inefficiencies in IE&apos;s and Safari&apos;s regexp engines. First we
&#47;&#47; replace the JSON backslash pairs with &apos;@&apos; (a non-JSON character). Second, we
&#47;&#47; replace all simple value tokens with &apos;]&apos; characters. Third, we delete all
&#47;&#47; open brackets that follow a colon or comma or that begin the text. Finally,
&#47;&#47; we look to see that the remaining characters are only whitespace or &apos;]&apos; or
&#47;&#47; &apos;,&apos; or &apos;:&apos; or &apos;{&apos; or &apos;}&apos;. If that is so, then the text is safe for eval.

                if (&#47;^[\],:{}\s]*$&#47;.
test(text.replace(&#47;\\(?:[&quot;\\\&#47;bfnrt]|u[0-9a-fA-F]{4})&#47;g, &apos;@&apos;).
replace(&#47;&quot;[^&quot;\\\n\r]*&quot;|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?&#47;g, &apos;]&apos;).
replace(&#47;(?:^|:|,)(?:\s*\[)+&#47;g, &apos;&apos;))) {

&#47;&#47; In the third stage we use the eval function to compile the text into a
&#47;&#47; JavaScript structure. The &apos;{&apos; operator is subject to a syntactic ambiguity
&#47;&#47; in JavaScript: it can begin a block or an object literal. We wrap the text
&#47;&#47; in parens to eliminate the ambiguity.

                    j = eval(&apos;(&apos; + text + &apos;)&apos;);

&#47;&#47; In the optional fourth stage, we recursively walk the new structure, passing
&#47;&#47; each name&#47;value pair to a reviver function for possible transformation.

                    return typeof reviver === &apos;function&apos; ?
                        walk({&apos;&apos;: j}, &apos;&apos;) : j;
                }

&#47;&#47; If the text is not JSON parseable, then a SyntaxError is thrown.

                throw new SyntaxError(&apos;JSON.parse&apos;);
            }
        };
    }();
}


&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;
&#47;&#47; Start here
&#47;&#47; &#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;
function ExtractNextPageNum(nextPageStr)
{
	var a1sAttPairs;
	var a1NextPagePair;
	var iNextPage;

	a1AttPairs = nextPageStr.split(&quot;&amp;&quot;);

	a1NextPair = a1AttPairs[0].split(&quot;=&quot;);

	iNextPage = a1NextPair[1];

	return iNextPage;
}


&#47;&#47;output fields
var tweet_id;
var created_at;
var tweet_status;
var more_pages=false;
var iNextPage;
var from_user_screen_name;
var tweet_source;
var results_found=false;
var api_response_valid=false;
var twitter_result_prefix;
var newRow;
var tweet;
var is_first_row=true;


twitter_result_prefix = substr(json_result, 0, 15);


if (twitter_result_prefix == &apos;{&quot;completed_in&quot;&apos;) {

	api_response_valid = true;
	tweet = JSON.parse( unescape(json_result) );

	if (typeof tweet.results == &quot;undefined&quot;) {
		results_found = false;
	} else if (tweet.results.length == 0) {
		results_found = false;
	} else {
		results_found = true;

		for (i=0;i&lt;tweet.results.length;i++)
		{
			if (is_first_row) {
			
				tweet_id = tweet.results[i].id;
				created_at = tweet.results[i].created_at;
				tweet_status = tweet.results[i].text;
				from_user_screen_name = tweet.results[i].from_user;
				tweet_source = tweet.results[i].source;

				if(typeof tweet.next_page == &quot;undefined&quot;) {
					more_pages = false;
				} else {
					iNextPage = ExtractNextPageNum(tweet.next_page);	

					if (iNextPage &lt;= max_pages) {
						more_pages = true;
					} else {
						more_pages = false;
					}
				
				}
		
				is_first_row = false;
			} else {
				newRow = createRowCopy(getOutputRowMeta().size());
	
				newRow[10] = tweet.results[i].id;
				newRow[11] = tweet.results[i].created_at;
				newRow[12] = tweet.results[i].text;
				newRow[13] = more_pages;
				newRow[14] = tweet.results[i].from_user;
				newRow[15] = tweet.results[i].source;
				newRow[16] = results_found;
				newRow[17] = api_response_valid;
				

				putRow(newRow);
			}
		}
	}
} else {
	api_response_valid = false;
}
	</jsScript_script>
      </jsScript>      <jsScript>        <jsScript_type>-1</jsScript_type>
        <jsScript_name>substr_Sample</jsScript_name>
        <jsScript_script>&#47;&#47; Perform the substring function
&#47;&#47; 
&#47;&#47; Usage:
&#47;&#47; substr(var, from);
&#47;&#47; substr(var, from, to);
&#47;&#47;
&#47;&#47; 2007-01-25
&#47;&#47;
var str1= &quot;Hello Pentaho!&quot;;
var str2= substr(str1, 6);
var str3= substr(str1, 6, 7);
Alert(&quot;Input : &quot; + str1);
Alert(&quot;From position 6: &quot; + str2);
Alert(&quot;From position 6 for 7 long : &quot; + str3);
</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>tweet_id</name>
        <rename>tweet_id</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>created_at</name>
        <rename>created_at</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>tweet_status</name>
        <rename>tweet_status</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>more_pages</name>
        <rename>more_pages</rename>
        <type>Boolean</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>from_user_screen_name</name>
        <rename>from_user_screen_name</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>tweet_source</name>
        <rename>tweet_source</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>results_found</name>
        <rename>results_found</rename>
        <type>Boolean</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>api_response_valid</name>
        <rename>api_response_valid</rename>
        <type>Boolean</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>424</xloc>
      <yloc>35</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Select values</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>tweet_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>tweet_status</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>tweet_dt</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>from_user_screen_name</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>tweet_source</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>dim_twitter_search_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>priority</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1083</xloc>
      <yloc>35</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Select values 2</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>job_keyword_search_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>source_keyword_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>twitter_search_url</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>ID</name>
        <rename>dim_twitter_search_id</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>state_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>current_page</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>max_pages</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>priority</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>93</xloc>
      <yloc>243</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Twitter Search</name>
    <type>HTTP</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <url>http:&#47;&#47;search.twitter.com&#47;search.json?q=internet%20radio</url>
    <urlInField>Y</urlInField>
    <urlField>twitter_search_url</urlField>
    <encoding/>
    <httpLogin/>
    <httpPassword/>
    <proxyHost/>
    <proxyPort/>
    <lookup>
    </lookup>
    <result>
      <name>raw_json_result</name>
      <code/>
    </result>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>93</xloc>
      <yloc>35</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>dim_twitter_keyword_searches</name>
    <type>DimensionLookup</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <schema/>
      <table>dim_twitter_keyword_searches</table>
      <connection>twitter_analytics</connection>
      <commit>100</commit>
      <update>Y</update>
      <fields>
        <key>
          <name>source_keyword_id</name>
          <lookup>source_keyword_id</lookup>
        </key>
        <date>
          <name/>
          <from>effective_begin_date</from>
          <to>effective_end_date</to>
        </date>
        <field>
          <name>keywords</name>
          <lookup>keywords</lookup>
          <update>Insert</update>
        </field>
        <field>
          <name>is_phrase</name>
          <lookup>is_phrase</lookup>
          <update>Insert</update>
        </field>
        <field>
          <name>language_code</name>
          <lookup>language_code</lookup>
          <update>Insert</update>
        </field>
        <field>
          <name>latitude</name>
          <lookup>latitude</lookup>
          <update>Insert</update>
        </field>
        <field>
          <name>longitude</name>
          <lookup>longitude</lookup>
          <update>Insert</update>
        </field>
        <field>
          <name>radius</name>
          <lookup>radius</lookup>
          <update>Insert</update>
        </field>
        <field>
          <name>radius_unit_id</name>
          <lookup>radius_unit_id</lookup>
          <update>Insert</update>
        </field>
        <field>
          <name>source_topic_id</name>
          <lookup>source_topic_id</lookup>
          <update>Insert</update>
        </field>
        <field>
          <name>topic_description</name>
          <lookup>source_topic_description</lookup>
          <update>Insert</update>
        </field>
        <return>
          <name>ID</name>
          <rename/>
          <creation_method>autoinc</creation_method>
          <use_autoinc>Y</use_autoinc>
          <version>dim_version</version>
        </return>
      </fields>
      <sequence/>
      <min_year>2009</min_year>
      <max_year>2199</max_year>
      <cache_size>5000</cache_size>
      <preload_cache>N</preload_cache>
      <use_start_date_alternative>N</use_start_date_alternative>
      <start_date_alternative>none</start_date_alternative>
      <start_date_field_name/>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>93</xloc>
      <yloc>347</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>job_keyword_searches</name>
    <type>Update</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <skip_lookup>N</skip_lookup>
    <commit>100</commit>
    <error_ignored>N</error_ignored>
    <ignore_flag_field/>
    <lookup>
      <schema/>
      <table>job_keyword_searches</table>
      <key>
        <name>job_keyword_search_id</name>
        <field>ID</field>
        <condition>=</condition>
        <name2/>
        </key>
      <value>
        <name>state_id</name>
        <rename>state_id</rename>
        </value>
      </lookup>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>93</xloc>
      <yloc>451</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>job_keyword_searches 2</name>
    <type>Update</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <skip_lookup>N</skip_lookup>
    <commit>100</commit>
    <error_ignored>N</error_ignored>
    <ignore_flag_field/>
    <lookup>
      <schema/>
      <table>job_keyword_searches</table>
      <key>
        <name>job_keyword_search_id</name>
        <field>ID</field>
        <condition>=</condition>
        <name2/>
        </key>
      <value>
        <name>current_page</name>
        <rename>next_page</rename>
        </value>
      <value>
        <name>state_id</name>
        <rename>current_state</rename>
        </value>
      </lookup>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>424</xloc>
      <yloc>555</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>job_keyword_searches, source_keywords</name>
    <type>TableInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <sql>SELECT
  jks.ID AS job_keyword_search_id,
  &apos;SEARCHINPROGRESS&apos; AS state_id,
  sk.ID AS source_keyword_id,
  CONCAT(
	   &apos;http:&#47;&#47;search.twitter.com&#47;search.json?&apos;,
	   IF(sk.is_phrase=&apos;N&apos;, &apos;q=&apos;, &apos;phrase=&apos;),
	   REPLACE(REPLACE(REPLACE(sk.keywords, &apos; &apos;, &apos;%20&apos;), &apos;:&apos;, &apos;%3A&apos;), &apos;#&apos;, &apos;%23&apos;),
	   IF(sk.last_tweet_id IS NULL, &apos;&apos;, CONCAT(&apos;&amp;since_id=&apos;, sk.last_tweet_id)),
	   IF(sk.language_code IS NULL, &apos;&apos;, CONCAT(&apos;&amp;lang=&apos;, sk.language_code)),
	   IF(sk.latitude IS NULL OR sk.longitude IS NULL OR sk.radius IS NULL OR sk.radius_unit_id IS NULL, &apos;&apos;, CONCAT(&apos;&amp;geocode=&apos;, sk.latitude, &apos;%2C&apos;, sk.longitude, &apos;%2C&apos;, sk.radius, sk.radius_unit_id)),
       &apos;&amp;rpp=&apos;,rpp.attribute_value,
       &apos;&amp;page=&apos;,jks.current_page
	) AS twitter_search_url,
	jks.current_page,
	max_pages.attribute_value AS max_pages,
    sk.keywords,
    sk.is_phrase,
    sk.language_code,
    sk.latitude,
    sk.longitude,
    sk.radius,
    sk.radius_unit_id,
	sk.priority,
	sk.source_topic_id,
	st.topic_description
FROM
	settings AS rpp,
	settings AS max_pages,
	job_keyword_searches AS jks INNER JOIN
	source_keywords AS sk ON jks.source_keyword_id = sk.id INNER JOIN
	source_topics AS st ON sk.source_topic_id = st.ID
WHERE
	rpp.attribute_id = &apos;RESULTSPERPAGE&apos; AND
	max_pages.attribute_id = &apos;MAX_PAGES&apos; AND
	sk.suspended &lt;&gt; &apos;Y&apos; AND
	jks.state_id IN (&apos;PENDINGSEARCH&apos;, &apos;SEARCHINPROGRESS&apos;)
ORDER BY
	sk.priority</sql>
    <limit>0</limit>
    <lookup/>
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>93</xloc>
      <yloc>555</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>staging_candidate_tweets</name>
    <type>InsertUpdate</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <commit>100</commit>
    <update_bypassed>Y</update_bypassed>
    <lookup>
      <schema/>
      <table>staging_candidate_tweets</table>
      <key>
        <name>tweet_id</name>
        <field>tweet_id</field>
        <condition>=</condition>
        <name2/>
      </key>
      <value>
        <name>tweet_id</name>
        <rename>tweet_id</rename>
        <update>Y</update>
      </value>
      <value>
        <name>tweet_status</name>
        <rename>tweet_status</rename>
        <update>Y</update>
      </value>
      <value>
        <name>tweet_dt</name>
        <rename>tweet_dt</rename>
        <update>Y</update>
      </value>
      <value>
        <name>from_user_screen_name</name>
        <rename>from_user_screen_name</rename>
        <update>Y</update>
      </value>
      <value>
        <name>tweet_source</name>
        <rename>tweet_source</rename>
        <update>Y</update>
      </value>
      <value>
        <name>dim_twitter_keyword_search_id</name>
        <rename>dim_twitter_search_id</rename>
        <update>Y</update>
      </value>
      <value>
        <name>priority</name>
        <rename>priority</rename>
        <update>Y</update>
      </value>
      <value>
        <name>sort_rank</name>
        <rename>sort_rank</rename>
        <update>Y</update>
      </value>
    </lookup>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1384</xloc>
      <yloc>35</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>undefined tweets</name>
    <type>Dummy</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>588</xloc>
      <yloc>155</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step_error_handling>
  </step_error_handling>
   <slave-step-copy-partition-distribution>
</slave-step-copy-partition-distribution>
   <slave_transformation>N</slave_transformation>
</transformation>

<transformation>
  <info>
    <name>Fetch Users</name>
    <description/>
    <extended_description/>
    <trans_version/>
    <trans_type>Normal</trans_type>
    <trans_status>0</trans_status>
    <directory>&#47;twitter_analytics</directory>
    <parameters>
    </parameters>
    <log>
<trans-log-table><connection/>
<schema/>
<table/>
<size_limit_lines/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STATUS</id><enabled>Y</enabled><name>STATUS</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name><subject/></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name><subject/></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name><subject/></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name><subject/></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name><subject/></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name><subject/></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>STARTDATE</id><enabled>Y</enabled><name>STARTDATE</name></field><field><id>ENDDATE</id><enabled>Y</enabled><name>ENDDATE</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>DEPDATE</id><enabled>Y</enabled><name>DEPDATE</name></field><field><id>REPLAYDATE</id><enabled>Y</enabled><name>REPLAYDATE</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></trans-log-table>
<perf-log-table><connection/>
<schema/>
<table/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>SEQ_NR</id><enabled>Y</enabled><name>SEQ_NR</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>INPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>INPUT_BUFFER_ROWS</name></field><field><id>OUTPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>OUTPUT_BUFFER_ROWS</name></field></perf-log-table>
<channel-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>LOGGING_OBJECT_TYPE</id><enabled>Y</enabled><name>LOGGING_OBJECT_TYPE</name></field><field><id>OBJECT_NAME</id><enabled>Y</enabled><name>OBJECT_NAME</name></field><field><id>OBJECT_COPY</id><enabled>Y</enabled><name>OBJECT_COPY</name></field><field><id>REPOSITORY_DIRECTORY</id><enabled>Y</enabled><name>REPOSITORY_DIRECTORY</name></field><field><id>FILENAME</id><enabled>Y</enabled><name>FILENAME</name></field><field><id>OBJECT_ID</id><enabled>Y</enabled><name>OBJECT_ID</name></field><field><id>OBJECT_REVISION</id><enabled>Y</enabled><name>OBJECT_REVISION</name></field><field><id>PARENT_CHANNEL_ID</id><enabled>Y</enabled><name>PARENT_CHANNEL_ID</name></field><field><id>ROOT_CHANNEL_ID</id><enabled>Y</enabled><name>ROOT_CHANNEL_ID</name></field></channel-log-table>
<step-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></step-log-table>
    </log>
    <maxdate>
      <connection/>
      <table/>
      <field/>
      <offset>0.0</offset>
      <maxdiff>0.0</maxdiff>
    </maxdate>
    <size_rowset>10000</size_rowset>
    <sleep_time_empty>50</sleep_time_empty>
    <sleep_time_full>50</sleep_time_full>
    <unique_connections>N</unique_connections>
    <feedback_shown>Y</feedback_shown>
    <feedback_size>50000</feedback_size>
    <using_thread_priorities>Y</using_thread_priorities>
    <shared_objects_file/>
    <capture_step_performance>N</capture_step_performance>
    <step_performance_capturing_delay>1000</step_performance_capturing_delay>
    <step_performance_capturing_size_limit/>
    <dependencies>
    </dependencies>
    <partitionschemas>
    </partitionschemas>
    <slaveservers>
    </slaveservers>
    <clusterschemas>
    </clusterschemas>
  <modified_user>admin</modified_user>
  <modified_date>2011&#47;09&#47;03 11:20:34.000</modified_date>
  </info>
  <notepads>
    <notepad>
      <note>We must commit for every individual record on this
transformation.

This is to ensure we capture all data, should we hit a
Twitter Rate Limit barrier, that we don&apos;t lose any data. </note>
      <xloc>49</xloc>
      <yloc>454</yloc>
      <width>272</width>
      <heigth>72</heigth>
      <fontname/>
      <fontsize>-1</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>0</fontcolorred>
      <fontcolorgreen>0</fontcolorgreen>
      <fontcolorblue>0</fontcolorblue>
      <backgroundcolorred>255</backgroundcolorred>
      <backgroundcolorgreen>255</backgroundcolorgreen>
      <backgroundcolorblue>0</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
  </notepads>
  <connection>
    <name>twitter_analytics</name>
    <server>localhost</server>
    <type>MYSQL</type>
    <access>Native</access>
    <database>topgun_twitter_analytics</database>
    <port>3306</port>
    <username>topgun</username>
    <password>Encrypted 2be98afc86aa7f2e4cb1ba265db95bac3</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>EXTRA_OPTION_MYSQL.defaultFetchSize</code><attribute>500</attribute></attribute>
      <attribute><code>EXTRA_OPTION_MYSQL.useCursorFetch</code><attribute>true</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>3306</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>STREAM_RESULTS</code><attribute>Y</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>N</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>N</attribute></attribute>
    </attributes>
  </connection>
  <order>
  <hop> <from>Get data from XML</from><to>Extract date &amp; time strings</to><enabled>Y</enabled> </hop>  <hop> <from>convert date string to native datetime</from><to>dim_twitter_users</to><enabled>Y</enabled> </hop>  <hop> <from>Convert color hex values</from><to>convert date string to native datetime</to><enabled>Y</enabled> </hop>  <hop> <from>Extract date &amp; time strings</from><to>Concatenate dates</to><enabled>Y</enabled> </hop>  <hop> <from>dim_twitter_users</from><to>Add current_snapshot, state_id</to><enabled>Y</enabled> </hop>  <hop> <from>Add current_snapshot, state_id</from><to>Get Current Time and Date</to><enabled>Y</enabled> </hop>  <hop> <from>Get Current Time and Date</from><to>staging_fact_twitter_users</to><enabled>Y</enabled> </hop>  <hop> <from>job_user_lookups</from><to>Twitter Profile lookup</to><enabled>Y</enabled> </hop>  <hop> <from>Get Current Time and Date</from><to>staging_fact_tweets</to><enabled>Y</enabled> </hop>  <hop> <from>Get Current Time and Date</from><to>job_user_lookups 2</to><enabled>Y</enabled> </hop>  <hop> <from>Check if rate limit has been exceeded</from><to>Abort</to><enabled>Y</enabled> </hop>  <hop> <from>Check if user was found</from><to>Delete missing user</to><enabled>Y</enabled> </hop>  <hop> <from>Twitter Profile lookup</from><to>Parse XML for errors</to><enabled>Y</enabled> </hop>  <hop> <from>Check if rate limit has been exceeded</from><to>Check if user was found</to><enabled>Y</enabled> </hop>  <hop> <from>Parse XML for errors</from><to>Check if rate limit has been exceeded</to><enabled>Y</enabled> </hop>  <hop> <from>Twitter Profile lookup</from><to>Get data from XML</to><enabled>Y</enabled> </hop>  <hop> <from>Check if user was found</from><to>Check if user is suspended</to><enabled>Y</enabled> </hop>  <hop> <from>Check if user is suspended</from><to>Delete suspended user</to><enabled>Y</enabled> </hop>  <hop> <from>validate HEX_profile_background_color</from><to>validate HEX_profile_text_color</to><enabled>Y</enabled> </hop>  <hop> <from>validate HEX_profile_text_color</from><to>validate HEX_profile_link_color</to><enabled>Y</enabled> </hop>  <hop> <from>validate HEX_profile_link_color</from><to>validate HEX_profile_sidebar_fill_color</to><enabled>Y</enabled> </hop>  <hop> <from>validate HEX_profile_sidebar_fill_color</from><to>validate HEX_profile_sidebar_border_color</to><enabled>Y</enabled> </hop>  <hop> <from>validate HEX_profile_sidebar_border_color</from><to>Convert NULL color values</to><enabled>Y</enabled> </hop>  <hop> <from>Convert NULL color values</from><to>Convert color hex values</to><enabled>Y</enabled> </hop>  <hop> <from>Concatenate dates</from><to>Add UTC timezone</to><enabled>Y</enabled> </hop>  <hop> <from>Add UTC timezone</from><to>Concat UTC timezone</to><enabled>Y</enabled> </hop>  <hop> <from>Concat UTC timezone</from><to>validate HEX_profile_background_color</to><enabled>Y</enabled> </hop>  </order>
  <step>
    <name>Abort</name>
    <type>Abort</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <row_threshold>1</row_threshold>
      <message>Goodbye transformation</message>
      <always_log_rows>Y</always_log_rows>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>263</xloc>
      <yloc>386</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Add UTC timezone</name>
    <type>Constant</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <name>utc_timezone</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif> UTC</nullif>
        <length>-1</length>
        <precision>-1</precision>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>836</xloc>
      <yloc>124</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Add current_snapshot, state_id</name>
    <type>Constant</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <name>current_snapshot</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif>Y</nullif>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>state_id</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif>LOOKUPCOMPLETE</nullif>
        <length>-1</length>
        <precision>-1</precision>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1391</xloc>
      <yloc>164</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Check if rate limit has been exceeded</name>
    <type>Validator</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<validate_all>N</validate_all>
<concat_errors>N</concat_errors>
<concat_separator>|</concat_separator>
       <validator_field><name>error_found</name>
<validation_name>check_rate_limit_exceeded</validation_name>
<max_length/>
<min_length/>
<null_allowed>Y</null_allowed>
<only_null_allowed>N</only_null_allowed>
<only_numeric_allowed>N</only_numeric_allowed>
<data_type>String</data_type>
<data_type_verified>Y</data_type_verified>
<conversion_mask/>
<decimal_symbol/>
<grouping_symbol/>
<max_value/>
<min_value/>
<start_string/>
<end_string/>
<start_string_not_allowed>Rate limit exceeded</start_string_not_allowed>
<end_string_not_allowed/>
<regular_expression/>
<regular_expression_not_allowed/>
<error_code/>
<error_description/>
<is_sourcing_values>N</is_sourcing_values>
<sourcing_step/>
<sourcing_field/>
<allowed_value></allowed_value></validator_field>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>263</xloc>
      <yloc>275</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Check if user is suspended</name>
    <type>Validator</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<validate_all>N</validate_all>
<concat_errors>N</concat_errors>
<concat_separator>|</concat_separator>
       <validator_field><name>error_found</name>
<validation_name>check user suspended</validation_name>
<max_length/>
<min_length/>
<null_allowed>Y</null_allowed>
<only_null_allowed>N</only_null_allowed>
<only_numeric_allowed>N</only_numeric_allowed>
<data_type>-</data_type>
<data_type_verified>N</data_type_verified>
<conversion_mask/>
<decimal_symbol/>
<grouping_symbol/>
<max_value/>
<min_value/>
<start_string/>
<end_string/>
<start_string_not_allowed>User has been suspended</start_string_not_allowed>
<end_string_not_allowed/>
<regular_expression/>
<regular_expression_not_allowed/>
<error_code/>
<error_description/>
<is_sourcing_values>N</is_sourcing_values>
<sourcing_step/>
<sourcing_field/>
<allowed_value></allowed_value></validator_field>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>676</xloc>
      <yloc>275</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Check if user was found</name>
    <type>Validator</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<validate_all>N</validate_all>
<concat_errors>N</concat_errors>
<concat_separator>|</concat_separator>
       <validator_field><name>error_found</name>
<validation_name>check user found</validation_name>
<max_length/>
<min_length/>
<null_allowed>Y</null_allowed>
<only_null_allowed>N</only_null_allowed>
<only_numeric_allowed>N</only_numeric_allowed>
<data_type>-</data_type>
<data_type_verified>N</data_type_verified>
<conversion_mask/>
<decimal_symbol/>
<grouping_symbol/>
<max_value/>
<min_value/>
<start_string/>
<end_string/>
<start_string_not_allowed>Not found</start_string_not_allowed>
<end_string_not_allowed/>
<regular_expression/>
<regular_expression_not_allowed/>
<error_code/>
<error_description/>
<is_sourcing_values>N</is_sourcing_values>
<sourcing_step/>
<sourcing_field/>
<allowed_value></allowed_value></validator_field>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>524</xloc>
      <yloc>275</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Concat UTC timezone</name>
    <type>Calculator</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <calculation><field_name>created_at_date</field_name>
<calc_type>ADD</calc_type>
<field_a>tmp_created_at_date</field_a>
<field_b>utc_timezone</field_b>
<field_c/>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<remove>N</remove>
<conversion_mask/>
<decimal_symbol/>
<grouping_symbol/>
<currency_symbol/>
</calculation>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>836</xloc>
      <yloc>195</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Concatenate dates</name>
    <type>Calculator</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <calculation><field_name>tmp_created_at_date</field_name>
<calc_type>ADD3</calc_type>
<field_a>date_wo_year</field_a>
<field_b>date_year</field_b>
<field_c>time_of_day</field_c>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<remove>N</remove>
<conversion_mask/>
<decimal_symbol/>
<grouping_symbol/>
<currency_symbol/>
</calculation>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>836</xloc>
      <yloc>53</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Convert NULL color values</name>
    <type>IfNull</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <replaceAllByValue/>
      <replaceAllMask/>
      <selectFields>Y</selectFields>
      <selectValuesType>N</selectValuesType>
    <valuetypes>
      </valuetypes>
    <fields>
      <field>
        <name>valid_HEX_profile_background_color</name>
        <value>000000</value>
        <mask/>
        </field>
      <field>
        <name>valid_HEX_profile_text_color</name>
        <value>000000</value>
        <mask/>
        </field>
      <field>
        <name>valid_HEX_profile_link_color</name>
        <value>000000</value>
        <mask/>
        </field>
      <field>
        <name>valid_HEX_profile_sidebar_fill_color</name>
        <value>000000</value>
        <mask/>
        </field>
      <field>
        <name>valid_HEX_profile_sidebar_border_color</name>
        <value>000000</value>
        <mask/>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1046</xloc>
      <yloc>555</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Convert color hex values</name>
    <type>Janino</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>profile_background_color</field_name>
<formula_string>new Integer(0).parseInt(valid_HEX_profile_background_color,16)</formula_string>
<value_type>Integer</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
       <formula><field_name>profile_text_color</field_name>
<formula_string>new Integer(0).parseInt(valid_HEX_profile_text_color,16)</formula_string>
<value_type>Integer</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
       <formula><field_name>profile_link_color</field_name>
<formula_string>new Integer(0).parseInt(valid_HEX_profile_link_color,16)</formula_string>
<value_type>Integer</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
       <formula><field_name>profile_sidebar_fill_color</field_name>
<formula_string>new Integer(0).parseInt(valid_HEX_profile_sidebar_fill_color,16)</formula_string>
<value_type>Integer</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
       <formula><field_name>profile_sidebar_border_color</field_name>
<formula_string>new Integer(0).parseInt(valid_HEX_profile_sidebar_border_color,16)</formula_string>
<value_type>Integer</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1046</xloc>
      <yloc>53</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Delete missing user</name>
    <type>Delete</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <commit>1</commit>
    <lookup>
      <schema/>
      <table>job_user_lookups</table>
      <key>
        <name>job_id</name>
        <field>ID</field>
        <condition>=</condition>
        <name2/>
      </key>
    </lookup>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>524</xloc>
      <yloc>386</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Delete suspended user</name>
    <type>Delete</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <commit>1</commit>
    <lookup>
      <schema/>
      <table>job_user_lookups</table>
      <key>
        <name>job_id</name>
        <field>ID</field>
        <condition>=</condition>
        <name2/>
      </key>
    </lookup>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>676</xloc>
      <yloc>386</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Extract date &amp; time strings</name>
    <type>RegexEval</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <script><![CDATA[^[a-z][a-z][a-z] ([a-z][a-z][a-z] [0-9][0-9])( [0-9][0-9]:[0-9][0-9]:[0-9][0-9]) \+[0-9][0-9][0-9][0-9]( [0-9][0-9][0-9][0-9])$]]></script>    <matcher>created_at</matcher>
    <resultfieldname>regex_result</resultfieldname>
    <usevar>N</usevar>
    <allowcapturegroups>Y</allowcapturegroups>
    <canoneq>N</canoneq>
    <caseinsensitive>Y</caseinsensitive>
    <comment>N</comment>
    <dotall>N</dotall>
    <multiline>N</multiline>
    <unicode>N</unicode>
    <unix>N</unix>
    <fields>
      <field>
        <name>date_wo_year</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
      </field>
      <field>
        <name>time_of_day</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
      </field>
      <field>
        <name>date_year</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>643</xloc>
      <yloc>53</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Get Current Time and Date</name>
    <type>SystemInfo</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <name>snapshot_datetime</name>
        <type>system date (fixed)</type>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1391</xloc>
      <yloc>275</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Get data from XML</name>
    <type>getXMLData</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <include>N</include>
    <include_field/>
    <rownum>N</rownum>
    <addresultfile>N</addresultfile>
    <namespaceaware>N</namespaceaware>
    <ignorecomments>N</ignorecomments>
    <readurl>N</readurl>
    <validating>N</validating>
    <usetoken>N</usetoken>
    <IsIgnoreEmptyFile>N</IsIgnoreEmptyFile>
    <doNotFailIfNoFile>Y</doNotFailIfNoFile>
    <rownum_field/>
    <encoding>UTF-8</encoding>
    <file>
      <name/>
      <filemask/>
      <file_required>N</file_required>
      <include_subfolders/>
    </file>
    <fields>
      <field>
        <name>twitter_id</name>
        <xpath>id</xpath>
        <element_type>node</element_type>
        <type>Integer</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>name</name>
        <xpath>name</xpath>
        <element_type>node</element_type>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>screen_name</name>
        <xpath>screen_name</xpath>
        <element_type>node</element_type>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>location</name>
        <xpath>location</xpath>
        <element_type>node</element_type>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>description</name>
        <xpath>description</xpath>
        <element_type>node</element_type>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>profile_image_url</name>
        <xpath>profile_image_url</xpath>
        <element_type>node</element_type>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>url</name>
        <xpath>url</xpath>
        <element_type>node</element_type>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>protected</name>
        <xpath>protected</xpath>
        <element_type>node</element_type>
        <type>Boolean</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>created_at</name>
        <xpath>created_at</xpath>
        <element_type>node</element_type>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>utc_offset</name>
        <xpath>utc_offset</xpath>
        <element_type>node</element_type>
        <type>Integer</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>time_zone</name>
        <xpath>time_zone</xpath>
        <element_type>node</element_type>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>HEX_profile_background_color</name>
        <xpath>profile_background_color</xpath>
        <element_type>node</element_type>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>HEX_profile_text_color</name>
        <xpath>profile_text_color</xpath>
        <element_type>node</element_type>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>HEX_profile_link_color</name>
        <xpath>profile_link_color</xpath>
        <element_type>node</element_type>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>HEX_profile_sidebar_fill_color</name>
        <xpath>profile_sidebar_fill_color</xpath>
        <element_type>node</element_type>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>HEX_profile_sidebar_border_color</name>
        <xpath>profile_sidebar_border_color</xpath>
        <element_type>node</element_type>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>profile_background_image_url</name>
        <xpath>profile_background_image_url</xpath>
        <element_type>node</element_type>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>profile_background_tile</name>
        <xpath>profile_background_tile</xpath>
        <element_type>node</element_type>
        <type>Boolean</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>followers_count</name>
        <xpath>followers_count</xpath>
        <element_type>node</element_type>
        <type>Integer</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>friends_count</name>
        <xpath>friends_count</xpath>
        <element_type>node</element_type>
        <type>Integer</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>statuses_count</name>
        <xpath>statuses_count</xpath>
        <element_type>node</element_type>
        <type>Integer</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>favourites_count</name>
        <xpath>favourites_count</xpath>
        <element_type>node</element_type>
        <type>Integer</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
    </fields>
    <limit>0</limit>
    <loopxpath>&#47;user</loopxpath>
    <IsInFields>Y</IsInFields>
    <IsAFile>N</IsAFile>
    <XmlField>result</XmlField>
    <prunePath/>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>453</xloc>
      <yloc>53</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Parse XML for errors</name>
    <type>getXMLData</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <include>N</include>
    <include_field/>
    <rownum>N</rownum>
    <addresultfile>N</addresultfile>
    <namespaceaware>N</namespaceaware>
    <ignorecomments>N</ignorecomments>
    <readurl>N</readurl>
    <validating>N</validating>
    <usetoken>N</usetoken>
    <IsIgnoreEmptyFile>N</IsIgnoreEmptyFile>
    <doNotFailIfNoFile>Y</doNotFailIfNoFile>
    <rownum_field/>
    <encoding>UTF-8</encoding>
    <file>
      <name/>
      <filemask/>
      <file_required>N</file_required>
      <include_subfolders/>
    </file>
    <fields>
      <field>
        <name>error_found</name>
        <xpath>error</xpath>
        <element_type>node</element_type>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
    </fields>
    <limit>0</limit>
    <loopxpath>&#47;hash</loopxpath>
    <IsInFields>Y</IsInFields>
    <IsAFile>N</IsAFile>
    <XmlField>result</XmlField>
    <prunePath/>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>263</xloc>
      <yloc>164</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Twitter Profile lookup</name>
    <type>HTTP</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <url/>
    <urlInField>Y</urlInField>
    <urlField>lookup_url</urlField>
    <encoding/>
    <httpLogin/>
    <httpPassword/>
    <proxyHost/>
    <proxyPort/>
    <lookup>
    </lookup>
    <result>
      <name>result</name>
      <code/>
    </result>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>263</xloc>
      <yloc>53</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>convert date string to native datetime</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>        <select_unspecified>N</select_unspecified>
      <meta>        <name>twitter_id</name>
        <rename>twitter_id</rename>
        <type>-</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>name</name>
        <rename>name</rename>
        <type>-</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>screen_name</name>
        <rename>screen_name</rename>
        <type>-</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>location</name>
        <rename>location</rename>
        <type>-</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>description</name>
        <rename>description</rename>
        <type>-</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>profile_image_url</name>
        <rename>profile_image_url</rename>
        <type>-</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>url</name>
        <rename>url</rename>
        <type>-</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>protected</name>
        <rename>protected</rename>
        <type>-</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>created_at_date</name>
        <rename>created_at_date</rename>
        <type>Date</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>MMM dd yyyy HH:mm:ss</conversion_mask>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>utc_offset</name>
        <rename>utc_offset</rename>
        <type>-</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>time_zone</name>
        <rename>time_zone</rename>
        <type>-</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>profile_background_color</name>
        <rename>profile_background_color</rename>
        <type>-</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>profile_text_color</name>
        <rename>profile_text_color</rename>
        <type>-</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>profile_link_color</name>
        <rename>profile_link_color</rename>
        <type>-</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>profile_sidebar_fill_color</name>
        <rename>profile_sidebar_fill_color</rename>
        <type>-</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>profile_sidebar_border_color</name>
        <rename>profile_sidebar_border_color</rename>
        <type>-</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>followers_count</name>
        <rename>followers_count</rename>
        <type>-</type>
        <length>-2</length>
        <precision>0</precision>
        <conversion_mask/>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>friends_count</name>
        <rename>friends_count</rename>
        <type>-</type>
        <length>-2</length>
        <precision>0</precision>
        <conversion_mask/>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>statuses_count</name>
        <rename>statuses_count</rename>
        <type>-</type>
        <length>-2</length>
        <precision>0</precision>
        <conversion_mask/>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>favourites_count</name>
        <rename>favourites_count</rename>
        <type>-</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1201</xloc>
      <yloc>53</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>dim_twitter_users</name>
    <type>DimensionLookup</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <schema/>
      <table>dim_twitter_users</table>
      <connection>twitter_analytics</connection>
      <commit>1</commit>
      <update>Y</update>
      <fields>
        <key>
          <name>twitter_id</name>
          <lookup>twitter_id</lookup>
        </key>
        <date>
          <name/>
          <from>effective_begin_date</from>
          <to>effective_end_date</to>
        </date>
        <field>
          <name>name</name>
          <lookup>name</lookup>
          <update>Insert</update>
        </field>
        <field>
          <name>screen_name</name>
          <lookup>screen_name</lookup>
          <update>Insert</update>
        </field>
        <field>
          <name>location</name>
          <lookup>location</lookup>
          <update>Insert</update>
        </field>
        <field>
          <name>description</name>
          <lookup>description</lookup>
          <update>Insert</update>
        </field>
        <field>
          <name>profile_image_url</name>
          <lookup>profile_image_url</lookup>
          <update>Insert</update>
        </field>
        <field>
          <name>url</name>
          <lookup>url</lookup>
          <update>Insert</update>
        </field>
        <field>
          <name>protected</name>
          <lookup>protected</lookup>
          <update>Insert</update>
        </field>
        <field>
          <name>utc_offset</name>
          <lookup>utc_offset</lookup>
          <update>Insert</update>
        </field>
        <field>
          <name>time_zone</name>
          <lookup>time_zone</lookup>
          <update>Insert</update>
        </field>
        <field>
          <name>profile_text_color</name>
          <lookup>profile_text_color</lookup>
          <update>Insert</update>
        </field>
        <field>
          <name>profile_link_color</name>
          <lookup>profile_link_color</lookup>
          <update>Insert</update>
        </field>
        <field>
          <name>profile_sidebar_fill_color</name>
          <lookup>profile_sidebar_fill_color</lookup>
          <update>Insert</update>
        </field>
        <field>
          <name>profile_sidebar_border_color</name>
          <lookup>profile_sidebar_border_color</lookup>
          <update>Insert</update>
        </field>
        <field>
          <name>profile_background_color</name>
          <lookup>profile_background_color</lookup>
          <update>Insert</update>
        </field>
        <field>
          <name>profile_background_tile</name>
          <lookup>profile_background_tile</lookup>
          <update>Insert</update>
        </field>
        <return>
          <name>ID</name>
          <rename>dim_twitter_user_id</rename>
          <creation_method>autoinc</creation_method>
          <use_autoinc>Y</use_autoinc>
          <version>dim_version</version>
        </return>
      </fields>
      <sequence/>
      <min_year>1900</min_year>
      <max_year>2199</max_year>
      <cache_size>-1</cache_size>
      <preload_cache>N</preload_cache>
      <use_start_date_alternative>Y</use_start_date_alternative>
      <start_date_alternative>column_value</start_date_alternative>
      <start_date_field_name>created_at_date</start_date_field_name>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1391</xloc>
      <yloc>53</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>job_user_lookups</name>
    <type>TableInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <sql>SELECT
	ID AS job_id,
	CONCAT(&apos;http:&#47;&#47;twitter.com&#47;users&#47;show&#47;&apos;, twitter_screen_name, &apos;.xml&apos;) AS lookup_url
FROM 
	job_user_lookups
WHERE
	state_id = &apos;PENDINGLOOKUP&apos;
</sql>
    <limit>0</limit>
    <lookup/>
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>73</xloc>
      <yloc>53</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>job_user_lookups 2</name>
    <type>Update</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <skip_lookup>N</skip_lookup>
    <commit>1</commit>
    <error_ignored>N</error_ignored>
    <ignore_flag_field/>
    <lookup>
      <schema/>
      <table>job_user_lookups</table>
      <key>
        <name>job_id</name>
        <field>ID</field>
        <condition>=</condition>
        <name2/>
        </key>
      <value>
        <name>state_id</name>
        <rename>state_id</rename>
        </value>
      </lookup>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1105</xloc>
      <yloc>386</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>staging_fact_tweets</name>
    <type>Update</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <skip_lookup>N</skip_lookup>
    <commit>1</commit>
    <error_ignored>N</error_ignored>
    <ignore_flag_field/>
    <lookup>
      <schema/>
      <table>staging_fact_tweets</table>
      <key>
        <name>screen_name</name>
        <field>twitter_from_screen_name</field>
        <condition>=</condition>
        <name2/>
        </key>
      <value>
        <name>from_dim_twitter_user_id</name>
        <rename>dim_twitter_user_id</rename>
        </value>
      <value>
        <name>followers_count</name>
        <rename>followers_count</rename>
        </value>
      <value>
        <name>following_count</name>
        <rename>friends_count</rename>
        </value>
      </lookup>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1245</xloc>
      <yloc>386</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>staging_fact_twitter_users</name>
    <type>InsertUpdate</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <commit>1</commit>
    <update_bypassed>Y</update_bypassed>
    <lookup>
      <schema/>
      <table>staging_fact_twitter_users</table>
      <key>
        <name>twitter_id</name>
        <field>twitter_id</field>
        <condition>=</condition>
        <name2/>
      </key>
      <value>
        <name>twitter_id</name>
        <rename>twitter_id</rename>
        <update>N</update>
      </value>
      <value>
        <name>followers_count</name>
        <rename>followers_count</rename>
        <update>N</update>
      </value>
      <value>
        <name>friends_count</name>
        <rename>friends_count</rename>
        <update>N</update>
      </value>
      <value>
        <name>statuses_count</name>
        <rename>statuses_count</rename>
        <update>N</update>
      </value>
      <value>
        <name>dim_twitter_user_id</name>
        <rename>dim_twitter_user_id</rename>
        <update>N</update>
      </value>
      <value>
        <name>favourites_count</name>
        <rename>favourites_count</rename>
        <update>N</update>
      </value>
      <value>
        <name>current_snapshot</name>
        <rename>current_snapshot</rename>
        <update>N</update>
      </value>
      <value>
        <name>snapshot_datetime</name>
        <rename>snapshot_datetime</rename>
        <update>N</update>
      </value>
    </lookup>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1391</xloc>
      <yloc>386</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>validate HEX_profile_background_color</name>
    <type>RegexEval</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <script><![CDATA[([0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F])]]></script>    <matcher>HEX_profile_background_color</matcher>
    <resultfieldname>Zresult1</resultfieldname>
    <usevar>N</usevar>
    <allowcapturegroups>Y</allowcapturegroups>
    <canoneq>N</canoneq>
    <caseinsensitive>N</caseinsensitive>
    <comment>N</comment>
    <dotall>N</dotall>
    <multiline>N</multiline>
    <unicode>N</unicode>
    <unix>N</unix>
    <fields>
      <field>
        <name>valid_HEX_profile_background_color</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>836</xloc>
      <yloc>266</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>validate HEX_profile_link_color</name>
    <type>RegexEval</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <script><![CDATA[([0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F])]]></script>    <matcher>HEX_profile_link_color</matcher>
    <resultfieldname>Zresult3</resultfieldname>
    <usevar>N</usevar>
    <allowcapturegroups>Y</allowcapturegroups>
    <canoneq>N</canoneq>
    <caseinsensitive>N</caseinsensitive>
    <comment>N</comment>
    <dotall>N</dotall>
    <multiline>N</multiline>
    <unicode>N</unicode>
    <unix>N</unix>
    <fields>
      <field>
        <name>valid_HEX_profile_link_color</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>836</xloc>
      <yloc>408</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>validate HEX_profile_sidebar_border_color</name>
    <type>RegexEval</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <script><![CDATA[([0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F])]]></script>    <matcher>HEX_profile_sidebar_border_color</matcher>
    <resultfieldname>Zresult5</resultfieldname>
    <usevar>N</usevar>
    <allowcapturegroups>Y</allowcapturegroups>
    <canoneq>N</canoneq>
    <caseinsensitive>N</caseinsensitive>
    <comment>N</comment>
    <dotall>N</dotall>
    <multiline>N</multiline>
    <unicode>N</unicode>
    <unix>N</unix>
    <fields>
      <field>
        <name>valid_HEX_profile_sidebar_border_color</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>836</xloc>
      <yloc>550</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>validate HEX_profile_sidebar_fill_color</name>
    <type>RegexEval</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <script><![CDATA[([0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F])]]></script>    <matcher>HEX_profile_sidebar_fill_color</matcher>
    <resultfieldname>Zresult4</resultfieldname>
    <usevar>N</usevar>
    <allowcapturegroups>Y</allowcapturegroups>
    <canoneq>N</canoneq>
    <caseinsensitive>N</caseinsensitive>
    <comment>N</comment>
    <dotall>N</dotall>
    <multiline>N</multiline>
    <unicode>N</unicode>
    <unix>N</unix>
    <fields>
      <field>
        <name>valid_HEX_profile_sidebar_fill_color</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>836</xloc>
      <yloc>479</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>validate HEX_profile_text_color</name>
    <type>RegexEval</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <script><![CDATA[([0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F])]]></script>    <matcher>HEX_profile_text_color</matcher>
    <resultfieldname>Zresult2</resultfieldname>
    <usevar>N</usevar>
    <allowcapturegroups>Y</allowcapturegroups>
    <canoneq>N</canoneq>
    <caseinsensitive>N</caseinsensitive>
    <comment>N</comment>
    <dotall>N</dotall>
    <multiline>N</multiline>
    <unicode>N</unicode>
    <unix>N</unix>
    <fields>
      <field>
        <name>valid_HEX_profile_text_color</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>836</xloc>
      <yloc>337</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step_error_handling>
      <error>
        <source_step>Check if rate limit has been exceeded</source_step>
        <target_step>Abort</target_step>
        <is_enabled>Y</is_enabled>
        <nr_valuename/>
        <descriptions_valuename/>
        <fields_valuename/>
        <codes_valuename/>
        <max_errors>-1</max_errors>
        <max_pct_errors>-1</max_pct_errors>
        <min_pct_rows>-1</min_pct_rows>
      </error>
      <error>
        <source_step>Check if user is suspended</source_step>
        <target_step>Delete suspended user</target_step>
        <is_enabled>Y</is_enabled>
        <nr_valuename/>
        <descriptions_valuename/>
        <fields_valuename/>
        <codes_valuename/>
        <max_errors>-1</max_errors>
        <max_pct_errors>-1</max_pct_errors>
        <min_pct_rows>-1</min_pct_rows>
      </error>
      <error>
        <source_step>Check if user was found</source_step>
        <target_step>Delete missing user</target_step>
        <is_enabled>Y</is_enabled>
        <nr_valuename/>
        <descriptions_valuename/>
        <fields_valuename/>
        <codes_valuename/>
        <max_errors>-1</max_errors>
        <max_pct_errors>-1</max_pct_errors>
        <min_pct_rows>-1</min_pct_rows>
      </error>
  </step_error_handling>
   <slave-step-copy-partition-distribution>
</slave-step-copy-partition-distribution>
   <slave_transformation>N</slave_transformation>
</transformation>

<transformation>
  <info>
    <name>Load dim_location</name>
    <description/>
    <extended_description/>
    <trans_version/>
    <trans_type>Normal</trans_type>
    <trans_status>0</trans_status>
    <directory>&#47;twitter_analytics</directory>
    <parameters>
    </parameters>
    <log>
<trans-log-table><connection/>
<schema/>
<table/>
<size_limit_lines/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STATUS</id><enabled>Y</enabled><name>STATUS</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name><subject/></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name><subject/></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name><subject/></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name><subject/></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name><subject/></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name><subject/></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>STARTDATE</id><enabled>Y</enabled><name>STARTDATE</name></field><field><id>ENDDATE</id><enabled>Y</enabled><name>ENDDATE</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>DEPDATE</id><enabled>Y</enabled><name>DEPDATE</name></field><field><id>REPLAYDATE</id><enabled>Y</enabled><name>REPLAYDATE</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></trans-log-table>
<perf-log-table><connection/>
<schema/>
<table/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>SEQ_NR</id><enabled>Y</enabled><name>SEQ_NR</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>INPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>INPUT_BUFFER_ROWS</name></field><field><id>OUTPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>OUTPUT_BUFFER_ROWS</name></field></perf-log-table>
<channel-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>LOGGING_OBJECT_TYPE</id><enabled>Y</enabled><name>LOGGING_OBJECT_TYPE</name></field><field><id>OBJECT_NAME</id><enabled>Y</enabled><name>OBJECT_NAME</name></field><field><id>OBJECT_COPY</id><enabled>Y</enabled><name>OBJECT_COPY</name></field><field><id>REPOSITORY_DIRECTORY</id><enabled>Y</enabled><name>REPOSITORY_DIRECTORY</name></field><field><id>FILENAME</id><enabled>Y</enabled><name>FILENAME</name></field><field><id>OBJECT_ID</id><enabled>Y</enabled><name>OBJECT_ID</name></field><field><id>OBJECT_REVISION</id><enabled>Y</enabled><name>OBJECT_REVISION</name></field><field><id>PARENT_CHANNEL_ID</id><enabled>Y</enabled><name>PARENT_CHANNEL_ID</name></field><field><id>ROOT_CHANNEL_ID</id><enabled>Y</enabled><name>ROOT_CHANNEL_ID</name></field></channel-log-table>
<step-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></step-log-table>
    </log>
    <maxdate>
      <connection/>
      <table/>
      <field/>
      <offset>0.0</offset>
      <maxdiff>0.0</maxdiff>
    </maxdate>
    <size_rowset>10000</size_rowset>
    <sleep_time_empty>50</sleep_time_empty>
    <sleep_time_full>50</sleep_time_full>
    <unique_connections>N</unique_connections>
    <feedback_shown>Y</feedback_shown>
    <feedback_size>50000</feedback_size>
    <using_thread_priorities>Y</using_thread_priorities>
    <shared_objects_file/>
    <capture_step_performance>N</capture_step_performance>
    <step_performance_capturing_delay>1000</step_performance_capturing_delay>
    <step_performance_capturing_size_limit/>
    <dependencies>
    </dependencies>
    <partitionschemas>
    </partitionschemas>
    <slaveservers>
    </slaveservers>
    <clusterschemas>
    </clusterschemas>
  <modified_user>admin</modified_user>
  <modified_date>2011&#47;09&#47;03 11:20:35.000</modified_date>
  </info>
  <notepads>
  </notepads>
  <connection>
    <name>twitter_analytics</name>
    <server>localhost</server>
    <type>MYSQL</type>
    <access>Native</access>
    <database>topgun_twitter_analytics</database>
    <port>3306</port>
    <username>topgun</username>
    <password>Encrypted 2be98afc86aa7f2e4cb1ba265db95bac3</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>EXTRA_OPTION_MYSQL.defaultFetchSize</code><attribute>500</attribute></attribute>
      <attribute><code>EXTRA_OPTION_MYSQL.useCursorFetch</code><attribute>true</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>3306</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>STREAM_RESULTS</code><attribute>Y</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>N</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>N</attribute></attribute>
    </attributes>
  </connection>
  <order>
  <hop> <from>dim_location</from><to>staging_fact_tweets</to><enabled>Y</enabled> </hop>  <hop> <from>dim_location</from><to>staging_fact_twitter_users</to><enabled>Y</enabled> </hop>  <hop> <from>Extract latitude&#47;longitude</from><to>dim_location</to><enabled>Y</enabled> </hop>  <hop> <from>staging_fact_tweets, dim_twitter_users, staging_fact_twitter_users</from><to>Extract latitude&#47;longitude</to><enabled>Y</enabled> </hop>  </order>
  <step>
    <name>Extract latitude&#47;longitude</name>
    <type>RegexEval</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <script><![CDATA[[^\-0-9]*(\-?[0-9]?[0-9]?[0-9]\.?[0-9]*),(-?[0-9]?[0-9]?[0-9]\.?[0-9]*).*]]></script>    <matcher>location</matcher>
    <resultfieldname>found_latlon</resultfieldname>
    <usevar>N</usevar>
    <allowcapturegroups>Y</allowcapturegroups>
    <canoneq>N</canoneq>
    <caseinsensitive>N</caseinsensitive>
    <comment>N</comment>
    <dotall>N</dotall>
    <multiline>N</multiline>
    <unicode>N</unicode>
    <unix>N</unix>
    <fields>
      <field>
        <name>latitude</name>
        <type>Number</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
      </field>
      <field>
        <name>longitude</name>
        <type>Number</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>571</xloc>
      <yloc>108</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>dim_location</name>
    <type>DimensionLookup</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <schema/>
      <table>dim_location</table>
      <connection>twitter_analytics</connection>
      <commit>1</commit>
      <update>Y</update>
      <fields>
        <key>
          <name>location</name>
          <lookup>raw_location</lookup>
        </key>
        <date>
          <name/>
          <from>eff_begin_dt</from>
          <to>eff_end_dt</to>
        </date>
        <field>
          <name>latitude</name>
          <lookup>latitude</lookup>
          <update>Insert</update>
        </field>
        <field>
          <name>longitude</name>
          <lookup>longitude</lookup>
          <update>Insert</update>
        </field>
        <field>
          <name>is_derived_from_profile</name>
          <lookup>is_derived_from_profile</lookup>
          <update>Insert</update>
        </field>
        <return>
          <name>ID</name>
          <rename>dim_location_id</rename>
          <creation_method>autoinc</creation_method>
          <use_autoinc>Y</use_autoinc>
          <version>dim_version</version>
        </return>
      </fields>
      <sequence/>
      <min_year>2009</min_year>
      <max_year>2199</max_year>
      <cache_size>5000</cache_size>
      <preload_cache>N</preload_cache>
      <use_start_date_alternative>N</use_start_date_alternative>
      <start_date_alternative>none</start_date_alternative>
      <start_date_field_name/>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>783</xloc>
      <yloc>108</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>staging_fact_tweets</name>
    <type>Update</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <skip_lookup>N</skip_lookup>
    <commit>100</commit>
    <error_ignored>N</error_ignored>
    <ignore_flag_field/>
    <lookup>
      <schema/>
      <table>staging_fact_tweets</table>
      <key>
        <name>sft_id</name>
        <field>ID</field>
        <condition>=</condition>
        <name2/>
        </key>
      <value>
        <name>dim_location_id</name>
        <rename>dim_location_id</rename>
        </value>
      </lookup>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1005</xloc>
      <yloc>56</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>staging_fact_tweets, dim_twitter_users, staging_fact_twitter_users</name>
    <type>TableInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <sql>SELECT
	sft.id AS sft_id,
	sftu.id AS sftu_id,
	dtu.location,
	1 AS is_derived_from_profile
FROM
	staging_fact_tweets AS sft INNER JOIN
	dim_twitter_users AS dtu ON sft.from_dim_twitter_user_id = dtu.id INNER JOIN
	staging_fact_twitter_users AS sftu ON dtu.id = sftu.dim_twitter_user_id</sql>
    <limit>0</limit>
    <lookup/>
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>147</xloc>
      <yloc>108</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>staging_fact_twitter_users</name>
    <type>Update</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <skip_lookup>N</skip_lookup>
    <commit>100</commit>
    <error_ignored>N</error_ignored>
    <ignore_flag_field/>
    <lookup>
      <schema/>
      <table>staging_fact_twitter_users</table>
      <key>
        <name>sftu_id</name>
        <field>ID</field>
        <condition>=</condition>
        <name2/>
        </key>
      <value>
        <name>dim_location_id</name>
        <rename>dim_location_id</rename>
        </value>
      </lookup>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1003</xloc>
      <yloc>194</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step_error_handling>
  </step_error_handling>
   <slave-step-copy-partition-distribution>
</slave-step-copy-partition-distribution>
   <slave_transformation>N</slave_transformation>
</transformation>

<transformation>
  <info>
    <name>Load dim_time</name>
    <description/>
    <extended_description/>
    <trans_version/>
    <trans_type>Normal</trans_type>
    <trans_status>0</trans_status>
    <directory>&#47;twitter_analytics</directory>
    <parameters>
    </parameters>
    <log>
<trans-log-table><connection/>
<schema/>
<table/>
<size_limit_lines/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STATUS</id><enabled>Y</enabled><name>STATUS</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name><subject/></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name><subject/></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name><subject/></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name><subject/></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name><subject/></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name><subject/></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>STARTDATE</id><enabled>Y</enabled><name>STARTDATE</name></field><field><id>ENDDATE</id><enabled>Y</enabled><name>ENDDATE</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>DEPDATE</id><enabled>Y</enabled><name>DEPDATE</name></field><field><id>REPLAYDATE</id><enabled>Y</enabled><name>REPLAYDATE</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></trans-log-table>
<perf-log-table><connection/>
<schema/>
<table/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>SEQ_NR</id><enabled>Y</enabled><name>SEQ_NR</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>INPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>INPUT_BUFFER_ROWS</name></field><field><id>OUTPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>OUTPUT_BUFFER_ROWS</name></field></perf-log-table>
<channel-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>LOGGING_OBJECT_TYPE</id><enabled>Y</enabled><name>LOGGING_OBJECT_TYPE</name></field><field><id>OBJECT_NAME</id><enabled>Y</enabled><name>OBJECT_NAME</name></field><field><id>OBJECT_COPY</id><enabled>Y</enabled><name>OBJECT_COPY</name></field><field><id>REPOSITORY_DIRECTORY</id><enabled>Y</enabled><name>REPOSITORY_DIRECTORY</name></field><field><id>FILENAME</id><enabled>Y</enabled><name>FILENAME</name></field><field><id>OBJECT_ID</id><enabled>Y</enabled><name>OBJECT_ID</name></field><field><id>OBJECT_REVISION</id><enabled>Y</enabled><name>OBJECT_REVISION</name></field><field><id>PARENT_CHANNEL_ID</id><enabled>Y</enabled><name>PARENT_CHANNEL_ID</name></field><field><id>ROOT_CHANNEL_ID</id><enabled>Y</enabled><name>ROOT_CHANNEL_ID</name></field></channel-log-table>
<step-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></step-log-table>
    </log>
    <maxdate>
      <connection/>
      <table/>
      <field/>
      <offset>0.0</offset>
      <maxdiff>0.0</maxdiff>
    </maxdate>
    <size_rowset>10000</size_rowset>
    <sleep_time_empty>50</sleep_time_empty>
    <sleep_time_full>50</sleep_time_full>
    <unique_connections>N</unique_connections>
    <feedback_shown>Y</feedback_shown>
    <feedback_size>50000</feedback_size>
    <using_thread_priorities>Y</using_thread_priorities>
    <shared_objects_file/>
    <capture_step_performance>N</capture_step_performance>
    <step_performance_capturing_delay>1000</step_performance_capturing_delay>
    <step_performance_capturing_size_limit/>
    <dependencies>
    </dependencies>
    <partitionschemas>
    </partitionschemas>
    <slaveservers>
    </slaveservers>
    <clusterschemas>
    </clusterschemas>
  <modified_user>admin</modified_user>
  <modified_date>2011&#47;09&#47;03 11:20:35.000</modified_date>
  </info>
  <notepads>
  </notepads>
  <connection>
    <name>twitter_analytics</name>
    <server>localhost</server>
    <type>MYSQL</type>
    <access>Native</access>
    <database>topgun_twitter_analytics</database>
    <port>3306</port>
    <username>topgun</username>
    <password>Encrypted 2be98afc86aa7f2e4cb1ba265db95bac3</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>EXTRA_OPTION_MYSQL.defaultFetchSize</code><attribute>500</attribute></attribute>
      <attribute><code>EXTRA_OPTION_MYSQL.useCursorFetch</code><attribute>true</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>3306</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>STREAM_RESULTS</code><attribute>Y</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>N</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>N</attribute></attribute>
    </attributes>
  </connection>
  <order>
  <hop> <from>staging_fact_tweets, dim_twitter_users</from><to>dim_time</to><enabled>Y</enabled> </hop>  <hop> <from>dim_time</from><to>staging_fact_tweets</to><enabled>Y</enabled> </hop>  </order>
  <step>
    <name>dim_time</name>
    <type>DimensionLookup</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <schema/>
      <table>dim_time</table>
      <connection>twitter_analytics</connection>
      <commit>100</commit>
      <update>Y</update>
      <fields>
        <key>
          <name>utc_datetime</name>
          <lookup>utc_datetime</lookup>
        </key>
        <key>
          <name>utc_offset</name>
          <lookup>utc_offset</lookup>
        </key>
        <date>
          <name/>
          <from>placeholder_eff_begin_dt</from>
          <to>placeholder_eff_end_dt</to>
        </date>
        <field>
          <name>local_datetime</name>
          <lookup>local_datetime</lookup>
          <update>Punch through</update>
        </field>
        <field>
          <name>local_day_of_week</name>
          <lookup>local_day_of_week</lookup>
          <update>Punch through</update>
        </field>
        <field>
          <name>local_day_number_in_month</name>
          <lookup>local_day_number_in_month</lookup>
          <update>Punch through</update>
        </field>
        <field>
          <name>local_week_number_in_year</name>
          <lookup>local_week_number_in_year</lookup>
          <update>Punch through</update>
        </field>
        <field>
          <name>local_month</name>
          <lookup>local_month</lookup>
          <update>Punch through</update>
        </field>
        <field>
          <name>local_quarter</name>
          <lookup>local_quarter</lookup>
          <update>Punch through</update>
        </field>
        <field>
          <name>local_weekday_flag</name>
          <lookup>local_weekday_flag</lookup>
          <update>Punch through</update>
        </field>
        <field>
          <name>local_last_day_in_month_flag</name>
          <lookup>local_last_day_in_month_flag</lookup>
          <update>Punch through</update>
        </field>
        <field>
          <name>local_hour</name>
          <lookup>local_hour</lookup>
          <update>Punch through</update>
        </field>
        <return>
          <name>ID</name>
          <rename>dim_time_id</rename>
          <creation_method>autoinc</creation_method>
          <use_autoinc>Y</use_autoinc>
          <version>placeholder_version</version>
        </return>
      </fields>
      <sequence/>
      <min_year>2009</min_year>
      <max_year>2199</max_year>
      <cache_size>5000</cache_size>
      <preload_cache>N</preload_cache>
      <use_start_date_alternative>N</use_start_date_alternative>
      <start_date_alternative>none</start_date_alternative>
      <start_date_field_name/>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>405</xloc>
      <yloc>80</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>staging_fact_tweets</name>
    <type>Update</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <skip_lookup>N</skip_lookup>
    <commit>100</commit>
    <error_ignored>N</error_ignored>
    <ignore_flag_field/>
    <lookup>
      <schema/>
      <table>staging_fact_tweets</table>
      <key>
        <name>id</name>
        <field>id</field>
        <condition>=</condition>
        <name2/>
        </key>
      <value>
        <name>dim_time_id</name>
        <rename>dim_time_id</rename>
        </value>
      </lookup>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>678</xloc>
      <yloc>80</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>staging_fact_tweets, dim_twitter_users</name>
    <type>TableInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <sql>SELECT
	sft.id,
	sftu.followers_count,
	CONCAT(DATE(sft.tweet_dt), &apos; &apos;, HOUR(NOW()), &apos;:00&apos;) AS utc_datetime,
	dtu.utc_offset,
	DATE_ADD(sft.tweet_dt, INTERVAL dtu.utc_offset SECOND) AS local_datetime,
	DAYOFWEEK(DATE_ADD(sft.tweet_dt, INTERVAL dtu.utc_offset SECOND)) AS local_day_of_week,
	DAYOFMONTH(DATE_ADD(sft.tweet_dt, INTERVAL dtu.utc_offset SECOND)) AS local_day_number_in_month,
	WEEKOFYEAR(DATE_ADD(sft.tweet_dt, INTERVAL dtu.utc_offset SECOND)) AS local_week_number_in_year,
	MONTH(DATE_ADD(sft.tweet_dt, INTERVAL dtu.utc_offset SECOND)) AS local_month,
	QUARTER(DATE_ADD(sft.tweet_dt, INTERVAL dtu.utc_offset SECOND)) AS local_quarter,
	IF(DAYOFWEEK(DATE_ADD(sft.tweet_dt, INTERVAL dtu.utc_offset SECOND)) IN (1,7), &apos;N&apos;, &apos;Y&apos;) AS local_weekday_flag,
	IF(DATE(DATE_ADD(sft.tweet_dt, INTERVAL dtu.utc_offset SECOND)) = LAST_DAY(DATE_ADD(sft.tweet_dt, INTERVAL dtu.utc_offset SECOND)), &apos;Y&apos;, &apos;N&apos;) AS local_last_day_in_month_flag,
	HOUR(DATE_ADD(sft.tweet_dt, INTERVAL dtu.utc_offset SECOND)) AS local_hour
FROM
	staging_fact_tweets AS sft INNER JOIN
	dim_twitter_users AS dtu ON sft.from_dim_twitter_user_id = dtu.id INNER JOIN
	staging_fact_twitter_users AS sftu ON dtu.id = sftu.dim_twitter_user_id</sql>
    <limit>0</limit>
    <lookup/>
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>132</xloc>
      <yloc>80</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step_error_handling>
  </step_error_handling>
   <slave-step-copy-partition-distribution>
</slave-step-copy-partition-distribution>
   <slave_transformation>N</slave_transformation>
</transformation>

<transformation>
  <info>
    <name>Load fact_history_twitter_users</name>
    <description/>
    <extended_description/>
    <trans_version/>
    <trans_type>Normal</trans_type>
    <trans_status>0</trans_status>
    <directory>&#47;twitter_analytics</directory>
    <parameters>
    </parameters>
    <log>
<trans-log-table><connection/>
<schema/>
<table/>
<size_limit_lines/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STATUS</id><enabled>Y</enabled><name>STATUS</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name><subject/></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name><subject/></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name><subject/></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name><subject/></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name><subject/></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name><subject/></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>STARTDATE</id><enabled>Y</enabled><name>STARTDATE</name></field><field><id>ENDDATE</id><enabled>Y</enabled><name>ENDDATE</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>DEPDATE</id><enabled>Y</enabled><name>DEPDATE</name></field><field><id>REPLAYDATE</id><enabled>Y</enabled><name>REPLAYDATE</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></trans-log-table>
<perf-log-table><connection/>
<schema/>
<table/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>SEQ_NR</id><enabled>Y</enabled><name>SEQ_NR</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>INPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>INPUT_BUFFER_ROWS</name></field><field><id>OUTPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>OUTPUT_BUFFER_ROWS</name></field></perf-log-table>
<channel-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>LOGGING_OBJECT_TYPE</id><enabled>Y</enabled><name>LOGGING_OBJECT_TYPE</name></field><field><id>OBJECT_NAME</id><enabled>Y</enabled><name>OBJECT_NAME</name></field><field><id>OBJECT_COPY</id><enabled>Y</enabled><name>OBJECT_COPY</name></field><field><id>REPOSITORY_DIRECTORY</id><enabled>Y</enabled><name>REPOSITORY_DIRECTORY</name></field><field><id>FILENAME</id><enabled>Y</enabled><name>FILENAME</name></field><field><id>OBJECT_ID</id><enabled>Y</enabled><name>OBJECT_ID</name></field><field><id>OBJECT_REVISION</id><enabled>Y</enabled><name>OBJECT_REVISION</name></field><field><id>PARENT_CHANNEL_ID</id><enabled>Y</enabled><name>PARENT_CHANNEL_ID</name></field><field><id>ROOT_CHANNEL_ID</id><enabled>Y</enabled><name>ROOT_CHANNEL_ID</name></field></channel-log-table>
<step-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></step-log-table>
    </log>
    <maxdate>
      <connection/>
      <table/>
      <field/>
      <offset>0.0</offset>
      <maxdiff>0.0</maxdiff>
    </maxdate>
    <size_rowset>10000</size_rowset>
    <sleep_time_empty>50</sleep_time_empty>
    <sleep_time_full>50</sleep_time_full>
    <unique_connections>N</unique_connections>
    <feedback_shown>Y</feedback_shown>
    <feedback_size>50000</feedback_size>
    <using_thread_priorities>Y</using_thread_priorities>
    <shared_objects_file/>
    <capture_step_performance>N</capture_step_performance>
    <step_performance_capturing_delay>1000</step_performance_capturing_delay>
    <step_performance_capturing_size_limit/>
    <dependencies>
    </dependencies>
    <partitionschemas>
    </partitionschemas>
    <slaveservers>
    </slaveservers>
    <clusterschemas>
    </clusterschemas>
  <modified_user>admin</modified_user>
  <modified_date>2011&#47;09&#47;03 11:20:35.000</modified_date>
  </info>
  <notepads>
  </notepads>
  <connection>
    <name>twitter_analytics</name>
    <server>localhost</server>
    <type>MYSQL</type>
    <access>Native</access>
    <database>topgun_twitter_analytics</database>
    <port>3306</port>
    <username>topgun</username>
    <password>Encrypted 2be98afc86aa7f2e4cb1ba265db95bac3</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>EXTRA_OPTION_MYSQL.defaultFetchSize</code><attribute>500</attribute></attribute>
      <attribute><code>EXTRA_OPTION_MYSQL.useCursorFetch</code><attribute>true</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>3306</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>STREAM_RESULTS</code><attribute>Y</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>N</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>N</attribute></attribute>
    </attributes>
  </connection>
  <order>
  <hop> <from>staging_fact_twitter_users</from><to>fact_history_twitter_users</to><enabled>Y</enabled> </hop>  <hop> <from>fact_history_twitter_users</from><to>fact_history_twitter_users 2</to><enabled>Y</enabled> </hop>  </order>
  <step>
    <name>fact_history_twitter_users</name>
    <type>Update</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <skip_lookup>N</skip_lookup>
    <commit>100</commit>
    <error_ignored>Y</error_ignored>
    <ignore_flag_field/>
    <lookup>
      <schema/>
      <table>fact_history_twitter_users</table>
      <key>
        <name>twitter_id</name>
        <field>twitter_id</field>
        <condition>=</condition>
        <name2/>
        </key>
      <value>
        <name>current_snapshot</name>
        <rename>last_snapshot</rename>
        </value>
      </lookup>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>344</xloc>
      <yloc>46</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>fact_history_twitter_users 2</name>
    <type>TableOutput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <schema/>
    <table>fact_history_twitter_users</table>
    <commit>1000</commit>
    <truncate>N</truncate>
    <ignore_errors>N</ignore_errors>
    <use_batch>Y</use_batch>
    <specify_fields>Y</specify_fields>
    <partitioning_enabled>N</partitioning_enabled>
    <partitioning_field/>
    <partitioning_daily>N</partitioning_daily>
    <partitioning_monthly>Y</partitioning_monthly>
    <tablename_in_field>N</tablename_in_field>
    <tablename_field/>
    <tablename_in_table>Y</tablename_in_table>
    <return_keys>N</return_keys>
    <return_field/>
    <fields>
        <field>
          <column_name>dim_twitter_user_id</column_name>
          <stream_name>dim_twitter_user_id</stream_name>
        </field>
        <field>
          <column_name>dim_location_id</column_name>
          <stream_name>dim_location_id</stream_name>
        </field>
        <field>
          <column_name>twitter_id</column_name>
          <stream_name>twitter_id</stream_name>
        </field>
        <field>
          <column_name>followers_count</column_name>
          <stream_name>followers_count</stream_name>
        </field>
        <field>
          <column_name>friends_count</column_name>
          <stream_name>friends_count</stream_name>
        </field>
        <field>
          <column_name>favourites_count</column_name>
          <stream_name>favourites_count</stream_name>
        </field>
        <field>
          <column_name>statuses_count</column_name>
          <stream_name>statuses_count</stream_name>
        </field>
        <field>
          <column_name>current_snapshot</column_name>
          <stream_name>current_snapshot</stream_name>
        </field>
        <field>
          <column_name>snapshot_date</column_name>
          <stream_name>snapshot_datetime</stream_name>
        </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>593</xloc>
      <yloc>46</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>staging_fact_twitter_users</name>
    <type>TableInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <sql>SELECT
  dim_twitter_user_id
, dim_location_id
, twitter_id
, followers_count
, friends_count
, favourites_count
, statuses_count
, current_snapshot
, snapshot_datetime
, &apos;N&apos; AS last_snapshot
FROM 
	staging_fact_twitter_users
</sql>
    <limit>0</limit>
    <lookup/>
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>95</xloc>
      <yloc>46</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step_error_handling>
  </step_error_handling>
   <slave-step-copy-partition-distribution>
</slave-step-copy-partition-distribution>
   <slave_transformation>N</slave_transformation>
</transformation>

<transformation>
  <info>
    <name>Load fact_tweets</name>
    <description/>
    <extended_description/>
    <trans_version/>
    <trans_type>Normal</trans_type>
    <trans_status>0</trans_status>
    <directory>&#47;twitter_analytics</directory>
    <parameters>
    </parameters>
    <log>
<trans-log-table><connection/>
<schema/>
<table/>
<size_limit_lines/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STATUS</id><enabled>Y</enabled><name>STATUS</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name><subject/></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name><subject/></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name><subject/></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name><subject/></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name><subject/></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name><subject/></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>STARTDATE</id><enabled>Y</enabled><name>STARTDATE</name></field><field><id>ENDDATE</id><enabled>Y</enabled><name>ENDDATE</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>DEPDATE</id><enabled>Y</enabled><name>DEPDATE</name></field><field><id>REPLAYDATE</id><enabled>Y</enabled><name>REPLAYDATE</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></trans-log-table>
<perf-log-table><connection/>
<schema/>
<table/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>SEQ_NR</id><enabled>Y</enabled><name>SEQ_NR</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>INPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>INPUT_BUFFER_ROWS</name></field><field><id>OUTPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>OUTPUT_BUFFER_ROWS</name></field></perf-log-table>
<channel-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>LOGGING_OBJECT_TYPE</id><enabled>Y</enabled><name>LOGGING_OBJECT_TYPE</name></field><field><id>OBJECT_NAME</id><enabled>Y</enabled><name>OBJECT_NAME</name></field><field><id>OBJECT_COPY</id><enabled>Y</enabled><name>OBJECT_COPY</name></field><field><id>REPOSITORY_DIRECTORY</id><enabled>Y</enabled><name>REPOSITORY_DIRECTORY</name></field><field><id>FILENAME</id><enabled>Y</enabled><name>FILENAME</name></field><field><id>OBJECT_ID</id><enabled>Y</enabled><name>OBJECT_ID</name></field><field><id>OBJECT_REVISION</id><enabled>Y</enabled><name>OBJECT_REVISION</name></field><field><id>PARENT_CHANNEL_ID</id><enabled>Y</enabled><name>PARENT_CHANNEL_ID</name></field><field><id>ROOT_CHANNEL_ID</id><enabled>Y</enabled><name>ROOT_CHANNEL_ID</name></field></channel-log-table>
<step-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></step-log-table>
    </log>
    <maxdate>
      <connection/>
      <table/>
      <field/>
      <offset>0.0</offset>
      <maxdiff>0.0</maxdiff>
    </maxdate>
    <size_rowset>10000</size_rowset>
    <sleep_time_empty>50</sleep_time_empty>
    <sleep_time_full>50</sleep_time_full>
    <unique_connections>N</unique_connections>
    <feedback_shown>Y</feedback_shown>
    <feedback_size>50000</feedback_size>
    <using_thread_priorities>Y</using_thread_priorities>
    <shared_objects_file/>
    <capture_step_performance>N</capture_step_performance>
    <step_performance_capturing_delay>1000</step_performance_capturing_delay>
    <step_performance_capturing_size_limit/>
    <dependencies>
    </dependencies>
    <partitionschemas>
    </partitionschemas>
    <slaveservers>
    </slaveservers>
    <clusterschemas>
    </clusterschemas>
  <modified_user>admin</modified_user>
  <modified_date>2011&#47;09&#47;03 11:20:35.000</modified_date>
  </info>
  <notepads>
  </notepads>
  <connection>
    <name>twitter_analytics</name>
    <server>localhost</server>
    <type>MYSQL</type>
    <access>Native</access>
    <database>topgun_twitter_analytics</database>
    <port>3306</port>
    <username>topgun</username>
    <password>Encrypted 2be98afc86aa7f2e4cb1ba265db95bac3</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>EXTRA_OPTION_MYSQL.defaultFetchSize</code><attribute>500</attribute></attribute>
      <attribute><code>EXTRA_OPTION_MYSQL.useCursorFetch</code><attribute>true</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>3306</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>STREAM_RESULTS</code><attribute>Y</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>N</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>N</attribute></attribute>
    </attributes>
  </connection>
  <order>
  <hop> <from>staging_fact_tweets</from><to>If field value is null</to><enabled>Y</enabled> </hop>  <hop> <from>If field value is null</from><to>fact_tweets</to><enabled>Y</enabled> </hop>  </order>
  <step>
    <name>If field value is null</name>
    <type>IfNull</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <replaceAllByValue/>
      <replaceAllMask/>
      <selectFields>Y</selectFields>
      <selectValuesType>N</selectValuesType>
    <valuetypes>
      </valuetypes>
    <fields>
      <field>
        <name>num_hashtags</name>
        <value>0</value>
        <mask/>
        </field>
      <field>
        <name>num_keywords</name>
        <value>0</value>
        <mask/>
        </field>
      <field>
        <name>num_user_mentions</name>
        <value>0</value>
        <mask/>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>235</xloc>
      <yloc>25</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>fact_tweets</name>
    <type>TableOutput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <schema/>
    <table>fact_tweets</table>
    <commit>1000</commit>
    <truncate>N</truncate>
    <ignore_errors>N</ignore_errors>
    <use_batch>Y</use_batch>
    <specify_fields>Y</specify_fields>
    <partitioning_enabled>N</partitioning_enabled>
    <partitioning_field/>
    <partitioning_daily>N</partitioning_daily>
    <partitioning_monthly>Y</partitioning_monthly>
    <tablename_in_field>N</tablename_in_field>
    <tablename_field/>
    <tablename_in_table>Y</tablename_in_table>
    <return_keys>N</return_keys>
    <return_field/>
    <fields>
        <field>
          <column_name>dim_tweet_id</column_name>
          <stream_name>dim_tweet_id</stream_name>
        </field>
        <field>
          <column_name>tweet_dt</column_name>
          <stream_name>tweet_dt</stream_name>
        </field>
        <field>
          <column_name>dim_twitter_keyword_search_id</column_name>
          <stream_name>dim_twitter_keyword_search_id</stream_name>
        </field>
        <field>
          <column_name>dim_time_id</column_name>
          <stream_name>dim_time_id</stream_name>
        </field>
        <field>
          <column_name>dim_location_id</column_name>
          <stream_name>dim_location_id</stream_name>
        </field>
        <field>
          <column_name>dim_tweet_source_id</column_name>
          <stream_name>dim_tweet_source_id</stream_name>
        </field>
        <field>
          <column_name>from_dim_twitter_user_id</column_name>
          <stream_name>from_dim_twitter_user_id</stream_name>
        </field>
        <field>
          <column_name>num_user_mentions</column_name>
          <stream_name>num_user_mentions</stream_name>
        </field>
        <field>
          <column_name>num_hashtags</column_name>
          <stream_name>num_hashtags</stream_name>
        </field>
        <field>
          <column_name>followers_count</column_name>
          <stream_name>followers_count</stream_name>
        </field>
        <field>
          <column_name>following_count</column_name>
          <stream_name>following_count</stream_name>
        </field>
        <field>
          <column_name>bridge_group_referred_url_id</column_name>
          <stream_name>bridge_group_referred_url_id</stream_name>
        </field>
        <field>
          <column_name>num_embedded_urls</column_name>
          <stream_name>num_embedded_urls</stream_name>
        </field>
        <field>
          <column_name>num_bitly_urls</column_name>
          <stream_name>num_bitly_urls</stream_name>
        </field>
        <field>
          <column_name>num_bitly_user_clicks</column_name>
          <stream_name>num_bitly_user_clicks</stream_name>
        </field>
        <field>
          <column_name>num_bitly_global_clicks</column_name>
          <stream_name>num_bitly_global_clicks</stream_name>
        </field>
        <field>
          <column_name>num_keywords</column_name>
          <stream_name>num_keywords</stream_name>
        </field>
        <field>
          <column_name>bridge_group_single_keyword_id</column_name>
          <stream_name>bridge_group_single_keyword_id</stream_name>
        </field>
        <field>
          <column_name>bridge_group_double_keyword_id</column_name>
          <stream_name>bridge_group_double_keyword_id</stream_name>
        </field>
        <field>
          <column_name>bridge_group_triple_keyword_id</column_name>
          <stream_name>bridge_group_triple_keyword_id</stream_name>
        </field>
        <field>
          <column_name>bridge_group_quadruple_keyword_id</column_name>
          <stream_name>bridge_group_quadruple_keyword_id</stream_name>
        </field>
        <field>
          <column_name>bridge_group_user_mention_id</column_name>
          <stream_name>bridge_group_user_mention_id</stream_name>
        </field>
        <field>
          <column_name>bridge_group_hashtag_id</column_name>
          <stream_name>bridge_group_hashtag_id</stream_name>
        </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>359</xloc>
      <yloc>25</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>staging_fact_tweets</name>
    <type>TableInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <sql>SELECT
  dim_tweet_id
, tweet_dt
, dim_twitter_keyword_search_id
, dim_time_id
, dim_location_id
, dim_tweet_source_id
, from_dim_twitter_user_id
, num_keywords
, num_user_mentions
, num_hashtags
, followers_count
, following_count
, bridge_group_referred_url_id
, num_embedded_urls
, num_bitly_urls
, num_bitly_user_clicks
, num_bitly_global_clicks
, bridge_group_single_keyword_id
, bridge_group_double_keyword_id
, bridge_group_triple_keyword_id
, bridge_group_quadruple_keyword_id
, bridge_group_user_mention_id
, bridge_group_hashtag_id
FROM 
     staging_fact_tweets
</sql>
    <limit>0</limit>
    <lookup/>
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>90</xloc>
      <yloc>25</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step_error_handling>
  </step_error_handling>
   <slave-step-copy-partition-distribution>
</slave-step-copy-partition-distribution>
   <slave_transformation>N</slave_transformation>
</transformation>

<transformation>
  <info>
    <name>Load staging_fact_tweets</name>
    <description/>
    <extended_description/>
    <trans_version/>
    <trans_type>Normal</trans_type>
    <trans_status>0</trans_status>
    <directory>&#47;twitter_analytics</directory>
    <parameters>
    </parameters>
    <log>
<trans-log-table><connection/>
<schema/>
<table/>
<size_limit_lines/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STATUS</id><enabled>Y</enabled><name>STATUS</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name><subject/></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name><subject/></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name><subject/></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name><subject/></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name><subject/></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name><subject/></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>STARTDATE</id><enabled>Y</enabled><name>STARTDATE</name></field><field><id>ENDDATE</id><enabled>Y</enabled><name>ENDDATE</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>DEPDATE</id><enabled>Y</enabled><name>DEPDATE</name></field><field><id>REPLAYDATE</id><enabled>Y</enabled><name>REPLAYDATE</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></trans-log-table>
<perf-log-table><connection/>
<schema/>
<table/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>SEQ_NR</id><enabled>Y</enabled><name>SEQ_NR</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>INPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>INPUT_BUFFER_ROWS</name></field><field><id>OUTPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>OUTPUT_BUFFER_ROWS</name></field></perf-log-table>
<channel-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>LOGGING_OBJECT_TYPE</id><enabled>Y</enabled><name>LOGGING_OBJECT_TYPE</name></field><field><id>OBJECT_NAME</id><enabled>Y</enabled><name>OBJECT_NAME</name></field><field><id>OBJECT_COPY</id><enabled>Y</enabled><name>OBJECT_COPY</name></field><field><id>REPOSITORY_DIRECTORY</id><enabled>Y</enabled><name>REPOSITORY_DIRECTORY</name></field><field><id>FILENAME</id><enabled>Y</enabled><name>FILENAME</name></field><field><id>OBJECT_ID</id><enabled>Y</enabled><name>OBJECT_ID</name></field><field><id>OBJECT_REVISION</id><enabled>Y</enabled><name>OBJECT_REVISION</name></field><field><id>PARENT_CHANNEL_ID</id><enabled>Y</enabled><name>PARENT_CHANNEL_ID</name></field><field><id>ROOT_CHANNEL_ID</id><enabled>Y</enabled><name>ROOT_CHANNEL_ID</name></field></channel-log-table>
<step-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></step-log-table>
    </log>
    <maxdate>
      <connection/>
      <table/>
      <field/>
      <offset>0.0</offset>
      <maxdiff>0.0</maxdiff>
    </maxdate>
    <size_rowset>10000</size_rowset>
    <sleep_time_empty>50</sleep_time_empty>
    <sleep_time_full>50</sleep_time_full>
    <unique_connections>N</unique_connections>
    <feedback_shown>Y</feedback_shown>
    <feedback_size>50000</feedback_size>
    <using_thread_priorities>Y</using_thread_priorities>
    <shared_objects_file/>
    <capture_step_performance>N</capture_step_performance>
    <step_performance_capturing_delay>1000</step_performance_capturing_delay>
    <step_performance_capturing_size_limit/>
    <dependencies>
    </dependencies>
    <partitionschemas>
    </partitionschemas>
    <slaveservers>
    </slaveservers>
    <clusterschemas>
    </clusterschemas>
  <modified_user>admin</modified_user>
  <modified_date>2011&#47;09&#47;03 11:20:36.000</modified_date>
  </info>
  <notepads>
  </notepads>
  <connection>
    <name>twitter_analytics</name>
    <server>localhost</server>
    <type>MYSQL</type>
    <access>Native</access>
    <database>topgun_twitter_analytics</database>
    <port>3306</port>
    <username>topgun</username>
    <password>Encrypted 2be98afc86aa7f2e4cb1ba265db95bac3</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>EXTRA_OPTION_MYSQL.defaultFetchSize</code><attribute>500</attribute></attribute>
      <attribute><code>EXTRA_OPTION_MYSQL.useCursorFetch</code><attribute>true</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>3306</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>STREAM_RESULTS</code><attribute>Y</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>N</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>N</attribute></attribute>
    </attributes>
  </connection>
  <order>
  <hop> <from>Add job state_id</from><to>job_user_lookups</to><enabled>Y</enabled> </hop>  <hop> <from>Sample rows</from><to>Add job state_id</to><enabled>Y</enabled> </hop>  <hop> <from>staging_candidate_tweets</from><to>Filter duplicate screen names</to><enabled>Y</enabled> </hop>  <hop> <from>Filter duplicate screen names</from><to>Sort on priority, sort_rank</to><enabled>Y</enabled> </hop>  <hop> <from>Sort on priority, sort_rank</from><to>Sample rows</to><enabled>Y</enabled> </hop>  <hop> <from>dim_tweet_sources</from><to>Select values</to><enabled>Y</enabled> </hop>  <hop> <from>Select values</from><to>staging_fact_tweets</to><enabled>Y</enabled> </hop>  <hop> <from>dim_tweets</from><to>dim_tweet_sources</to><enabled>Y</enabled> </hop>  <hop> <from>Extract tweet source fields</from><to>dim_tweets</to><enabled>Y</enabled> </hop>  <hop> <from>staging_candidate_tweets</from><to>Extract tweet source fields</to><enabled>Y</enabled> </hop>  </order>
  <step>
    <name>Add job state_id</name>
    <type>Constant</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <name>state_id</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif>PENDINGLOOKUP</nullif>
        <length>-1</length>
        <precision>-1</precision>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>861</xloc>
      <yloc>69</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Extract tweet source fields</name>
    <type>RegexEval</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <script><![CDATA[<a href="(.+)">(.*)</a>]]></script>    <matcher>tweet_source</matcher>
    <resultfieldname>reg_ex_matched</resultfieldname>
    <usevar>N</usevar>
    <allowcapturegroups>Y</allowcapturegroups>
    <canoneq>N</canoneq>
    <caseinsensitive>N</caseinsensitive>
    <comment>N</comment>
    <dotall>N</dotall>
    <multiline>N</multiline>
    <unicode>N</unicode>
    <unix>N</unix>
    <fields>
      <field>
        <name>twitter_source_url</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
      </field>
      <field>
        <name>twitter_source_name</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>133</xloc>
      <yloc>278</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Filter duplicate screen names</name>
    <type>Unique</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <count_rows>N</count_rows>
      <count_field/>
      <reject_duplicate_row>N</reject_duplicate_row>
      <error_description/>
    <fields>      <field>        <name>from_user_screen_name</name>
        <case_insensitive>N</case_insensitive>
        </field>      </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>315</xloc>
      <yloc>69</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Sample rows</name>
    <type>SampleRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <linesrange>1..${HOURLY_RATE_LIMIT}</linesrange>
    <linenumfield/>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>679</xloc>
      <yloc>69</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Select values</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>        <select_unspecified>N</select_unspecified>
      <meta>        <name>tweet_dt</name>
        <rename>tweet_dt</rename>
        <type>-</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask/>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>ID_1</name>
        <rename>dim_tweet_id</rename>
        <type>-</type>
        <length>-2</length>
        <precision>0</precision>
        <conversion_mask/>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>dim_tweet_source_id</name>
        <rename>dim_tweet_source_id</rename>
        <type>-</type>
        <length>9</length>
        <precision>0</precision>
        <conversion_mask/>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>811</xloc>
      <yloc>278</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Sort on priority, sort_rank</name>
    <type>SortRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <sort_size>1000</sort_size>
      <free_memory>25</free_memory>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>priority</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>sort_rank</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>497</xloc>
      <yloc>69</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>dim_tweet_sources</name>
    <type>DimensionLookup</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <schema/>
      <table>dim_tweet_sources</table>
      <connection>twitter_analytics</connection>
      <commit>100</commit>
      <update>Y</update>
      <fields>
        <key>
          <name>twitter_source_url</name>
          <lookup>source_url</lookup>
        </key>
        <date>
          <name/>
          <from>eff_begin_dt</from>
          <to>eff_end_dt</to>
        </date>
        <field>
          <name>twitter_source_name</name>
          <lookup>source_name</lookup>
          <update>Insert</update>
        </field>
        <return>
          <name>ID</name>
          <rename>dim_tweet_source_id</rename>
          <creation_method>autoinc</creation_method>
          <use_autoinc>Y</use_autoinc>
          <version>dim_version</version>
        </return>
      </fields>
      <sequence/>
      <min_year>2009</min_year>
      <max_year>2199</max_year>
      <cache_size>5000</cache_size>
      <preload_cache>N</preload_cache>
      <use_start_date_alternative>N</use_start_date_alternative>
      <start_date_alternative>none</start_date_alternative>
      <start_date_field_name/>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>585</xloc>
      <yloc>278</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>dim_tweets</name>
    <type>TableOutput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <schema/>
    <table>dim_tweets</table>
    <commit>1000</commit>
    <truncate>N</truncate>
    <ignore_errors>N</ignore_errors>
    <use_batch>N</use_batch>
    <specify_fields>Y</specify_fields>
    <partitioning_enabled>N</partitioning_enabled>
    <partitioning_field/>
    <partitioning_daily>N</partitioning_daily>
    <partitioning_monthly>Y</partitioning_monthly>
    <tablename_in_field>N</tablename_in_field>
    <tablename_field/>
    <tablename_in_table>Y</tablename_in_table>
    <return_keys>Y</return_keys>
    <return_field>ID</return_field>
    <fields>
        <field>
          <column_name>tweet_ID</column_name>
          <stream_name>tweet_ID</stream_name>
        </field>
        <field>
          <column_name>tweet_dt</column_name>
          <stream_name>tweet_dt</stream_name>
        </field>
        <field>
          <column_name>tweet_status</column_name>
          <stream_name>tweet_status</stream_name>
        </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>359</xloc>
      <yloc>278</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>job_user_lookups</name>
    <type>TableOutput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <schema/>
    <table>job_user_lookups</table>
    <commit>1000</commit>
    <truncate>Y</truncate>
    <ignore_errors>N</ignore_errors>
    <use_batch>Y</use_batch>
    <specify_fields>Y</specify_fields>
    <partitioning_enabled>N</partitioning_enabled>
    <partitioning_field/>
    <partitioning_daily>N</partitioning_daily>
    <partitioning_monthly>Y</partitioning_monthly>
    <tablename_in_field>N</tablename_in_field>
    <tablename_field/>
    <tablename_in_table>Y</tablename_in_table>
    <return_keys>N</return_keys>
    <return_field/>
    <fields>
        <field>
          <column_name>twitter_screen_name</column_name>
          <stream_name>from_user_screen_name</stream_name>
        </field>
        <field>
          <column_name>state_id</column_name>
          <stream_name>state_id</stream_name>
        </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1043</xloc>
      <yloc>69</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>staging_candidate_tweets</name>
    <type>TableInput</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <sql>SELECT
  ID
, sort_rank
, tweet_ID
, dim_twitter_keyword_search_id
, from_user_screen_name
, tweet_dt
, tweet_status
, tweet_source
, priority
, rec_create_date
FROM
   staging_candidate_tweets
ORDER BY
	from_user_screen_name</sql>
    <limit>0</limit>
    <lookup/>
    <execute_each_row>N</execute_each_row>
    <variables_active>Y</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>133</xloc>
      <yloc>69</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>staging_fact_tweets</name>
    <type>TableOutput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <schema/>
    <table>staging_fact_tweets</table>
    <commit>1000</commit>
    <truncate>Y</truncate>
    <ignore_errors>N</ignore_errors>
    <use_batch>Y</use_batch>
    <specify_fields>Y</specify_fields>
    <partitioning_enabled>N</partitioning_enabled>
    <partitioning_field/>
    <partitioning_daily>N</partitioning_daily>
    <partitioning_monthly>Y</partitioning_monthly>
    <tablename_in_field>N</tablename_in_field>
    <tablename_field/>
    <tablename_in_table>Y</tablename_in_table>
    <return_keys>N</return_keys>
    <return_field/>
    <fields>
        <field>
          <column_name>dim_tweet_id</column_name>
          <stream_name>dim_tweet_id</stream_name>
        </field>
        <field>
          <column_name>dim_twitter_keyword_search_id</column_name>
          <stream_name>dim_twitter_keyword_search_id</stream_name>
        </field>
        <field>
          <column_name>twitter_from_screen_name</column_name>
          <stream_name>from_user_screen_name</stream_name>
        </field>
        <field>
          <column_name>tweet_dt</column_name>
          <stream_name>tweet_dt</stream_name>
        </field>
        <field>
          <column_name>dim_tweet_source_id</column_name>
          <stream_name>dim_tweet_source_id</stream_name>
        </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1037</xloc>
      <yloc>278</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step_error_handling>
  </step_error_handling>
   <slave-step-copy-partition-distribution>
</slave-step-copy-partition-distribution>
   <slave_transformation>N</slave_transformation>
</transformation>

<transformation>
  <info>
    <name>Set environment variables</name>
    <description/>
    <extended_description/>
    <trans_version/>
    <trans_type>Normal</trans_type>
    <trans_status>0</trans_status>
    <directory>&#47;twitter_analytics</directory>
    <parameters>
    </parameters>
    <log>
<trans-log-table><connection/>
<schema/>
<table/>
<size_limit_lines/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STATUS</id><enabled>Y</enabled><name>STATUS</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name><subject/></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name><subject/></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name><subject/></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name><subject/></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name><subject/></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name><subject/></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>STARTDATE</id><enabled>Y</enabled><name>STARTDATE</name></field><field><id>ENDDATE</id><enabled>Y</enabled><name>ENDDATE</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>DEPDATE</id><enabled>Y</enabled><name>DEPDATE</name></field><field><id>REPLAYDATE</id><enabled>Y</enabled><name>REPLAYDATE</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></trans-log-table>
<perf-log-table><connection/>
<schema/>
<table/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>SEQ_NR</id><enabled>Y</enabled><name>SEQ_NR</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>INPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>INPUT_BUFFER_ROWS</name></field><field><id>OUTPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>OUTPUT_BUFFER_ROWS</name></field></perf-log-table>
<channel-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>LOGGING_OBJECT_TYPE</id><enabled>Y</enabled><name>LOGGING_OBJECT_TYPE</name></field><field><id>OBJECT_NAME</id><enabled>Y</enabled><name>OBJECT_NAME</name></field><field><id>OBJECT_COPY</id><enabled>Y</enabled><name>OBJECT_COPY</name></field><field><id>REPOSITORY_DIRECTORY</id><enabled>Y</enabled><name>REPOSITORY_DIRECTORY</name></field><field><id>FILENAME</id><enabled>Y</enabled><name>FILENAME</name></field><field><id>OBJECT_ID</id><enabled>Y</enabled><name>OBJECT_ID</name></field><field><id>OBJECT_REVISION</id><enabled>Y</enabled><name>OBJECT_REVISION</name></field><field><id>PARENT_CHANNEL_ID</id><enabled>Y</enabled><name>PARENT_CHANNEL_ID</name></field><field><id>ROOT_CHANNEL_ID</id><enabled>Y</enabled><name>ROOT_CHANNEL_ID</name></field></channel-log-table>
<step-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></step-log-table>
    </log>
    <maxdate>
      <connection/>
      <table/>
      <field/>
      <offset>0.0</offset>
      <maxdiff>0.0</maxdiff>
    </maxdate>
    <size_rowset>10000</size_rowset>
    <sleep_time_empty>50</sleep_time_empty>
    <sleep_time_full>50</sleep_time_full>
    <unique_connections>N</unique_connections>
    <feedback_shown>Y</feedback_shown>
    <feedback_size>50000</feedback_size>
    <using_thread_priorities>Y</using_thread_priorities>
    <shared_objects_file/>
    <capture_step_performance>N</capture_step_performance>
    <step_performance_capturing_delay>1000</step_performance_capturing_delay>
    <step_performance_capturing_size_limit/>
    <dependencies>
    </dependencies>
    <partitionschemas>
    </partitionschemas>
    <slaveservers>
    </slaveservers>
    <clusterschemas>
    </clusterschemas>
  <modified_user>admin</modified_user>
  <modified_date>2011&#47;09&#47;03 11:20:36.000</modified_date>
  </info>
  <notepads>
  </notepads>
  <connection>
    <name>twitter_analytics</name>
    <server>localhost</server>
    <type>MYSQL</type>
    <access>Native</access>
    <database>topgun_twitter_analytics</database>
    <port>3306</port>
    <username>topgun</username>
    <password>Encrypted 2be98afc86aa7f2e4cb1ba265db95bac3</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>EXTRA_OPTION_MYSQL.defaultFetchSize</code><attribute>500</attribute></attribute>
      <attribute><code>EXTRA_OPTION_MYSQL.useCursorFetch</code><attribute>true</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>3306</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>STREAM_RESULTS</code><attribute>Y</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>N</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>N</attribute></attribute>
    </attributes>
  </connection>
  <order>
  <hop> <from>settings</from><to>HOURLY_RATE_LIMIT</to><enabled>Y</enabled> </hop>  </order>
  <step>
    <name>HOURLY_RATE_LIMIT</name>
    <type>SetVariable</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <field_name>hourly_rate_limit</field_name>
        <variable_name>HOURLY_RATE_LIMIT</variable_name>
        <variable_type>ROOT_JOB</variable_type>
        <default_value>150</default_value>
        </field>
      </fields>
    <use_formatting>Y</use_formatting>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>265</xloc>
      <yloc>77</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>settings</name>
    <type>TableInput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>twitter_analytics</connection>
    <sql>SELECT
  attribute_value AS hourly_rate_limit
FROM
	settings
WHERE
	attribute_id = &apos;HOURLYRATELIMIT&apos;
</sql>
    <limit>0</limit>
    <lookup/>
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>94</xloc>
      <yloc>77</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step_error_handling>
  </step_error_handling>
   <slave-step-copy-partition-distribution>
</slave-step-copy-partition-distribution>
   <slave_transformation>N</slave_transformation>
</transformation>

</transformations>
<jobs>
<job>
  <name>Move Data to warehouse</name>
    <description/>
    <extended_description/>
    <job_version/>
    <job_status>0</job_status>
  <directory>&#47;twitter_analytics</directory>
  <created_user>admin</created_user>
  <created_date>2009&#47;09&#47;01 12:36:30.000</created_date>
  <modified_user>admin</modified_user>
  <modified_date>2009&#47;09&#47;01 12:36:30.000</modified_date>
    <parameters>
    </parameters>
  <connection>
    <name>twitter_analytics</name>
    <server>localhost</server>
    <type>MYSQL</type>
    <access>Native</access>
    <database>topgun_twitter_analytics</database>
    <port>3306</port>
    <username>topgun</username>
    <password>Encrypted 2be98afc86aa7f2e4cb1ba265db95bac3</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>EXTRA_OPTION_MYSQL.defaultFetchSize</code><attribute>500</attribute></attribute>
      <attribute><code>EXTRA_OPTION_MYSQL.useCursorFetch</code><attribute>true</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>3306</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>STREAM_RESULTS</code><attribute>Y</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>N</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>N</attribute></attribute>
    </attributes>
  </connection>
    <slaveservers>
    </slaveservers>
<job-log-table><connection/>
<schema/>
<table/>
<size_limit_lines/>
<interval/>
<timeout_days/>
<field><id>ID_JOB</id><enabled>Y</enabled><name>ID_JOB</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>JOBNAME</id><enabled>Y</enabled><name>JOBNAME</name></field><field><id>STATUS</id><enabled>Y</enabled><name>STATUS</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>STARTDATE</id><enabled>Y</enabled><name>STARTDATE</name></field><field><id>ENDDATE</id><enabled>Y</enabled><name>ENDDATE</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>DEPDATE</id><enabled>Y</enabled><name>DEPDATE</name></field><field><id>REPLAYDATE</id><enabled>Y</enabled><name>REPLAYDATE</name></field><field><id>LOG_FIELD</id><enabled>Y</enabled><name>LOG_FIELD</name></field></job-log-table>
<jobentry-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>JOBNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>JOBENTRYNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>RESULT</id><enabled>Y</enabled><name>RESULT</name></field><field><id>NR_RESULT_ROWS</id><enabled>Y</enabled><name>NR_RESULT_ROWS</name></field><field><id>NR_RESULT_FILES</id><enabled>Y</enabled><name>NR_RESULT_FILES</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></jobentry-log-table>
<channel-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>LOGGING_OBJECT_TYPE</id><enabled>Y</enabled><name>LOGGING_OBJECT_TYPE</name></field><field><id>OBJECT_NAME</id><enabled>Y</enabled><name>OBJECT_NAME</name></field><field><id>OBJECT_COPY</id><enabled>Y</enabled><name>OBJECT_COPY</name></field><field><id>REPOSITORY_DIRECTORY</id><enabled>Y</enabled><name>REPOSITORY_DIRECTORY</name></field><field><id>FILENAME</id><enabled>Y</enabled><name>FILENAME</name></field><field><id>OBJECT_ID</id><enabled>Y</enabled><name>OBJECT_ID</name></field><field><id>OBJECT_REVISION</id><enabled>Y</enabled><name>OBJECT_REVISION</name></field><field><id>PARENT_CHANNEL_ID</id><enabled>Y</enabled><name>PARENT_CHANNEL_ID</name></field><field><id>ROOT_CHANNEL_ID</id><enabled>Y</enabled><name>ROOT_CHANNEL_ID</name></field></channel-log-table>
   <pass_batchid>N</pass_batchid>
   <shared_objects_file/>
  <entries>
    <entry>
      <name>START</name>
      <description>Special entries</description>
      <type>SPECIAL</type>
      <start>Y</start>
      <dummy>N</dummy>
      <repeat>N</repeat>
      <schedulerType>0</schedulerType>
      <intervalSeconds>0</intervalSeconds>
      <intervalMinutes>60</intervalMinutes>
      <hour>12</hour>
      <minutes>0</minutes>
      <weekDay>1</weekDay>
      <DayOfMonth>1</DayOfMonth>
      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>73</xloc>
      <yloc>27</yloc>
      </entry>
    <entry>
      <name>Load fact_tweets</name>
      <description>Transformation</description>
      <type>TRANS</type>
      <specification_method>rep_name</specification_method>
      <trans_object_id/>
      <filename/>
      <transname>Load fact_tweets</transname>
      <directory>&#47;twitter_analytics</directory>
      <arg_from_previous>N</arg_from_previous>
      <params_from_previous>N</params_from_previous>
      <exec_per_row>N</exec_per_row>
      <clear_rows>N</clear_rows>
      <clear_files>N</clear_files>
      <set_logfile>N</set_logfile>
      <logfile/>
      <logext/>
      <add_date>N</add_date>
      <add_time>N</add_time>
      <loglevel>Nothing</loglevel>
      <cluster>N</cluster>
      <slave_server_name/>
      <set_append_logfile>N</set_append_logfile>
      <wait_until_finished>Y</wait_until_finished>
      <follow_abort_remote>N</follow_abort_remote>
      <create_parent_folder>N</create_parent_folder>
      <parameters>        <pass_all_parameters>Y</pass_all_parameters>
      </parameters>      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>277</xloc>
      <yloc>27</yloc>
      </entry>
    <entry>
      <name>Success 1</name>
      <description>Success</description>
      <type>SUCCESS</type>
      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>685</xloc>
      <yloc>27</yloc>
      </entry>
    <entry>
      <name>Load fact_history_twitter_users</name>
      <description>Transformation</description>
      <type>TRANS</type>
      <specification_method>rep_name</specification_method>
      <trans_object_id/>
      <filename/>
      <transname>Load fact_history_twitter_users</transname>
      <directory>&#47;twitter_analytics</directory>
      <arg_from_previous>N</arg_from_previous>
      <params_from_previous>N</params_from_previous>
      <exec_per_row>N</exec_per_row>
      <clear_rows>N</clear_rows>
      <clear_files>N</clear_files>
      <set_logfile>N</set_logfile>
      <logfile/>
      <logext/>
      <add_date>N</add_date>
      <add_time>N</add_time>
      <loglevel>Nothing</loglevel>
      <cluster>N</cluster>
      <slave_server_name/>
      <set_append_logfile>N</set_append_logfile>
      <wait_until_finished>Y</wait_until_finished>
      <follow_abort_remote>N</follow_abort_remote>
      <create_parent_folder>N</create_parent_folder>
      <parameters>        <pass_all_parameters>Y</pass_all_parameters>
      </parameters>      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>481</xloc>
      <yloc>27</yloc>
      </entry>
  </entries>
  <hops>
    <hop>
      <from>START</from>
      <to>Load fact_tweets</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>Y</unconditional>
    </hop>
    <hop>
      <from>Load fact_tweets</from>
      <to>Load fact_history_twitter_users</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>Load fact_history_twitter_users</from>
      <to>Success 1</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>N</unconditional>
    </hop>
  </hops>
  <notepads>
  </notepads>
</job>

<job>
  <name>Reset All</name>
    <description/>
    <extended_description/>
    <job_version/>
    <job_status>0</job_status>
  <directory>&#47;twitter_analytics</directory>
  <created_user>admin</created_user>
  <created_date>2009&#47;09&#47;03 22:44:58.000</created_date>
  <modified_user>admin</modified_user>
  <modified_date>2009&#47;09&#47;03 22:44:58.000</modified_date>
    <parameters>
    </parameters>
  <connection>
    <name>twitter_analytics</name>
    <server>localhost</server>
    <type>MYSQL</type>
    <access>Native</access>
    <database>topgun_twitter_analytics</database>
    <port>3306</port>
    <username>topgun</username>
    <password>Encrypted 2be98afc86aa7f2e4cb1ba265db95bac3</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>EXTRA_OPTION_MYSQL.defaultFetchSize</code><attribute>500</attribute></attribute>
      <attribute><code>EXTRA_OPTION_MYSQL.useCursorFetch</code><attribute>true</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>3306</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>STREAM_RESULTS</code><attribute>Y</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>N</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>N</attribute></attribute>
    </attributes>
  </connection>
    <slaveservers>
    </slaveservers>
<job-log-table><connection/>
<schema/>
<table/>
<size_limit_lines/>
<interval/>
<timeout_days/>
<field><id>ID_JOB</id><enabled>Y</enabled><name>ID_JOB</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>JOBNAME</id><enabled>Y</enabled><name>JOBNAME</name></field><field><id>STATUS</id><enabled>Y</enabled><name>STATUS</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>STARTDATE</id><enabled>Y</enabled><name>STARTDATE</name></field><field><id>ENDDATE</id><enabled>Y</enabled><name>ENDDATE</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>DEPDATE</id><enabled>Y</enabled><name>DEPDATE</name></field><field><id>REPLAYDATE</id><enabled>Y</enabled><name>REPLAYDATE</name></field><field><id>LOG_FIELD</id><enabled>Y</enabled><name>LOG_FIELD</name></field></job-log-table>
<jobentry-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>JOBNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>JOBENTRYNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>RESULT</id><enabled>Y</enabled><name>RESULT</name></field><field><id>NR_RESULT_ROWS</id><enabled>Y</enabled><name>NR_RESULT_ROWS</name></field><field><id>NR_RESULT_FILES</id><enabled>Y</enabled><name>NR_RESULT_FILES</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></jobentry-log-table>
<channel-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>LOGGING_OBJECT_TYPE</id><enabled>Y</enabled><name>LOGGING_OBJECT_TYPE</name></field><field><id>OBJECT_NAME</id><enabled>Y</enabled><name>OBJECT_NAME</name></field><field><id>OBJECT_COPY</id><enabled>Y</enabled><name>OBJECT_COPY</name></field><field><id>REPOSITORY_DIRECTORY</id><enabled>Y</enabled><name>REPOSITORY_DIRECTORY</name></field><field><id>FILENAME</id><enabled>Y</enabled><name>FILENAME</name></field><field><id>OBJECT_ID</id><enabled>Y</enabled><name>OBJECT_ID</name></field><field><id>OBJECT_REVISION</id><enabled>Y</enabled><name>OBJECT_REVISION</name></field><field><id>PARENT_CHANNEL_ID</id><enabled>Y</enabled><name>PARENT_CHANNEL_ID</name></field><field><id>ROOT_CHANNEL_ID</id><enabled>Y</enabled><name>ROOT_CHANNEL_ID</name></field></channel-log-table>
   <pass_batchid>N</pass_batchid>
   <shared_objects_file/>
  <entries>
    <entry>
      <name>truncate all warehouse tables WARNING WARNING DANGER DANGER</name>
      <description>Truncate tables</description>
      <type>TRUNCATE_TABLES</type>
      <connection>twitter_analytics</connection>
      <arg_from_previous>N</arg_from_previous>
      <fields>
        <field>
          <name>job_keyword_searches</name>
          <schemaname/>
        </field>
        <field>
          <name>job_user_lookups</name>
          <schemaname/>
        </field>
        <field>
          <name>staging_candidate_tweets</name>
          <schemaname/>
        </field>
        <field>
          <name>fact_tweets</name>
          <schemaname/>
        </field>
        <field>
          <name>fact_history_twitter_users</name>
          <schemaname/>
        </field>
        <field>
          <name>staging_fact_twitter_users</name>
          <schemaname/>
        </field>
        <field>
          <name>staging_fact_tweets</name>
          <schemaname/>
        </field>
      </fields>
      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>305</xloc>
      <yloc>30</yloc>
      </entry>
    <entry>
      <name>START</name>
      <description>Special entries</description>
      <type>SPECIAL</type>
      <start>Y</start>
      <dummy>N</dummy>
      <repeat>N</repeat>
      <schedulerType>0</schedulerType>
      <intervalSeconds>0</intervalSeconds>
      <intervalMinutes>60</intervalMinutes>
      <hour>12</hour>
      <minutes>0</minutes>
      <weekDay>1</weekDay>
      <DayOfMonth>1</DayOfMonth>
      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>67</xloc>
      <yloc>30</yloc>
      </entry>
    <entry>
      <name>Success 1</name>
      <description>Success</description>
      <type>SUCCESS</type>
      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>1019</xloc>
      <yloc>30</yloc>
      </entry>
    <entry>
      <name>truncate dimension tables</name>
      <description>Truncate tables</description>
      <type>TRUNCATE_TABLES</type>
      <connection>twitter_analytics</connection>
      <arg_from_previous>N</arg_from_previous>
      <fields>
        <field>
          <name>dim_double_keywords</name>
          <schemaname/>
        </field>
        <field>
          <name>dim_hashtags</name>
          <schemaname/>
        </field>
        <field>
          <name>dim_location</name>
          <schemaname/>
        </field>
        <field>
          <name>dim_quadruple_keywords</name>
          <schemaname/>
        </field>
        <field>
          <name>dim_referred_urls</name>
          <schemaname/>
        </field>
        <field>
          <name>dim_single_keywords</name>
          <schemaname/>
        </field>
        <field>
          <name>dim_time</name>
          <schemaname/>
        </field>
        <field>
          <name>dim_triple_keywords</name>
          <schemaname/>
        </field>
        <field>
          <name>dim_tweet_sources</name>
          <schemaname/>
        </field>
        <field>
          <name>dim_tweets</name>
          <schemaname/>
        </field>
        <field>
          <name>dim_twitter_keyword_searches</name>
          <schemaname/>
        </field>
        <field>
          <name>dim_twitter_users</name>
          <schemaname/>
        </field>
        <field>
          <name>dim_user_mentions</name>
          <schemaname/>
        </field>
      </fields>
      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>781</xloc>
      <yloc>30</yloc>
      </entry>
    <entry>
      <name>Truncate bridge tables</name>
      <description/>
      <type>TRUNCATE_TABLES</type>
      <connection>twitter_analytics</connection>
      <arg_from_previous>N</arg_from_previous>
      <fields>
        <field>
          <name>bridge_group_double_keywords</name>
          <schemaname/>
        </field>
        <field>
          <name>bridge_group_hashtags</name>
          <schemaname/>
        </field>
        <field>
          <name>bridge_group_quadruple_keywords</name>
          <schemaname/>
        </field>
        <field>
          <name>bridge_group_referred_urls</name>
          <schemaname/>
        </field>
        <field>
          <name>bridge_group_single_keywords</name>
          <schemaname/>
        </field>
        <field>
          <name>bridge_group_triple_keywords</name>
          <schemaname/>
        </field>
        <field>
          <name>bridge_group_user_mentions</name>
          <schemaname/>
        </field>
      </fields>
      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>543</xloc>
      <yloc>30</yloc>
      </entry>
  </entries>
  <hops>
    <hop>
      <from>START</from>
      <to>truncate all warehouse tables WARNING WARNING DANGER DANGER</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>Y</unconditional>
    </hop>
    <hop>
      <from>truncate dimension tables</from>
      <to>Success 1</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>truncate all warehouse tables WARNING WARNING DANGER DANGER</from>
      <to>Truncate bridge tables</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>Y</unconditional>
    </hop>
    <hop>
      <from>Truncate bridge tables</from>
      <to>truncate dimension tables</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>Y</unconditional>
    </hop>
  </hops>
  <notepads>
    <notepad>
      <note>!!!!WARNING WARNING DANGER DANGER!!!!
This will completely wipe out the entire data warehouse.
Leaving only the source_keywords, ref.* and settings tables intact</note>
      <xloc>75</xloc>
      <yloc>114</yloc>
      <width>328</width>
      <heigth>47</heigth>
      <fontname/>
      <fontsize>-1</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>0</fontcolorred>
      <fontcolorgreen>0</fontcolorgreen>
      <fontcolorblue>0</fontcolorblue>
      <backgroundcolorred>255</backgroundcolorred>
      <backgroundcolorgreen>255</backgroundcolorgreen>
      <backgroundcolorblue>0</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
  </notepads>
</job>

<job>
  <name>RunMe</name>
    <description/>
    <extended_description/>
    <job_version/>
    <job_status>0</job_status>
  <directory>&#47;twitter_analytics</directory>
  <created_user>admin</created_user>
  <created_date>2009&#47;09&#47;01 15:57:41.000</created_date>
  <modified_user>admin</modified_user>
  <modified_date>2009&#47;09&#47;01 15:57:41.000</modified_date>
    <parameters>
    </parameters>
  <connection>
    <name>twitter_analytics</name>
    <server>localhost</server>
    <type>MYSQL</type>
    <access>Native</access>
    <database>topgun_twitter_analytics</database>
    <port>3306</port>
    <username>topgun</username>
    <password>Encrypted 2be98afc86aa7f2e4cb1ba265db95bac3</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>EXTRA_OPTION_MYSQL.defaultFetchSize</code><attribute>500</attribute></attribute>
      <attribute><code>EXTRA_OPTION_MYSQL.useCursorFetch</code><attribute>true</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>3306</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>STREAM_RESULTS</code><attribute>Y</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>N</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>N</attribute></attribute>
    </attributes>
  </connection>
    <slaveservers>
    </slaveservers>
<job-log-table><connection/>
<schema/>
<table/>
<size_limit_lines/>
<interval/>
<timeout_days/>
<field><id>ID_JOB</id><enabled>Y</enabled><name>ID_JOB</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>JOBNAME</id><enabled>Y</enabled><name>JOBNAME</name></field><field><id>STATUS</id><enabled>Y</enabled><name>STATUS</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>STARTDATE</id><enabled>Y</enabled><name>STARTDATE</name></field><field><id>ENDDATE</id><enabled>Y</enabled><name>ENDDATE</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>DEPDATE</id><enabled>Y</enabled><name>DEPDATE</name></field><field><id>REPLAYDATE</id><enabled>Y</enabled><name>REPLAYDATE</name></field><field><id>LOG_FIELD</id><enabled>Y</enabled><name>LOG_FIELD</name></field></job-log-table>
<jobentry-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>JOBNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>JOBENTRYNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>RESULT</id><enabled>Y</enabled><name>RESULT</name></field><field><id>NR_RESULT_ROWS</id><enabled>Y</enabled><name>NR_RESULT_ROWS</name></field><field><id>NR_RESULT_FILES</id><enabled>Y</enabled><name>NR_RESULT_FILES</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></jobentry-log-table>
<channel-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>LOGGING_OBJECT_TYPE</id><enabled>Y</enabled><name>LOGGING_OBJECT_TYPE</name></field><field><id>OBJECT_NAME</id><enabled>Y</enabled><name>OBJECT_NAME</name></field><field><id>OBJECT_COPY</id><enabled>Y</enabled><name>OBJECT_COPY</name></field><field><id>REPOSITORY_DIRECTORY</id><enabled>Y</enabled><name>REPOSITORY_DIRECTORY</name></field><field><id>FILENAME</id><enabled>Y</enabled><name>FILENAME</name></field><field><id>OBJECT_ID</id><enabled>Y</enabled><name>OBJECT_ID</name></field><field><id>OBJECT_REVISION</id><enabled>Y</enabled><name>OBJECT_REVISION</name></field><field><id>PARENT_CHANNEL_ID</id><enabled>Y</enabled><name>PARENT_CHANNEL_ID</name></field><field><id>ROOT_CHANNEL_ID</id><enabled>Y</enabled><name>ROOT_CHANNEL_ID</name></field></channel-log-table>
   <pass_batchid>N</pass_batchid>
   <shared_objects_file/>
  <entries>
    <entry>
      <name>START</name>
      <description>Special entries</description>
      <type>SPECIAL</type>
      <start>Y</start>
      <dummy>N</dummy>
      <repeat>N</repeat>
      <schedulerType>0</schedulerType>
      <intervalSeconds>0</intervalSeconds>
      <intervalMinutes>60</intervalMinutes>
      <hour>12</hour>
      <minutes>0</minutes>
      <weekDay>1</weekDay>
      <DayOfMonth>1</DayOfMonth>
      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>131</xloc>
      <yloc>18</yloc>
      </entry>
    <entry>
      <name>job_keyword_searches, job_user_lookups</name>
      <description>Truncate tables</description>
      <type>TRUNCATE_TABLES</type>
      <connection>twitter_analytics</connection>
      <arg_from_previous>N</arg_from_previous>
      <fields>
        <field>
          <name>job_keyword_searches</name>
          <schemaname/>
        </field>
        <field>
          <name>job_user_lookups</name>
          <schemaname/>
        </field>
        <field>
          <name>staging_candidate_tweets</name>
          <schemaname/>
        </field>
        <field>
          <name>staging_fact_twitter_users</name>
          <schemaname/>
        </field>
      </fields>
      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>800</xloc>
      <yloc>915</yloc>
      </entry>
    <entry>
      <name>Success 1</name>
      <description>Success</description>
      <type>SUCCESS</type>
      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>1119</xloc>
      <yloc>915</yloc>
      </entry>
    <entry>
      <name>Move Data to warehouse</name>
      <description>Job</description>
      <type>JOB</type>
      <specification_method>rep_name</specification_method>
      <job_object_id/>
      <filename/>
      <jobname>Move Data to warehouse</jobname>
      <directory>&#47;twitter_analytics</directory>
      <arg_from_previous>N</arg_from_previous>
      <params_from_previous>N</params_from_previous>
      <exec_per_row>N</exec_per_row>
      <set_logfile>N</set_logfile>
      <logfile/>
      <logext/>
      <add_date>N</add_date>
      <add_time>N</add_time>
      <loglevel>Nothing</loglevel>
      <slave_server_name/>
      <wait_until_finished>Y</wait_until_finished>
      <follow_abort_remote>N</follow_abort_remote>
      <create_parent_folder>N</create_parent_folder>
      <pass_export>N</pass_export>
      <parameters>        <pass_all_parameters>Y</pass_all_parameters>
      </parameters>      <set_append_logfile>N</set_append_logfile>
      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>617</xloc>
      <yloc>915</yloc>
      </entry>
    <entry>
      <name>Set environment variables</name>
      <description>Transformation</description>
      <type>TRANS</type>
      <specification_method>rep_name</specification_method>
      <trans_object_id/>
      <filename/>
      <transname>Set environment variables</transname>
      <directory>&#47;twitter_analytics</directory>
      <arg_from_previous>N</arg_from_previous>
      <params_from_previous>N</params_from_previous>
      <exec_per_row>N</exec_per_row>
      <clear_rows>N</clear_rows>
      <clear_files>N</clear_files>
      <set_logfile>N</set_logfile>
      <logfile/>
      <logext/>
      <add_date>N</add_date>
      <add_time>N</add_time>
      <loglevel>Nothing</loglevel>
      <cluster>N</cluster>
      <slave_server_name/>
      <set_append_logfile>N</set_append_logfile>
      <wait_until_finished>Y</wait_until_finished>
      <follow_abort_remote>N</follow_abort_remote>
      <create_parent_folder>N</create_parent_folder>
      <parameters>        <pass_all_parameters>Y</pass_all_parameters>
      </parameters>      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>273</xloc>
      <yloc>18</yloc>
      </entry>
    <entry>
      <name>Fetch keywords</name>
      <description>Transformation</description>
      <type>TRANS</type>
      <specification_method>rep_name</specification_method>
      <trans_object_id/>
      <filename/>
      <transname>Fetch keywords</transname>
      <directory>&#47;twitter_analytics</directory>
      <arg_from_previous>N</arg_from_previous>
      <params_from_previous>N</params_from_previous>
      <exec_per_row>N</exec_per_row>
      <clear_rows>N</clear_rows>
      <clear_files>N</clear_files>
      <set_logfile>N</set_logfile>
      <logfile/>
      <logext/>
      <add_date>N</add_date>
      <add_time>N</add_time>
      <loglevel>Nothing</loglevel>
      <cluster>N</cluster>
      <slave_server_name/>
      <set_append_logfile>N</set_append_logfile>
      <wait_until_finished>Y</wait_until_finished>
      <follow_abort_remote>N</follow_abort_remote>
      <create_parent_folder>N</create_parent_folder>
      <parameters>        <pass_all_parameters>Y</pass_all_parameters>
      </parameters>      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>623</xloc>
      <yloc>18</yloc>
      </entry>
    <entry>
      <name>*A* Determine if previous job is complete</name>
      <description>Evaluate rows number in a table</description>
      <type>EVAL_TABLE_CONTENT</type>
      <connection>twitter_analytics</connection>
      <schemaname/>
      <tablename/>
      <success_condition>rows_count_equal</success_condition>
      <limit>0</limit>
      <is_custom_sql>Y</is_custom_sql>
      <is_usevars>N</is_usevars>
      <custom_sql>SELECT
	0
FROM
	job_keyword_searches
UNION ALL
SELECT
	0
FROM
	job_user_lookups</custom_sql>
      <add_rows_result>N</add_rows_result>
      <clear_result_rows>Y</clear_result_rows>
      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>451</xloc>
      <yloc>18</yloc>
      </entry>
    <entry>
      <name>Fetch Tweets from Search Terms</name>
      <description>Transformation</description>
      <type>TRANS</type>
      <specification_method>rep_name</specification_method>
      <trans_object_id/>
      <filename/>
      <transname>Fetch Tweets from Search Terms</transname>
      <directory>&#47;twitter_analytics</directory>
      <arg_from_previous>N</arg_from_previous>
      <params_from_previous>N</params_from_previous>
      <exec_per_row>N</exec_per_row>
      <clear_rows>N</clear_rows>
      <clear_files>N</clear_files>
      <set_logfile>N</set_logfile>
      <logfile/>
      <logext/>
      <add_date>N</add_date>
      <add_time>N</add_time>
      <loglevel>Nothing</loglevel>
      <cluster>N</cluster>
      <slave_server_name/>
      <set_append_logfile>N</set_append_logfile>
      <wait_until_finished>Y</wait_until_finished>
      <follow_abort_remote>N</follow_abort_remote>
      <create_parent_folder>N</create_parent_folder>
      <parameters>        <pass_all_parameters>Y</pass_all_parameters>
      </parameters>      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>802</xloc>
      <yloc>169</yloc>
      </entry>
    <entry>
      <name>Check Rate Limit</name>
      <description>Transformation</description>
      <type>TRANS</type>
      <specification_method>rep_name</specification_method>
      <trans_object_id/>
      <filename/>
      <transname>Check Rate Limit</transname>
      <directory>&#47;twitter_analytics</directory>
      <arg_from_previous>N</arg_from_previous>
      <params_from_previous>N</params_from_previous>
      <exec_per_row>N</exec_per_row>
      <clear_rows>N</clear_rows>
      <clear_files>N</clear_files>
      <set_logfile>N</set_logfile>
      <logfile/>
      <logext/>
      <add_date>N</add_date>
      <add_time>N</add_time>
      <loglevel>Nothing</loglevel>
      <cluster>N</cluster>
      <slave_server_name/>
      <set_append_logfile>N</set_append_logfile>
      <wait_until_finished>Y</wait_until_finished>
      <follow_abort_remote>N</follow_abort_remote>
      <create_parent_folder>N</create_parent_folder>
      <parameters>        <pass_all_parameters>Y</pass_all_parameters>
      </parameters>      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>617</xloc>
      <yloc>423</yloc>
      </entry>
    <entry>
      <name>Eval REMAINING_HITS</name>
      <description>Simple evaluation</description>
      <type>SIMPLE_EVAL</type>
      <valuetype>variable</valuetype>
      <fieldname/>
      <variablename>${REMAINING_HITS}</variablename>
      <fieldtype>number</fieldtype>
      <mask/>
      <comparevalue>0</comparevalue>
      <minvalue/>
      <maxvalue/>
      <successcondition>equal</successcondition>
      <successnumbercondition>greater</successnumbercondition>
      <successbooleancondition>true</successbooleancondition>
      <successwhenvarset>N</successwhenvarset>
      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>802</xloc>
      <yloc>423</yloc>
      </entry>
    <entry>
      <name>Wait for Twitter rate limit to reset</name>
      <description>Wait for</description>
      <type>DELAY</type>
      <maximumTimeout>${TIME_TO_WAIT}</maximumTimeout>
      <scaletime>0</scaletime>
      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>1024</xloc>
      <yloc>423</yloc>
      </entry>
    <entry>
      <name>*B* Determine keyword search is in progress</name>
      <description>Evaluate rows number in a table</description>
      <type>EVAL_TABLE_CONTENT</type>
      <connection>twitter_analytics</connection>
      <schemaname/>
      <tablename/>
      <success_condition>rows_count_greater</success_condition>
      <limit>0</limit>
      <is_custom_sql>Y</is_custom_sql>
      <is_usevars>N</is_usevars>
      <custom_sql>SELECT
	0
FROM
	job_keyword_searches AS jks INNER JOIN
	source_keywords AS sk ON jks.source_keyword_id = sk.id
WHERE
	state_id IN (&apos;PENDINGSEARCH&apos;, &apos;SEARCHINPROGRESS&apos;) AND
	sk.suspended = &apos;N&apos;</custom_sql>
      <add_rows_result>N</add_rows_result>
      <clear_result_rows>Y</clear_result_rows>
      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>451</xloc>
      <yloc>169</yloc>
      </entry>
    <entry>
      <name>*D* Determine user lookup progress</name>
      <description>Evaluate rows number in a table</description>
      <type>EVAL_TABLE_CONTENT</type>
      <connection>twitter_analytics</connection>
      <schemaname/>
      <tablename/>
      <success_condition>rows_count_greater</success_condition>
      <limit>0</limit>
      <is_custom_sql>Y</is_custom_sql>
      <is_usevars>N</is_usevars>
      <custom_sql>SELECT
	0
FROM
	job_user_lookups
WHERE
	state_id = &apos;PENDINGLOOKUP&apos;</custom_sql>
      <add_rows_result>N</add_rows_result>
      <clear_result_rows>Y</clear_result_rows>
      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>451</xloc>
      <yloc>423</yloc>
      </entry>
    <entry>
      <name>Fetch Users</name>
      <description>Transformation</description>
      <type>TRANS</type>
      <specification_method>rep_name</specification_method>
      <trans_object_id/>
      <filename/>
      <transname>Fetch Users</transname>
      <directory>&#47;twitter_analytics</directory>
      <arg_from_previous>N</arg_from_previous>
      <params_from_previous>N</params_from_previous>
      <exec_per_row>N</exec_per_row>
      <clear_rows>N</clear_rows>
      <clear_files>N</clear_files>
      <set_logfile>N</set_logfile>
      <logfile/>
      <logext/>
      <add_date>N</add_date>
      <add_time>N</add_time>
      <loglevel>Nothing</loglevel>
      <cluster>N</cluster>
      <slave_server_name/>
      <set_append_logfile>N</set_append_logfile>
      <wait_until_finished>Y</wait_until_finished>
      <follow_abort_remote>N</follow_abort_remote>
      <create_parent_folder>N</create_parent_folder>
      <parameters>        <pass_all_parameters>Y</pass_all_parameters>
      </parameters>      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>802</xloc>
      <yloc>553</yloc>
      </entry>
    <entry>
      <name>Load staging_fact_tweets</name>
      <description>Transformation</description>
      <type>TRANS</type>
      <specification_method>rep_name</specification_method>
      <trans_object_id/>
      <filename/>
      <transname>Load staging_fact_tweets</transname>
      <directory>&#47;twitter_analytics</directory>
      <arg_from_previous>N</arg_from_previous>
      <params_from_previous>N</params_from_previous>
      <exec_per_row>N</exec_per_row>
      <clear_rows>N</clear_rows>
      <clear_files>N</clear_files>
      <set_logfile>N</set_logfile>
      <logfile/>
      <logext/>
      <add_date>N</add_date>
      <add_time>N</add_time>
      <loglevel>Nothing</loglevel>
      <cluster>N</cluster>
      <slave_server_name/>
      <set_append_logfile>N</set_append_logfile>
      <wait_until_finished>Y</wait_until_finished>
      <follow_abort_remote>N</follow_abort_remote>
      <create_parent_folder>N</create_parent_folder>
      <parameters>        <pass_all_parameters>Y</pass_all_parameters>
      </parameters>      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>802</xloc>
      <yloc>289</yloc>
      </entry>
    <entry>
      <name>Load dim_time</name>
      <description>Transformation</description>
      <type>TRANS</type>
      <specification_method>rep_name</specification_method>
      <trans_object_id/>
      <filename/>
      <transname>Load dim_time</transname>
      <directory>&#47;twitter_analytics</directory>
      <arg_from_previous>N</arg_from_previous>
      <params_from_previous>N</params_from_previous>
      <exec_per_row>N</exec_per_row>
      <clear_rows>N</clear_rows>
      <clear_files>N</clear_files>
      <set_logfile>N</set_logfile>
      <logfile/>
      <logext/>
      <add_date>N</add_date>
      <add_time>N</add_time>
      <loglevel>Nothing</loglevel>
      <cluster>N</cluster>
      <slave_server_name/>
      <set_append_logfile>N</set_append_logfile>
      <wait_until_finished>Y</wait_until_finished>
      <follow_abort_remote>N</follow_abort_remote>
      <create_parent_folder>N</create_parent_folder>
      <parameters>        <pass_all_parameters>Y</pass_all_parameters>
      </parameters>      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>451</xloc>
      <yloc>774</yloc>
      </entry>
    <entry>
      <name>Load dim_location</name>
      <description>Transformation</description>
      <type>TRANS</type>
      <specification_method>rep_name</specification_method>
      <trans_object_id/>
      <filename/>
      <transname>Load dim_location</transname>
      <directory>&#47;twitter_analytics</directory>
      <arg_from_previous>N</arg_from_previous>
      <params_from_previous>N</params_from_previous>
      <exec_per_row>N</exec_per_row>
      <clear_rows>N</clear_rows>
      <clear_files>N</clear_files>
      <set_logfile>N</set_logfile>
      <logfile/>
      <logext/>
      <add_date>N</add_date>
      <add_time>N</add_time>
      <loglevel>Nothing</loglevel>
      <cluster>N</cluster>
      <slave_server_name/>
      <set_append_logfile>N</set_append_logfile>
      <wait_until_finished>Y</wait_until_finished>
      <follow_abort_remote>N</follow_abort_remote>
      <create_parent_folder>N</create_parent_folder>
      <parameters>        <pass_all_parameters>Y</pass_all_parameters>
      </parameters>      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>451</xloc>
      <yloc>915</yloc>
      </entry>
    <entry>
      <name>Update last tweet_id</name>
      <description>SQL</description>
      <type>SQL</type>
      <sql>UPDATE 
	source_keywords
SET 
	last_tweet_id = 
	(
	SELECT
		MAX(tweet_id) + 1
	FROM
		dim_tweets
	)
WHERE
	suspended = &apos;N&apos;</sql>
      <useVariableSubstitution>F</useVariableSubstitution>
      <sqlfromfile>F</sqlfromfile>
      <sqlfilename/>
      <sendOneStatement>F</sendOneStatement>
      <connection>twitter_analytics</connection>
      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>1022</xloc>
      <yloc>915</yloc>
      </entry>
    <entry>
      <name>*C* Determine keyword search is in progress</name>
      <description>Evaluate rows number in a table</description>
      <type>EVAL_TABLE_CONTENT</type>
      <connection>twitter_analytics</connection>
      <schemaname/>
      <tablename/>
      <success_condition>rows_count_greater</success_condition>
      <limit>0</limit>
      <is_custom_sql>Y</is_custom_sql>
      <is_usevars>N</is_usevars>
      <custom_sql>SELECT
	0
FROM
	job_keyword_searches AS jks INNER JOIN
	source_keywords AS sk ON jks.source_keyword_id = sk.id
WHERE
	state_id IN (&apos;PENDINGSEARCH&apos;, &apos;SEARCHINPROGRESS&apos;) AND
	sk.suspended = &apos;N&apos;</custom_sql>
      <add_rows_result>N</add_rows_result>
      <clear_result_rows>Y</clear_result_rows>
      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>1040</xloc>
      <yloc>169</yloc>
      </entry>
    <entry>
      <name>*E* Determine URL lookup progress</name>
      <description>Evaluate rows number in a table</description>
      <type>EVAL_TABLE_CONTENT</type>
      <connection>twitter_analytics</connection>
      <schemaname/>
      <tablename/>
      <success_condition>rows_count_greater</success_condition>
      <limit>0</limit>
      <is_custom_sql>Y</is_custom_sql>
      <is_usevars>N</is_usevars>
      <custom_sql>SELECT
	0
FROM
	staging_fact_tweets
WHERE
	num_embedded_urls IS NULL
</custom_sql>
      <add_rows_result>N</add_rows_result>
      <clear_result_rows>Y</clear_result_rows>
      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>451</xloc>
      <yloc>585</yloc>
      </entry>
    <entry>
      <name>Extract URLs from Tweets</name>
      <description>Transformation</description>
      <type>TRANS</type>
      <specification_method>rep_name</specification_method>
      <trans_object_id/>
      <filename/>
      <transname>Extract URLs from Tweets</transname>
      <directory>&#47;twitter_analytics</directory>
      <arg_from_previous>N</arg_from_previous>
      <params_from_previous>N</params_from_previous>
      <exec_per_row>N</exec_per_row>
      <clear_rows>N</clear_rows>
      <clear_files>N</clear_files>
      <set_logfile>N</set_logfile>
      <logfile/>
      <logext/>
      <add_date>N</add_date>
      <add_time>N</add_time>
      <loglevel>Nothing</loglevel>
      <cluster>N</cluster>
      <slave_server_name/>
      <set_append_logfile>N</set_append_logfile>
      <wait_until_finished>Y</wait_until_finished>
      <follow_abort_remote>N</follow_abort_remote>
      <create_parent_folder>N</create_parent_folder>
      <parameters>        <pass_all_parameters>Y</pass_all_parameters>
      </parameters>      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>655</xloc>
      <yloc>585</yloc>
      </entry>
    <entry>
      <name>Extract Twitter Keywords, User Mentions, and Hashtags</name>
      <description/>
      <type>TRANS</type>
      <specification_method>rep_name</specification_method>
      <trans_object_id/>
      <filename/>
      <transname>Extract Twitter Keywords</transname>
      <directory>&#47;twitter_analytics</directory>
      <arg_from_previous>N</arg_from_previous>
      <params_from_previous>N</params_from_previous>
      <exec_per_row>N</exec_per_row>
      <clear_rows>N</clear_rows>
      <clear_files>N</clear_files>
      <set_logfile>N</set_logfile>
      <logfile/>
      <logext/>
      <add_date>N</add_date>
      <add_time>N</add_time>
      <loglevel>Basic</loglevel>
      <cluster>N</cluster>
      <slave_server_name/>
      <set_append_logfile>N</set_append_logfile>
      <wait_until_finished>Y</wait_until_finished>
      <follow_abort_remote>N</follow_abort_remote>
      <create_parent_folder>N</create_parent_folder>
      <parameters>        <pass_all_parameters>Y</pass_all_parameters>
      </parameters>      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>452</xloc>
      <yloc>691</yloc>
      </entry>
  </entries>
  <hops>
    <hop>
      <from>Set environment variables</from>
      <to>*A* Determine if previous job is complete</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>*A* Determine if previous job is complete</from>
      <to>Fetch keywords</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>Eval REMAINING_HITS</from>
      <to>Wait for Twitter rate limit to reset</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>N</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>Move Data to warehouse</from>
      <to>job_keyword_searches, job_user_lookups</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>*B* Determine keyword search is in progress</from>
      <to>Fetch Tweets from Search Terms</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>Fetch keywords</from>
      <to>*B* Determine keyword search is in progress</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>Load dim_time</from>
      <to>Load dim_location</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>Load dim_location</from>
      <to>Move Data to warehouse</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>job_keyword_searches, job_user_lookups</from>
      <to>Update last tweet_id</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>Update last tweet_id</from>
      <to>Success 1</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>*A* Determine if previous job is complete</from>
      <to>*B* Determine keyword search is in progress</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>N</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>*D* Determine user lookup progress</from>
      <to>Check Rate Limit</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>Check Rate Limit</from>
      <to>Eval REMAINING_HITS</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>Eval REMAINING_HITS</from>
      <to>Fetch Users</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>Fetch Users</from>
      <to>*D* Determine user lookup progress</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>Y</unconditional>
    </hop>
    <hop>
      <from>Wait for Twitter rate limit to reset</from>
      <to>Fetch Users</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>START</from>
      <to>Set environment variables</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>Y</unconditional>
    </hop>
    <hop>
      <from>*B* Determine keyword search is in progress</from>
      <to>*D* Determine user lookup progress</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>N</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>Fetch Tweets from Search Terms</from>
      <to>*C* Determine keyword search is in progress</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>*C* Determine keyword search is in progress</from>
      <to>Fetch Tweets from Search Terms</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>*C* Determine keyword search is in progress</from>
      <to>Load staging_fact_tweets</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>N</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>Load staging_fact_tweets</from>
      <to>*D* Determine user lookup progress</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>*D* Determine user lookup progress</from>
      <to>*E* Determine URL lookup progress</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>N</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>*E* Determine URL lookup progress</from>
      <to>Extract URLs from Tweets</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>Extract URLs from Tweets</from>
      <to>*E* Determine URL lookup progress</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>*E* Determine URL lookup progress</from>
      <to>Extract Twitter Keywords, User Mentions, and Hashtags</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>N</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>Extract Twitter Keywords, User Mentions, and Hashtags</from>
      <to>Load dim_time</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>N</unconditional>
    </hop>
  </hops>
  <notepads>
    <notepad>
      <note>Copyright 2011 IRMAC Education 
this program is distributed under the GNU AGPL license</note>
      <xloc>31</xloc>
      <yloc>104</yloc>
      <width>282</width>
      <heigth>35</heigth>
      <fontname>Microsoft Sans Serif</fontname>
      <fontsize>8</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>0</fontcolorred>
      <fontcolorgreen>0</fontcolorgreen>
      <fontcolorblue>0</fontcolorblue>
      <backgroundcolorred>255</backgroundcolorred>
      <backgroundcolorgreen>255</backgroundcolorgreen>
      <backgroundcolorblue>0</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
  </notepads>
</job>

</jobs>
</repository>

